{
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/server.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/server.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/server.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/server.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
        "sourceFileName": "server.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _os = _interopRequireDefault(require(\"os\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _mArg = _interopRequireDefault(require(\"./utils/mArg\"));\n\nvar _mLog = _interopRequireDefault(require(\"./utils/mLog\"));\n\nvar _api = _interopRequireDefault(require(\"./routes/api\"));\n\nrequire(\"./middleware/passport\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Entry point function\nconst start = async () => {\n  try {\n    const args = (0, _mArg.default)({\n      '--port': Number,\n      // aliases\n      '-p': '--port'\n    }); // Setting the application port depending to environment\n\n    const networkInterfaces = _os.default.networkInterfaces();\n\n    const host = networkInterfaces.lo0[0].address || HOST;\n    const port = args.port || \"4000\"; // database synchronization ...\n    // await database.authenticate()\n\n    (0, _mLog.default)('Connected to SQL database!', 'green'); // initialize filesystem stuff\n    // await initialize()\n    // instantiate express application\n\n    const app = (0, _express.default)(); // authentication middleware\n    // app.use(passport.initialize())\n    // body data en+decoding\n\n    app.use(_bodyParser.default.urlencoded());\n    app.use(_bodyParser.default.json());\n    app.use((0, _cors.default)());\n    app.use((req, res, next) => {\n      // version the media type and extend the language for api versionning\n      res.setHeader('Accept', 'application/vnd.upload.island.v1+json'); // website we wish to allow to connect\n\n      res.setHeader('Access-Control-Allow-Origin', '*'); // request methods we wish to allow\n\n      res.setHeader('Access-Control-Allow-Methods', 'GET, POST, OPTIONS, PUT, PATCH, DELETE'); // request headers we wish to allow\n\n      res.setHeader('Access-Control-Allow-Headers', 'X-Requested-With, Accept, Authorization, Content-Type'); // set to true if we need the website to include cookies in the requests sent\n      // to the API (e.g. in case we use sessions)\n\n      res.setHeader('Access-Control-Allow-Credentials', true); // pass to next layer of middleware\n\n      next();\n    });\n    app.get('/', (req, res) => {\n      res.send(`Please feel free to use our api in ${host}:${port}/api`);\n    }); // About routes definition\n\n    app.use('/api', _api.default); // Catching 404 error and forwarding to error handler\n\n    app.use((req, res, next) => {\n      const err = new Error('Routes not found');\n      err.status = 404;\n      next(err);\n    }); // error handler\n\n    app.use((err, req, res) => {\n      res.status(err.status || 500).json({\n        err: err.message\n      });\n    }); // ... and finally server listening\n\n    app.listen(port, err => {\n      if (err) throw err;\n      (0, _mLog.default)(`Server is running on port ${port}`);\n    });\n  } catch (err) {\n    (0, _mLog.default)(err, 'red');\n    process.exit(42);\n  }\n}; // Let's Rock!\n\n\nstart();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJzdGFydCIsImFyZ3MiLCJOdW1iZXIiLCJuZXR3b3JrSW50ZXJmYWNlcyIsIm9zIiwiaG9zdCIsImxvMCIsImFkZHJlc3MiLCJIT1NUIiwicG9ydCIsImFwcCIsInVzZSIsImJvZHlQYXJzZXIiLCJ1cmxlbmNvZGVkIiwianNvbiIsInJlcSIsInJlcyIsIm5leHQiLCJzZXRIZWFkZXIiLCJnZXQiLCJzZW5kIiwiYXBpIiwiZXJyIiwiRXJyb3IiLCJzdGF0dXMiLCJtZXNzYWdlIiwibGlzdGVuIiwicHJvY2VzcyIsImV4aXQiXSwibWFwcGluZ3MiOiI7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBRUE7O0FBRUE7Ozs7QUFHQTtBQUNBLE1BQU1BLEtBQUssR0FBRyxZQUFZO0FBQ3hCLE1BQUk7QUFDRixVQUFNQyxJQUFJLEdBQUcsbUJBQUs7QUFDaEIsZ0JBQVVDLE1BRE07QUFHaEI7QUFDQSxZQUFNO0FBSlUsS0FBTCxDQUFiLENBREUsQ0FRRjs7QUFDQSxVQUFNQyxpQkFBaUIsR0FBR0MsWUFBR0QsaUJBQUgsRUFBMUI7O0FBRUEsVUFBTUUsSUFBSSxHQUFHRixpQkFBaUIsQ0FBQ0csR0FBbEIsQ0FBc0IsQ0FBdEIsRUFBeUJDLE9BQXpCLElBQW9DQyxJQUFqRDtBQUNBLFVBQU1DLElBQUksR0FBR1IsSUFBSSxDQUFDUSxJQUFMLFVBQWIsQ0FaRSxDQWFGO0FBQ0E7O0FBRUEsdUJBQUssNEJBQUwsRUFBbUMsT0FBbkMsRUFoQkUsQ0FvQkY7QUFDQTtBQUVBOztBQUNBLFVBQU1DLEdBQUcsR0FBRyx1QkFBWixDQXhCRSxDQTBCRjtBQUNBO0FBRUE7O0FBQ0FBLElBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRQyxvQkFBV0MsVUFBWCxFQUFSO0FBQ0FILElBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRQyxvQkFBV0UsSUFBWCxFQUFSO0FBQ0FKLElBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLG9CQUFSO0FBRUFELElBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLENBQUNJLEdBQUQsRUFBTUMsR0FBTixFQUFXQyxJQUFYLEtBQW9CO0FBQzFCO0FBQ0FELE1BQUFBLEdBQUcsQ0FBQ0UsU0FBSixDQUFjLFFBQWQsRUFBd0IsdUNBQXhCLEVBRjBCLENBSTFCOztBQUNBRixNQUFBQSxHQUFHLENBQUNFLFNBQUosQ0FBYyw2QkFBZCxFQUE2QyxHQUE3QyxFQUwwQixDQU8xQjs7QUFDQUYsTUFBQUEsR0FBRyxDQUFDRSxTQUFKLENBQWMsOEJBQWQsRUFBOEMsd0NBQTlDLEVBUjBCLENBVTFCOztBQUNBRixNQUFBQSxHQUFHLENBQUNFLFNBQUosQ0FDRSw4QkFERixFQUVFLHVEQUZGLEVBWDBCLENBZ0IxQjtBQUNBOztBQUNBRixNQUFBQSxHQUFHLENBQUNFLFNBQUosQ0FBYyxrQ0FBZCxFQUFrRCxJQUFsRCxFQWxCMEIsQ0FvQjFCOztBQUNBRCxNQUFBQSxJQUFJO0FBQ0wsS0F0QkQ7QUF3QkFQLElBQUFBLEdBQUcsQ0FBQ1MsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDSixHQUFELEVBQU1DLEdBQU4sS0FBYztBQUN6QkEsTUFBQUEsR0FBRyxDQUFDSSxJQUFKLENBQVUsc0NBQXFDZixJQUFLLElBQUdJLElBQUssTUFBNUQ7QUFDRCxLQUZELEVBMURFLENBOERGOztBQUNBQyxJQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBUSxNQUFSLEVBQWdCVSxZQUFoQixFQS9ERSxDQWlFRjs7QUFDQVgsSUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsQ0FBQ0ksR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsS0FBb0I7QUFDMUIsWUFBTUssR0FBRyxHQUFHLElBQUlDLEtBQUosQ0FBVSxrQkFBVixDQUFaO0FBQ0FELE1BQUFBLEdBQUcsQ0FBQ0UsTUFBSixHQUFhLEdBQWI7QUFDQVAsTUFBQUEsSUFBSSxDQUFDSyxHQUFELENBQUo7QUFDRCxLQUpELEVBbEVFLENBd0VGOztBQUNBWixJQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBUSxDQUFDVyxHQUFELEVBQU1QLEdBQU4sRUFBV0MsR0FBWCxLQUFtQjtBQUN6QkEsTUFBQUEsR0FBRyxDQUFDUSxNQUFKLENBQVdGLEdBQUcsQ0FBQ0UsTUFBSixJQUFjLEdBQXpCLEVBQThCVixJQUE5QixDQUFtQztBQUFFUSxRQUFBQSxHQUFHLEVBQUVBLEdBQUcsQ0FBQ0c7QUFBWCxPQUFuQztBQUNELEtBRkQsRUF6RUUsQ0E2RUY7O0FBQ0FmLElBQUFBLEdBQUcsQ0FBQ2dCLE1BQUosQ0FBV2pCLElBQVgsRUFBa0JhLEdBQUQsSUFBUztBQUN4QixVQUFJQSxHQUFKLEVBQVMsTUFBTUEsR0FBTjtBQUVULHlCQUFNLDZCQUE0QmIsSUFBSyxFQUF2QztBQUNELEtBSkQ7QUFLRCxHQW5GRCxDQW1GRSxPQUFPYSxHQUFQLEVBQVk7QUFDWix1QkFBS0EsR0FBTCxFQUFVLEtBQVY7QUFDQUssSUFBQUEsT0FBTyxDQUFDQyxJQUFSLENBQWEsRUFBYjtBQUNEO0FBQ0YsQ0F4RkQsQyxDQTBGQTs7O0FBQ0E1QixLQUFLIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9lZnJlaS1wYXJpcy9Eb2N1bWVudHMvUHJvamV0cy1wZXJzby94ZXUvc2VydmVyIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTk9ERV9FTlYsIFBPUlQgfSBmcm9tICdAZW52J1xuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcydcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJ1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gJ3Bhc3Nwb3J0J1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycydcblxuaW1wb3J0IG9zIGZyb20gJ29zJ1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcblxuaW1wb3J0IG1BcmcgZnJvbSAnLi91dGlscy9tQXJnJ1xuaW1wb3J0IG1Mb2cgZnJvbSAnLi91dGlscy9tTG9nJ1xuXG5pbXBvcnQgYXBpIGZyb20gJy4vcm91dGVzL2FwaSdcblxuaW1wb3J0ICcuL21pZGRsZXdhcmUvcGFzc3BvcnQnXG5cblxuLy8gRW50cnkgcG9pbnQgZnVuY3Rpb25cbmNvbnN0IHN0YXJ0ID0gYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGFyZ3MgPSBtQXJnKHtcbiAgICAgICctLXBvcnQnOiBOdW1iZXIsXG5cbiAgICAgIC8vIGFsaWFzZXNcbiAgICAgICctcCc6ICctLXBvcnQnLFxuICAgIH0pXG5cbiAgICAvLyBTZXR0aW5nIHRoZSBhcHBsaWNhdGlvbiBwb3J0IGRlcGVuZGluZyB0byBlbnZpcm9ubWVudFxuICAgIGNvbnN0IG5ldHdvcmtJbnRlcmZhY2VzID0gb3MubmV0d29ya0ludGVyZmFjZXMoKVxuXG4gICAgY29uc3QgaG9zdCA9IG5ldHdvcmtJbnRlcmZhY2VzLmxvMFswXS5hZGRyZXNzIHx8IEhPU1RcbiAgICBjb25zdCBwb3J0ID0gYXJncy5wb3J0IHx8IFBPUlRcbiAgICAvLyBkYXRhYmFzZSBzeW5jaHJvbml6YXRpb24gLi4uXG4gICAgLy8gYXdhaXQgZGF0YWJhc2UuYXV0aGVudGljYXRlKClcblxuICAgIG1Mb2coJ0Nvbm5lY3RlZCB0byBTUUwgZGF0YWJhc2UhJywgJ2dyZWVuJylcblxuICBcblxuICAgIC8vIGluaXRpYWxpemUgZmlsZXN5c3RlbSBzdHVmZlxuICAgIC8vIGF3YWl0IGluaXRpYWxpemUoKVxuXG4gICAgLy8gaW5zdGFudGlhdGUgZXhwcmVzcyBhcHBsaWNhdGlvblxuICAgIGNvbnN0IGFwcCA9IGV4cHJlc3MoKVxuXG4gICAgLy8gYXV0aGVudGljYXRpb24gbWlkZGxld2FyZVxuICAgIC8vIGFwcC51c2UocGFzc3BvcnQuaW5pdGlhbGl6ZSgpKVxuXG4gICAgLy8gYm9keSBkYXRhIGVuK2RlY29kaW5nXG4gICAgYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoKSlcbiAgICBhcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKVxuICAgIGFwcC51c2UoY29ycygpKVxuXG4gICAgYXBwLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgIC8vIHZlcnNpb24gdGhlIG1lZGlhIHR5cGUgYW5kIGV4dGVuZCB0aGUgbGFuZ3VhZ2UgZm9yIGFwaSB2ZXJzaW9ubmluZ1xuICAgICAgcmVzLnNldEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL3ZuZC51cGxvYWQuaXNsYW5kLnYxK2pzb24nKVxuXG4gICAgICAvLyB3ZWJzaXRlIHdlIHdpc2ggdG8gYWxsb3cgdG8gY29ubmVjdFxuICAgICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJyonKVxuXG4gICAgICAvLyByZXF1ZXN0IG1ldGhvZHMgd2Ugd2lzaCB0byBhbGxvd1xuICAgICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsIFBPU1QsIE9QVElPTlMsIFBVVCwgUEFUQ0gsIERFTEVURScpXG5cbiAgICAgIC8vIHJlcXVlc3QgaGVhZGVycyB3ZSB3aXNoIHRvIGFsbG93XG4gICAgICByZXMuc2V0SGVhZGVyKFxuICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsXG4gICAgICAgICdYLVJlcXVlc3RlZC1XaXRoLCBBY2NlcHQsIEF1dGhvcml6YXRpb24sIENvbnRlbnQtVHlwZScsXG4gICAgICApXG5cbiAgICAgIC8vIHNldCB0byB0cnVlIGlmIHdlIG5lZWQgdGhlIHdlYnNpdGUgdG8gaW5jbHVkZSBjb29raWVzIGluIHRoZSByZXF1ZXN0cyBzZW50XG4gICAgICAvLyB0byB0aGUgQVBJIChlLmcuIGluIGNhc2Ugd2UgdXNlIHNlc3Npb25zKVxuICAgICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCB0cnVlKVxuXG4gICAgICAvLyBwYXNzIHRvIG5leHQgbGF5ZXIgb2YgbWlkZGxld2FyZVxuICAgICAgbmV4dCgpXG4gICAgfSlcblxuICAgIGFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcbiAgICAgIHJlcy5zZW5kKGBQbGVhc2UgZmVlbCBmcmVlIHRvIHVzZSBvdXIgYXBpIGluICR7aG9zdH06JHtwb3J0fS9hcGlgKVxuICAgIH0pXG5cbiAgICAvLyBBYm91dCByb3V0ZXMgZGVmaW5pdGlvblxuICAgIGFwcC51c2UoJy9hcGknLCBhcGkpXG5cbiAgICAvLyBDYXRjaGluZyA0MDQgZXJyb3IgYW5kIGZvcndhcmRpbmcgdG8gZXJyb3IgaGFuZGxlclxuICAgIGFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoJ1JvdXRlcyBub3QgZm91bmQnKVxuICAgICAgZXJyLnN0YXR1cyA9IDQwNFxuICAgICAgbmV4dChlcnIpXG4gICAgfSlcblxuICAgIC8vIGVycm9yIGhhbmRsZXJcbiAgICBhcHAudXNlKChlcnIsIHJlcSwgcmVzKSA9PiB7XG4gICAgICByZXMuc3RhdHVzKGVyci5zdGF0dXMgfHwgNTAwKS5qc29uKHsgZXJyOiBlcnIubWVzc2FnZSB9KVxuICAgIH0pXG5cbiAgICAvLyAuLi4gYW5kIGZpbmFsbHkgc2VydmVyIGxpc3RlbmluZ1xuICAgIGFwcC5saXN0ZW4ocG9ydCwgKGVycikgPT4ge1xuICAgICAgaWYgKGVycikgdGhyb3cgZXJyXG5cbiAgICAgIG1Mb2coYFNlcnZlciBpcyBydW5uaW5nIG9uIHBvcnQgJHtwb3J0fWApXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbUxvZyhlcnIsICdyZWQnKVxuICAgIHByb2Nlc3MuZXhpdCg0MilcbiAgfVxufVxuXG4vLyBMZXQncyBSb2NrIVxuc3RhcnQoKVxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "server.js"
      ],
      "names": [
        "start",
        "args",
        "Number",
        "networkInterfaces",
        "os",
        "host",
        "lo0",
        "address",
        "HOST",
        "port",
        "app",
        "use",
        "bodyParser",
        "urlencoded",
        "json",
        "req",
        "res",
        "next",
        "setHeader",
        "get",
        "send",
        "api",
        "err",
        "Error",
        "status",
        "message",
        "listen",
        "process",
        "exit"
      ],
      "mappings": ";;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AAEA;;AACA;;AAEA;;AAEA;;;;AAGA;AACA,MAAMA,KAAK,GAAG,YAAY;AACxB,MAAI;AACF,UAAMC,IAAI,GAAG,mBAAK;AAChB,gBAAUC,MADM;AAGhB;AACA,YAAM;AAJU,KAAL,CAAb,CADE,CAQF;;AACA,UAAMC,iBAAiB,GAAGC,YAAGD,iBAAH,EAA1B;;AAEA,UAAME,IAAI,GAAGF,iBAAiB,CAACG,GAAlB,CAAsB,CAAtB,EAAyBC,OAAzB,IAAoCC,IAAjD;AACA,UAAMC,IAAI,GAAGR,IAAI,CAACQ,IAAL,UAAb,CAZE,CAaF;AACA;;AAEA,uBAAK,4BAAL,EAAmC,OAAnC,EAhBE,CAoBF;AACA;AAEA;;AACA,UAAMC,GAAG,GAAG,uBAAZ,CAxBE,CA0BF;AACA;AAEA;;AACAA,IAAAA,GAAG,CAACC,GAAJ,CAAQC,oBAAWC,UAAX,EAAR;AACAH,IAAAA,GAAG,CAACC,GAAJ,CAAQC,oBAAWE,IAAX,EAAR;AACAJ,IAAAA,GAAG,CAACC,GAAJ,CAAQ,oBAAR;AAEAD,IAAAA,GAAG,CAACC,GAAJ,CAAQ,CAACI,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC1B;AACAD,MAAAA,GAAG,CAACE,SAAJ,CAAc,QAAd,EAAwB,uCAAxB,EAF0B,CAI1B;;AACAF,MAAAA,GAAG,CAACE,SAAJ,CAAc,6BAAd,EAA6C,GAA7C,EAL0B,CAO1B;;AACAF,MAAAA,GAAG,CAACE,SAAJ,CAAc,8BAAd,EAA8C,wCAA9C,EAR0B,CAU1B;;AACAF,MAAAA,GAAG,CAACE,SAAJ,CACE,8BADF,EAEE,uDAFF,EAX0B,CAgB1B;AACA;;AACAF,MAAAA,GAAG,CAACE,SAAJ,CAAc,kCAAd,EAAkD,IAAlD,EAlB0B,CAoB1B;;AACAD,MAAAA,IAAI;AACL,KAtBD;AAwBAP,IAAAA,GAAG,CAACS,GAAJ,CAAQ,GAAR,EAAa,CAACJ,GAAD,EAAMC,GAAN,KAAc;AACzBA,MAAAA,GAAG,CAACI,IAAJ,CAAU,sCAAqCf,IAAK,IAAGI,IAAK,MAA5D;AACD,KAFD,EA1DE,CA8DF;;AACAC,IAAAA,GAAG,CAACC,GAAJ,CAAQ,MAAR,EAAgBU,YAAhB,EA/DE,CAiEF;;AACAX,IAAAA,GAAG,CAACC,GAAJ,CAAQ,CAACI,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC1B,YAAMK,GAAG,GAAG,IAAIC,KAAJ,CAAU,kBAAV,CAAZ;AACAD,MAAAA,GAAG,CAACE,MAAJ,GAAa,GAAb;AACAP,MAAAA,IAAI,CAACK,GAAD,CAAJ;AACD,KAJD,EAlEE,CAwEF;;AACAZ,IAAAA,GAAG,CAACC,GAAJ,CAAQ,CAACW,GAAD,EAAMP,GAAN,EAAWC,GAAX,KAAmB;AACzBA,MAAAA,GAAG,CAACQ,MAAJ,CAAWF,GAAG,CAACE,MAAJ,IAAc,GAAzB,EAA8BV,IAA9B,CAAmC;AAAEQ,QAAAA,GAAG,EAAEA,GAAG,CAACG;AAAX,OAAnC;AACD,KAFD,EAzEE,CA6EF;;AACAf,IAAAA,GAAG,CAACgB,MAAJ,CAAWjB,IAAX,EAAkBa,GAAD,IAAS;AACxB,UAAIA,GAAJ,EAAS,MAAMA,GAAN;AAET,yBAAM,6BAA4Bb,IAAK,EAAvC;AACD,KAJD;AAKD,GAnFD,CAmFE,OAAOa,GAAP,EAAY;AACZ,uBAAKA,GAAL,EAAU,KAAV;AACAK,IAAAA,OAAO,CAACC,IAAR,CAAa,EAAb;AACD;AACF,CAxFD,C,CA0FA;;;AACA5B,KAAK",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourcesContent": [
        "import { NODE_ENV, PORT } from '@env'\nimport express from 'express'\nimport bodyParser from 'body-parser'\nimport passport from 'passport'\nimport cors from 'cors'\n\nimport os from 'os'\nimport path from 'path'\n\nimport mArg from './utils/mArg'\nimport mLog from './utils/mLog'\n\nimport api from './routes/api'\n\nimport './middleware/passport'\n\n\n// Entry point function\nconst start = async () => {\n  try {\n    const args = mArg({\n      '--port': Number,\n\n      // aliases\n      '-p': '--port',\n    })\n\n    // Setting the application port depending to environment\n    const networkInterfaces = os.networkInterfaces()\n\n    const host = networkInterfaces.lo0[0].address || HOST\n    const port = args.port || PORT\n    // database synchronization ...\n    // await database.authenticate()\n\n    mLog('Connected to SQL database!', 'green')\n\n  \n\n    // initialize filesystem stuff\n    // await initialize()\n\n    // instantiate express application\n    const app = express()\n\n    // authentication middleware\n    // app.use(passport.initialize())\n\n    // body data en+decoding\n    app.use(bodyParser.urlencoded())\n    app.use(bodyParser.json())\n    app.use(cors())\n\n    app.use((req, res, next) => {\n      // version the media type and extend the language for api versionning\n      res.setHeader('Accept', 'application/vnd.upload.island.v1+json')\n\n      // website we wish to allow to connect\n      res.setHeader('Access-Control-Allow-Origin', '*')\n\n      // request methods we wish to allow\n      res.setHeader('Access-Control-Allow-Methods', 'GET, POST, OPTIONS, PUT, PATCH, DELETE')\n\n      // request headers we wish to allow\n      res.setHeader(\n        'Access-Control-Allow-Headers',\n        'X-Requested-With, Accept, Authorization, Content-Type',\n      )\n\n      // set to true if we need the website to include cookies in the requests sent\n      // to the API (e.g. in case we use sessions)\n      res.setHeader('Access-Control-Allow-Credentials', true)\n\n      // pass to next layer of middleware\n      next()\n    })\n\n    app.get('/', (req, res) => {\n      res.send(`Please feel free to use our api in ${host}:${port}/api`)\n    })\n\n    // About routes definition\n    app.use('/api', api)\n\n    // Catching 404 error and forwarding to error handler\n    app.use((req, res, next) => {\n      const err = new Error('Routes not found')\n      err.status = 404\n      next(err)\n    })\n\n    // error handler\n    app.use((err, req, res) => {\n      res.status(err.status || 500).json({ err: err.message })\n    })\n\n    // ... and finally server listening\n    app.listen(port, (err) => {\n      if (err) throw err\n\n      mLog(`Server is running on port ${port}`)\n    })\n  } catch (err) {\n    mLog(err, 'red')\n    process.exit(42)\n  }\n}\n\n// Let's Rock!\nstart()\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554464996810
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mArg.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mArg.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mArg.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mArg.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
        "sourceFileName": "mArg.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _arg = _interopRequireDefault(require(\"arg\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _default(options) {\n  const args = (0, _arg.default)(options);\n  delete args._;\n\n  for (const key in args) {\n    args[key.substr(2)] = args[key];\n    delete args[key];\n  }\n\n  return args;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1BcmcuanMiXSwibmFtZXMiOlsib3B0aW9ucyIsImFyZ3MiLCJfIiwia2V5Iiwic3Vic3RyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFZSxrQkFBVUEsT0FBVixFQUFtQjtBQUNoQyxRQUFNQyxJQUFJLEdBQUcsa0JBQUlELE9BQUosQ0FBYjtBQUVBLFNBQU9DLElBQUksQ0FBQ0MsQ0FBWjs7QUFFQSxPQUFLLE1BQU1DLEdBQVgsSUFBa0JGLElBQWxCLEVBQXdCO0FBQ3RCQSxJQUFBQSxJQUFJLENBQUNFLEdBQUcsQ0FBQ0MsTUFBSixDQUFXLENBQVgsQ0FBRCxDQUFKLEdBQXNCSCxJQUFJLENBQUNFLEdBQUQsQ0FBMUI7QUFDQSxXQUFPRixJQUFJLENBQUNFLEdBQUQsQ0FBWDtBQUNEOztBQUVELFNBQU9GLElBQVA7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvZWZyZWktcGFyaXMvRG9jdW1lbnRzL1Byb2pldHMtcGVyc28veGV1L3NlcnZlci91dGlscyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhcmcgZnJvbSAnYXJnJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAob3B0aW9ucykge1xuICBjb25zdCBhcmdzID0gYXJnKG9wdGlvbnMpXG5cbiAgZGVsZXRlIGFyZ3MuX1xuXG4gIGZvciAoY29uc3Qga2V5IGluIGFyZ3MpIHtcbiAgICBhcmdzW2tleS5zdWJzdHIoMildID0gYXJnc1trZXldXG4gICAgZGVsZXRlIGFyZ3Nba2V5XVxuICB9XG5cbiAgcmV0dXJuIGFyZ3Ncbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "mArg.js"
      ],
      "names": [
        "options",
        "args",
        "_",
        "key",
        "substr"
      ],
      "mappings": ";;;;;;;AAAA;;;;AAEe,kBAAUA,OAAV,EAAmB;AAChC,QAAMC,IAAI,GAAG,kBAAID,OAAJ,CAAb;AAEA,SAAOC,IAAI,CAACC,CAAZ;;AAEA,OAAK,MAAMC,GAAX,IAAkBF,IAAlB,EAAwB;AACtBA,IAAAA,IAAI,CAACE,GAAG,CAACC,MAAJ,CAAW,CAAX,CAAD,CAAJ,GAAsBH,IAAI,CAACE,GAAD,CAA1B;AACA,WAAOF,IAAI,CAACE,GAAD,CAAX;AACD;;AAED,SAAOF,IAAP;AACD",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
      "sourcesContent": [
        "import arg from 'arg'\n\nexport default function (options) {\n  const args = arg(options)\n\n  delete args._\n\n  for (const key in args) {\n    args[key.substr(2)] = args[key]\n    delete args[key]\n  }\n\n  return args\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554464996811
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mLog.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mLog.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mLog.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mLog.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
        "sourceFileName": "mLog.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mDump = mDump;\nexports.default = _default;\n\nvar _kleur = _interopRequireDefault(require(\"kleur\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _dumper = require(\"dumper.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction mDump(obj, andDie = false) {\n  if (typeof obj === 'function') {\n    obj = {\n      type: 'function',\n      name: obj.name\n    };\n  }\n\n  andDie ? (0, _dumper.dd)(obj) : (0, _dumper.dump)(obj);\n}\n\nfunction _default(str, how = 'white', withNewLine = true, withTimestamps = true) {\n  const available_colors = ['black', 'red', 'green', 'yellow', 'blue', 'magenta', 'cyan', 'white', 'gray'];\n  how = available_colors.includes(how) ? how : 'white';\n  let display = '';\n\n  if (withTimestamps) {\n    display += `${(0, _moment.default)().format()} :: `;\n  }\n\n  display = _kleur.default[how](`${display}${str}`);\n\n  if (withNewLine) {\n    console.log(display);\n  } else {\n    process.stdout.write(display);\n  }\n} // adding mDump do global scope on development to avoid import/from\n\n\nif (\"development\" === 'development') {\n  global.mDump = mDump;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1Mb2cuanMiXSwibmFtZXMiOlsibUR1bXAiLCJvYmoiLCJhbmREaWUiLCJ0eXBlIiwibmFtZSIsInN0ciIsImhvdyIsIndpdGhOZXdMaW5lIiwid2l0aFRpbWVzdGFtcHMiLCJhdmFpbGFibGVfY29sb3JzIiwiaW5jbHVkZXMiLCJkaXNwbGF5IiwiZm9ybWF0Iiwia2xldXIiLCJjb25zb2xlIiwibG9nIiwicHJvY2VzcyIsInN0ZG91dCIsIndyaXRlIiwiZ2xvYmFsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUNBOztBQUNBOztBQUVBOzs7O0FBRU8sU0FBU0EsS0FBVCxDQUFlQyxHQUFmLEVBQW9CQyxNQUFNLEdBQUcsS0FBN0IsRUFBb0M7QUFDekMsTUFBSSxPQUFPRCxHQUFQLEtBQWUsVUFBbkIsRUFBK0I7QUFDN0JBLElBQUFBLEdBQUcsR0FBRztBQUNKRSxNQUFBQSxJQUFJLEVBQUUsVUFERjtBQUVKQyxNQUFBQSxJQUFJLEVBQUVILEdBQUcsQ0FBQ0c7QUFGTixLQUFOO0FBSUQ7O0FBRURGLEVBQUFBLE1BQU0sR0FBRyxnQkFBR0QsR0FBSCxDQUFILEdBQWEsa0JBQUtBLEdBQUwsQ0FBbkI7QUFDRDs7QUFFYyxrQkFBVUksR0FBVixFQUFlQyxHQUFHLEdBQUcsT0FBckIsRUFBOEJDLFdBQVcsR0FBRyxJQUE1QyxFQUFrREMsY0FBYyxHQUFHLElBQW5FLEVBQXlFO0FBQ3RGLFFBQU1DLGdCQUFnQixHQUFHLENBQ3ZCLE9BRHVCLEVBRXZCLEtBRnVCLEVBR3ZCLE9BSHVCLEVBSXZCLFFBSnVCLEVBS3ZCLE1BTHVCLEVBTXZCLFNBTnVCLEVBT3ZCLE1BUHVCLEVBUXZCLE9BUnVCLEVBU3ZCLE1BVHVCLENBQXpCO0FBWUFILEVBQUFBLEdBQUcsR0FBR0csZ0JBQWdCLENBQUNDLFFBQWpCLENBQTBCSixHQUExQixJQUFpQ0EsR0FBakMsR0FBdUMsT0FBN0M7QUFFQSxNQUFJSyxPQUFPLEdBQUcsRUFBZDs7QUFDQSxNQUFJSCxjQUFKLEVBQW9CO0FBQ2xCRyxJQUFBQSxPQUFPLElBQUssR0FBRSx1QkFBU0MsTUFBVCxFQUFrQixNQUFoQztBQUNEOztBQUVERCxFQUFBQSxPQUFPLEdBQUdFLGVBQU1QLEdBQU4sRUFBWSxHQUFFSyxPQUFRLEdBQUVOLEdBQUksRUFBNUIsQ0FBVjs7QUFFQSxNQUFJRSxXQUFKLEVBQWlCO0FBQ2ZPLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSixPQUFaO0FBQ0QsR0FGRCxNQUVPO0FBQ0xLLElBQUFBLE9BQU8sQ0FBQ0MsTUFBUixDQUFlQyxLQUFmLENBQXFCUCxPQUFyQjtBQUNEO0FBQ0YsQyxDQUVEOzs7QUFDQSxJQUFJLGtCQUFhLGFBQWpCLEVBQWdDO0FBQzlCUSxFQUFBQSxNQUFNLENBQUNuQixLQUFQLEdBQWVBLEtBQWY7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvZWZyZWktcGFyaXMvRG9jdW1lbnRzL1Byb2pldHMtcGVyc28veGV1L3NlcnZlci91dGlscyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5PREVfRU5WIH0gZnJvbSAnQGVudidcbmltcG9ydCBrbGV1ciBmcm9tICdrbGV1cidcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50J1xuXG5pbXBvcnQgeyBkdW1wLCBkZCB9IGZyb20gJ2R1bXBlci5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIG1EdW1wKG9iaiwgYW5kRGllID0gZmFsc2UpIHtcbiAgaWYgKHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicpIHtcbiAgICBvYmogPSB7XG4gICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgbmFtZTogb2JqLm5hbWUsXG4gICAgfVxuICB9XG5cbiAgYW5kRGllID8gZGQob2JqKSA6IGR1bXAob2JqKVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoc3RyLCBob3cgPSAnd2hpdGUnLCB3aXRoTmV3TGluZSA9IHRydWUsIHdpdGhUaW1lc3RhbXBzID0gdHJ1ZSkge1xuICBjb25zdCBhdmFpbGFibGVfY29sb3JzID0gW1xuICAgICdibGFjaycsXG4gICAgJ3JlZCcsXG4gICAgJ2dyZWVuJyxcbiAgICAneWVsbG93JyxcbiAgICAnYmx1ZScsXG4gICAgJ21hZ2VudGEnLFxuICAgICdjeWFuJyxcbiAgICAnd2hpdGUnLFxuICAgICdncmF5JyxcbiAgXVxuXG4gIGhvdyA9IGF2YWlsYWJsZV9jb2xvcnMuaW5jbHVkZXMoaG93KSA/IGhvdyA6ICd3aGl0ZSdcblxuICBsZXQgZGlzcGxheSA9ICcnXG4gIGlmICh3aXRoVGltZXN0YW1wcykge1xuICAgIGRpc3BsYXkgKz0gYCR7bW9tZW50KCkuZm9ybWF0KCl9IDo6IGBcbiAgfVxuXG4gIGRpc3BsYXkgPSBrbGV1cltob3ddKGAke2Rpc3BsYXl9JHtzdHJ9YClcblxuICBpZiAod2l0aE5ld0xpbmUpIHtcbiAgICBjb25zb2xlLmxvZyhkaXNwbGF5KVxuICB9IGVsc2Uge1xuICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKGRpc3BsYXkpXG4gIH1cbn1cblxuLy8gYWRkaW5nIG1EdW1wIGRvIGdsb2JhbCBzY29wZSBvbiBkZXZlbG9wbWVudCB0byBhdm9pZCBpbXBvcnQvZnJvbVxuaWYgKE5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gIGdsb2JhbC5tRHVtcCA9IG1EdW1wXG59XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "mLog.js"
      ],
      "names": [
        "mDump",
        "obj",
        "andDie",
        "type",
        "name",
        "str",
        "how",
        "withNewLine",
        "withTimestamps",
        "available_colors",
        "includes",
        "display",
        "format",
        "kleur",
        "console",
        "log",
        "process",
        "stdout",
        "write",
        "global"
      ],
      "mappings": ";;;;;;;;AACA;;AACA;;AAEA;;;;AAEO,SAASA,KAAT,CAAeC,GAAf,EAAoBC,MAAM,GAAG,KAA7B,EAAoC;AACzC,MAAI,OAAOD,GAAP,KAAe,UAAnB,EAA+B;AAC7BA,IAAAA,GAAG,GAAG;AACJE,MAAAA,IAAI,EAAE,UADF;AAEJC,MAAAA,IAAI,EAAEH,GAAG,CAACG;AAFN,KAAN;AAID;;AAEDF,EAAAA,MAAM,GAAG,gBAAGD,GAAH,CAAH,GAAa,kBAAKA,GAAL,CAAnB;AACD;;AAEc,kBAAUI,GAAV,EAAeC,GAAG,GAAG,OAArB,EAA8BC,WAAW,GAAG,IAA5C,EAAkDC,cAAc,GAAG,IAAnE,EAAyE;AACtF,QAAMC,gBAAgB,GAAG,CACvB,OADuB,EAEvB,KAFuB,EAGvB,OAHuB,EAIvB,QAJuB,EAKvB,MALuB,EAMvB,SANuB,EAOvB,MAPuB,EAQvB,OARuB,EASvB,MATuB,CAAzB;AAYAH,EAAAA,GAAG,GAAGG,gBAAgB,CAACC,QAAjB,CAA0BJ,GAA1B,IAAiCA,GAAjC,GAAuC,OAA7C;AAEA,MAAIK,OAAO,GAAG,EAAd;;AACA,MAAIH,cAAJ,EAAoB;AAClBG,IAAAA,OAAO,IAAK,GAAE,uBAASC,MAAT,EAAkB,MAAhC;AACD;;AAEDD,EAAAA,OAAO,GAAGE,eAAMP,GAAN,EAAY,GAAEK,OAAQ,GAAEN,GAAI,EAA5B,CAAV;;AAEA,MAAIE,WAAJ,EAAiB;AACfO,IAAAA,OAAO,CAACC,GAAR,CAAYJ,OAAZ;AACD,GAFD,MAEO;AACLK,IAAAA,OAAO,CAACC,MAAR,CAAeC,KAAf,CAAqBP,OAArB;AACD;AACF,C,CAED;;;AACA,IAAI,kBAAa,aAAjB,EAAgC;AAC9BQ,EAAAA,MAAM,CAACnB,KAAP,GAAeA,KAAf;AACD",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
      "sourcesContent": [
        "import { NODE_ENV } from '@env'\nimport kleur from 'kleur'\nimport moment from 'moment'\n\nimport { dump, dd } from 'dumper.js'\n\nexport function mDump(obj, andDie = false) {\n  if (typeof obj === 'function') {\n    obj = {\n      type: 'function',\n      name: obj.name,\n    }\n  }\n\n  andDie ? dd(obj) : dump(obj)\n}\n\nexport default function (str, how = 'white', withNewLine = true, withTimestamps = true) {\n  const available_colors = [\n    'black',\n    'red',\n    'green',\n    'yellow',\n    'blue',\n    'magenta',\n    'cyan',\n    'white',\n    'gray',\n  ]\n\n  how = available_colors.includes(how) ? how : 'white'\n\n  let display = ''\n  if (withTimestamps) {\n    display += `${moment().format()} :: `\n  }\n\n  display = kleur[how](`${display}${str}`)\n\n  if (withNewLine) {\n    console.log(display)\n  } else {\n    process.stdout.write(display)\n  }\n}\n\n// adding mDump do global scope on development to avoid import/from\nif (NODE_ENV === 'development') {\n  global.mDump = mDump\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554464996811
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _auth = _interopRequireDefault(require(\"./auth\"));\n\nvar _secured = _interopRequireDefault(require(\"./secured\"));\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst API_BASE = 'http://data.fixer.io/api/latest?access_key=';\nconst DEFAULT_VALUE = 'EUR';\nconst API_FIXER = `${API_BASE}${\"1ebc87f464422af0b44036ffb35a4c24\"}`;\nconst api = (0, _express.Router)(); // a\\ health-check endpoint\n\napi.get('/', (req, res) => {\n  res.json({\n    api: 'xeu.Api',\n    meta: {\n      status: 'running',\n      version: 'v1.0'\n    }\n  });\n});\napi.get('/xeu', async (req, res) => {\n  const response = await _axios.default.get(`${API_FIXER}&base=${DEFAULT_VALUE}&symbols=USD,TND,GBP,JPY,BOB`);\n  res.json(response.data);\n}); // a\\ authentication\n\napi.use('/auth', _auth.default);\napi.use('/', _passport.default.authenticate('jwt', {\n  session: false\n}), _secured.default);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkFQSV9CQVNFIiwiREVGQVVMVF9WQUxVRSIsIkFQSV9GSVhFUiIsImFwaSIsImdldCIsInJlcSIsInJlcyIsImpzb24iLCJtZXRhIiwic3RhdHVzIiwidmVyc2lvbiIsInJlc3BvbnNlIiwiYXhpb3MiLCJkYXRhIiwidXNlIiwiYXV0aCIsInBhc3Nwb3J0IiwiYXV0aGVudGljYXRlIiwic2Vzc2lvbiIsInNlY3VyZWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUdBLE1BQU1BLFFBQVEsR0FBRyw2Q0FBakI7QUFDQSxNQUFNQyxhQUFhLEdBQUcsS0FBdEI7QUFDQSxNQUFNQyxTQUFTLEdBQUksR0FBRUYsUUFBUyxHQUFaLGtDQUFvQixFQUF0QztBQUVBLE1BQU1HLEdBQUcsR0FBRyxzQkFBWixDLENBRUE7O0FBQ0FBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUN6QkEsRUFBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVM7QUFDUEosSUFBQUEsR0FBRyxFQUFFLFNBREU7QUFFUEssSUFBQUEsSUFBSSxFQUFFO0FBQ0pDLE1BQUFBLE1BQU0sRUFBRSxTQURKO0FBRUpDLE1BQUFBLE9BQU8sRUFBRTtBQUZMO0FBRkMsR0FBVDtBQU9ELENBUkQ7QUFXQVAsR0FBRyxDQUFDQyxHQUFKLENBQVEsTUFBUixFQUFnQixPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDbEMsUUFBTUssUUFBUSxHQUFHLE1BQU1DLGVBQU1SLEdBQU4sQ0FBVyxHQUFFRixTQUFVLFNBQVFELGFBQWMsOEJBQTdDLENBQXZCO0FBQ0FLLEVBQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTSSxRQUFRLENBQUNFLElBQWxCO0FBQ0QsQ0FIRCxFLENBSUE7O0FBQ0FWLEdBQUcsQ0FBQ1csR0FBSixDQUFRLE9BQVIsRUFBaUJDLGFBQWpCO0FBQ0FaLEdBQUcsQ0FBQ1csR0FBSixDQUFRLEdBQVIsRUFBYUUsa0JBQVNDLFlBQVQsQ0FBc0IsS0FBdEIsRUFBNkI7QUFBRUMsRUFBQUEsT0FBTyxFQUFFO0FBQVgsQ0FBN0IsQ0FBYixFQUErREMsZ0JBQS9EO2VBS2VoQixHIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9lZnJlaS1wYXJpcy9Eb2N1bWVudHMvUHJvamV0cy1wZXJzby94ZXUvc2VydmVyL3JvdXRlcy9hcGkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJ1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gJ3Bhc3Nwb3J0J1xuaW1wb3J0IGF1dGggZnJvbSAnLi9hdXRoJ1xuaW1wb3J0IHNlY3VyZWQgZnJvbSAnLi9zZWN1cmVkJ1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJ1xuaW1wb3J0IHsgVE9LRU4gfSBmcm9tICdAZW52J1xuXG5jb25zdCBBUElfQkFTRSA9ICdodHRwOi8vZGF0YS5maXhlci5pby9hcGkvbGF0ZXN0P2FjY2Vzc19rZXk9JztcbmNvbnN0IERFRkFVTFRfVkFMVUUgPSAnRVVSJ1xuY29uc3QgQVBJX0ZJWEVSID0gYCR7QVBJX0JBU0V9JHtUT0tFTn1gO1xuXG5jb25zdCBhcGkgPSBSb3V0ZXIoKVxuXG4vLyBhXFwgaGVhbHRoLWNoZWNrIGVuZHBvaW50XG5hcGkuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5qc29uKHtcbiAgICBhcGk6ICd4ZXUuQXBpJyxcbiAgICBtZXRhOiB7XG4gICAgICBzdGF0dXM6ICdydW5uaW5nJyxcbiAgICAgIHZlcnNpb246ICd2MS4wJyxcbiAgICB9LFxuICB9KVxufSlcblxuXG5hcGkuZ2V0KCcveGV1JywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGAke0FQSV9GSVhFUn0mYmFzZT0ke0RFRkFVTFRfVkFMVUV9JnN5bWJvbHM9VVNELFRORCxHQlAsSlBZLEJPQmApXG4gIHJlcy5qc29uKHJlc3BvbnNlLmRhdGEpXG59KVxuLy8gYVxcIGF1dGhlbnRpY2F0aW9uXG5hcGkudXNlKCcvYXV0aCcsIGF1dGgpXG5hcGkudXNlKCcvJywgcGFzc3BvcnQuYXV0aGVudGljYXRlKCdqd3QnLCB7IHNlc3Npb246IGZhbHNlIH0pLCBzZWN1cmVkKVxuXG5cblxuXG5leHBvcnQgZGVmYXVsdCBhcGlcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "API_BASE",
        "DEFAULT_VALUE",
        "API_FIXER",
        "api",
        "get",
        "req",
        "res",
        "json",
        "meta",
        "status",
        "version",
        "response",
        "axios",
        "data",
        "use",
        "auth",
        "passport",
        "authenticate",
        "session",
        "secured"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AAGA,MAAMA,QAAQ,GAAG,6CAAjB;AACA,MAAMC,aAAa,GAAG,KAAtB;AACA,MAAMC,SAAS,GAAI,GAAEF,QAAS,GAAZ,kCAAoB,EAAtC;AAEA,MAAMG,GAAG,GAAG,sBAAZ,C,CAEA;;AACAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,EAAAA,GAAG,CAACC,IAAJ,CAAS;AACPJ,IAAAA,GAAG,EAAE,SADE;AAEPK,IAAAA,IAAI,EAAE;AACJC,MAAAA,MAAM,EAAE,SADJ;AAEJC,MAAAA,OAAO,EAAE;AAFL;AAFC,GAAT;AAOD,CARD;AAWAP,GAAG,CAACC,GAAJ,CAAQ,MAAR,EAAgB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAClC,QAAMK,QAAQ,GAAG,MAAMC,eAAMR,GAAN,CAAW,GAAEF,SAAU,SAAQD,aAAc,8BAA7C,CAAvB;AACAK,EAAAA,GAAG,CAACC,IAAJ,CAASI,QAAQ,CAACE,IAAlB;AACD,CAHD,E,CAIA;;AACAV,GAAG,CAACW,GAAJ,CAAQ,OAAR,EAAiBC,aAAjB;AACAZ,GAAG,CAACW,GAAJ,CAAQ,GAAR,EAAaE,kBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAAEC,EAAAA,OAAO,EAAE;AAAX,CAA7B,CAAb,EAA+DC,gBAA/D;eAKehB,G",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
      "sourcesContent": [
        "import { Router } from 'express'\nimport passport from 'passport'\nimport auth from './auth'\nimport secured from './secured'\nimport axios from 'axios'\nimport { TOKEN } from '@env'\n\nconst API_BASE = 'http://data.fixer.io/api/latest?access_key=';\nconst DEFAULT_VALUE = 'EUR'\nconst API_FIXER = `${API_BASE}${TOKEN}`;\n\nconst api = Router()\n\n// a\\ health-check endpoint\napi.get('/', (req, res) => {\n  res.json({\n    api: 'xeu.Api',\n    meta: {\n      status: 'running',\n      version: 'v1.0',\n    },\n  })\n})\n\n\napi.get('/xeu', async (req, res) => {\n  const response = await axios.get(`${API_FIXER}&base=${DEFAULT_VALUE}&symbols=USD,TND,GBP,JPY,BOB`)\n  res.json(response.data)\n})\n// a\\ authentication\napi.use('/auth', auth)\napi.use('/', passport.authenticate('jwt', { session: false }), secured)\n\n\n\n\nexport default api\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554464996808
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/auth.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/auth.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/auth.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
        "sourceFileName": "auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _response = require(\"../../helpers/response\");\n\nvar _api = require(\"../../constants/api\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import { addUserWorkspace } from 'services/storage'\nconst api = (0, _express.Router)();\n/** About Sign-up\n */\n\napi.post('/register', async (req, res) => {\n  const {\n    nickname,\n    email,\n    password,\n    password_confirmation\n  } = req.body;\n\n  try {\n    const user = new User({\n      nickname,\n      email,\n      password,\n      password_confirmation\n    });\n    await user.save();\n    addUserWorkspace(user.uuid).then(() => {\n      const payload = {\n        uuid: user.uuid,\n        nickname,\n        email\n      };\n\n      const token = _jsonwebtoken.default.sign(payload, \"*z)KP2L6IMdJ&geoZ,HfEn-zymAg84T1qrR;tXx9MH\");\n\n      const message = `\n        Hey ${user.nickname}!\n\n        Welcome to myS3 services \n      `;\n      Mail.send(user.email, 'Welcome', message, `<span>${message}</span>`);\n      res.status(201).json((0, _response.success)({\n        user\n      }, {\n        token\n      }));\n    });\n  } catch (err) {\n    res.status(400).json((0, _response.error)(_api.BAD_REQUEST, err.message));\n  }\n});\n/** About Login\n */\n\napi.post('/login', (req, res, next) => {\n  _passport.default.authenticate('local', {\n    session: false\n  }, (err, user) => {\n    if (err) {\n      return res.status(400).json((0, _response.error)(_api.BAD_REQUEST, err));\n    }\n\n    const {\n      uuid,\n      nickname,\n      email\n    } = user.toJSON(); // generate a signed json web token with the contents of user object and\n\n    const token = _jsonwebtoken.default.sign({\n      uuid,\n      nickname,\n      email\n    }, \"*z)KP2L6IMdJ&geoZ,HfEn-zymAg84T1qrR;tXx9MH\");\n\n    return res.json((0, _response.success)({\n      user\n    }, {\n      token\n    }));\n  })(req, res, next);\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiYXBpIiwicG9zdCIsInJlcSIsInJlcyIsIm5pY2tuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInBhc3N3b3JkX2NvbmZpcm1hdGlvbiIsImJvZHkiLCJ1c2VyIiwiVXNlciIsInNhdmUiLCJhZGRVc2VyV29ya3NwYWNlIiwidXVpZCIsInRoZW4iLCJwYXlsb2FkIiwidG9rZW4iLCJqd3QiLCJzaWduIiwibWVzc2FnZSIsIk1haWwiLCJzZW5kIiwic3RhdHVzIiwianNvbiIsImVyciIsIkJBRF9SRVFVRVNUIiwibmV4dCIsInBhc3Nwb3J0IiwiYXV0aGVudGljYXRlIiwic2Vzc2lvbiIsInRvSlNPTiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBOztBQUNBOztBQUNBOztBQUdBOztBQUNBOzs7O0FBRkE7QUFNQSxNQUFNQSxHQUFHLEdBQUcsc0JBQVo7QUFFQTs7O0FBRUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTLFdBQVQsRUFBc0IsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQ3hDLFFBQU07QUFDSkMsSUFBQUEsUUFESTtBQUNNQyxJQUFBQSxLQUROO0FBQ2FDLElBQUFBLFFBRGI7QUFDdUJDLElBQUFBO0FBRHZCLE1BRUZMLEdBQUcsQ0FBQ00sSUFGUjs7QUFLQSxNQUFJO0FBQ0YsVUFBTUMsSUFBSSxHQUFHLElBQUlDLElBQUosQ0FBUztBQUNwQk4sTUFBQUEsUUFEb0I7QUFFcEJDLE1BQUFBLEtBRm9CO0FBR3BCQyxNQUFBQSxRQUhvQjtBQUlwQkMsTUFBQUE7QUFKb0IsS0FBVCxDQUFiO0FBT0EsVUFBTUUsSUFBSSxDQUFDRSxJQUFMLEVBQU47QUFFQUMsSUFBQUEsZ0JBQWdCLENBQUNILElBQUksQ0FBQ0ksSUFBTixDQUFoQixDQUE0QkMsSUFBNUIsQ0FBaUMsTUFBTTtBQUNyQyxZQUFNQyxPQUFPLEdBQUc7QUFBRUYsUUFBQUEsSUFBSSxFQUFFSixJQUFJLENBQUNJLElBQWI7QUFBbUJULFFBQUFBLFFBQW5CO0FBQTZCQyxRQUFBQTtBQUE3QixPQUFoQjs7QUFDQSxZQUFNVyxLQUFLLEdBQUdDLHNCQUFJQyxJQUFKLENBQVNILE9BQVQsK0NBQWQ7O0FBRUEsWUFBTUksT0FBTyxHQUFJO2NBQ1RWLElBQUksQ0FBQ0wsUUFBUzs7O09BRHRCO0FBTUFnQixNQUFBQSxJQUFJLENBQUNDLElBQUwsQ0FBVVosSUFBSSxDQUFDSixLQUFmLEVBQXNCLFNBQXRCLEVBQWlDYyxPQUFqQyxFQUEyQyxTQUFRQSxPQUFRLFNBQTNEO0FBQ0FoQixNQUFBQSxHQUFHLENBQUNtQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsdUJBQVE7QUFBRWQsUUFBQUE7QUFBRixPQUFSLEVBQWtCO0FBQUVPLFFBQUFBO0FBQUYsT0FBbEIsQ0FBckI7QUFDRCxLQVpEO0FBYUQsR0F2QkQsQ0F1QkUsT0FBT1EsR0FBUCxFQUFZO0FBQ1pyQixJQUFBQSxHQUFHLENBQUNtQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIscUJBQU1FLGdCQUFOLEVBQW1CRCxHQUFHLENBQUNMLE9BQXZCLENBQXJCO0FBQ0Q7QUFDRixDQWhDRDtBQWtDQTs7O0FBRUFuQixHQUFHLENBQUNDLElBQUosQ0FBUyxRQUFULEVBQW1CLENBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFXdUIsSUFBWCxLQUFvQjtBQUNyQ0Msb0JBQVNDLFlBQVQsQ0FBc0IsT0FBdEIsRUFBK0I7QUFBRUMsSUFBQUEsT0FBTyxFQUFFO0FBQVgsR0FBL0IsRUFBbUQsQ0FBQ0wsR0FBRCxFQUFNZixJQUFOLEtBQWU7QUFDaEUsUUFBSWUsR0FBSixFQUFTO0FBQ1AsYUFBT3JCLEdBQUcsQ0FBQ21CLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixxQkFBTUUsZ0JBQU4sRUFBbUJELEdBQW5CLENBQXJCLENBQVA7QUFDRDs7QUFFRCxVQUFNO0FBQUVYLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsUUFBNEJJLElBQUksQ0FBQ3FCLE1BQUwsRUFBbEMsQ0FMZ0UsQ0FPaEU7O0FBQ0EsVUFBTWQsS0FBSyxHQUFHQyxzQkFBSUMsSUFBSixDQUFTO0FBQUVMLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsS0FBVCwrQ0FBZDs7QUFFQSxXQUFPRixHQUFHLENBQUNvQixJQUFKLENBQVMsdUJBQVE7QUFBRWQsTUFBQUE7QUFBRixLQUFSLEVBQWtCO0FBQUVPLE1BQUFBO0FBQUYsS0FBbEIsQ0FBVCxDQUFQO0FBQ0QsR0FYRCxFQVdHZCxHQVhILEVBV1FDLEdBWFIsRUFXYXVCLElBWGI7QUFZRCxDQWJEO2VBZWUxQixHIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9lZnJlaS1wYXJpcy9Eb2N1bWVudHMvUHJvamV0cy1wZXJzby94ZXUvc2VydmVyL3JvdXRlcy9hcGkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBKV1RfRU5DUllQVElPTiB9IGZyb20gJ0BlbnYnXG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJ1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nXG5pbXBvcnQgcGFzc3BvcnQgZnJvbSAncGFzc3BvcnQnXG5cbi8vIGltcG9ydCB7IGFkZFVzZXJXb3Jrc3BhY2UgfSBmcm9tICdzZXJ2aWNlcy9zdG9yYWdlJ1xuaW1wb3J0IHsgc3VjY2VzcywgZXJyb3IgfSBmcm9tICdoZWxwZXJzL3Jlc3BvbnNlJ1xuaW1wb3J0IHsgQkFEX1JFUVVFU1QgfSBmcm9tICdjb25zdGFudHMvYXBpJ1xuXG5cblxuY29uc3QgYXBpID0gUm91dGVyKClcblxuLyoqIEFib3V0IFNpZ24tdXBcbiAqL1xuYXBpLnBvc3QoJy9yZWdpc3RlcicsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7XG4gICAgbmlja25hbWUsIGVtYWlsLCBwYXNzd29yZCwgcGFzc3dvcmRfY29uZmlybWF0aW9uLFxuICB9ID0gcmVxLmJvZHlcblxuXG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHtcbiAgICAgIG5pY2tuYW1lLFxuICAgICAgZW1haWwsXG4gICAgICBwYXNzd29yZCxcbiAgICAgIHBhc3N3b3JkX2NvbmZpcm1hdGlvbixcbiAgICB9KVxuXG4gICAgYXdhaXQgdXNlci5zYXZlKClcblxuICAgIGFkZFVzZXJXb3Jrc3BhY2UodXNlci51dWlkKS50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IHBheWxvYWQgPSB7IHV1aWQ6IHVzZXIudXVpZCwgbmlja25hbWUsIGVtYWlsIH1cbiAgICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24ocGF5bG9hZCwgSldUX0VOQ1JZUFRJT04pXG5cbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgXG4gICAgICAgIEhleSAke3VzZXIubmlja25hbWV9IVxuXG4gICAgICAgIFdlbGNvbWUgdG8gbXlTMyBzZXJ2aWNlcyDwn5iOXG4gICAgICBgXG5cbiAgICAgIE1haWwuc2VuZCh1c2VyLmVtYWlsLCAnV2VsY29tZScsIG1lc3NhZ2UsIGA8c3Bhbj4ke21lc3NhZ2V9PC9zcGFuPmApXG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbihzdWNjZXNzKHsgdXNlciB9LCB7IHRva2VuIH0pKVxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKGVycm9yKEJBRF9SRVFVRVNULCBlcnIubWVzc2FnZSkpXG4gIH1cbn0pXG5cbi8qKiBBYm91dCBMb2dpblxuICovXG5hcGkucG9zdCgnL2xvZ2luJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZSgnbG9jYWwnLCB7IHNlc3Npb246IGZhbHNlIH0sIChlcnIsIHVzZXIpID0+IHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oZXJyb3IoQkFEX1JFUVVFU1QsIGVycikpXG4gICAgfVxuXG4gICAgY29uc3QgeyB1dWlkLCBuaWNrbmFtZSwgZW1haWwgfSA9IHVzZXIudG9KU09OKClcblxuICAgIC8vIGdlbmVyYXRlIGEgc2lnbmVkIGpzb24gd2ViIHRva2VuIHdpdGggdGhlIGNvbnRlbnRzIG9mIHVzZXIgb2JqZWN0IGFuZFxuICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyB1dWlkLCBuaWNrbmFtZSwgZW1haWwgfSwgSldUX0VOQ1JZUFRJT04pXG5cbiAgICByZXR1cm4gcmVzLmpzb24oc3VjY2Vzcyh7IHVzZXIgfSwgeyB0b2tlbiB9KSlcbiAgfSkocmVxLCByZXMsIG5leHQpXG59KVxuXG5leHBvcnQgZGVmYXVsdCBhcGlcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "api",
        "post",
        "req",
        "res",
        "nickname",
        "email",
        "password",
        "password_confirmation",
        "body",
        "user",
        "User",
        "save",
        "addUserWorkspace",
        "uuid",
        "then",
        "payload",
        "token",
        "jwt",
        "sign",
        "message",
        "Mail",
        "send",
        "status",
        "json",
        "err",
        "BAD_REQUEST",
        "next",
        "passport",
        "authenticate",
        "session",
        "toJSON"
      ],
      "mappings": ";;;;;;;AACA;;AACA;;AACA;;AAGA;;AACA;;;;AAFA;AAMA,MAAMA,GAAG,GAAG,sBAAZ;AAEA;;;AAEAA,GAAG,CAACC,IAAJ,CAAS,WAAT,EAAsB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACxC,QAAM;AACJC,IAAAA,QADI;AACMC,IAAAA,KADN;AACaC,IAAAA,QADb;AACuBC,IAAAA;AADvB,MAEFL,GAAG,CAACM,IAFR;;AAKA,MAAI;AACF,UAAMC,IAAI,GAAG,IAAIC,IAAJ,CAAS;AACpBN,MAAAA,QADoB;AAEpBC,MAAAA,KAFoB;AAGpBC,MAAAA,QAHoB;AAIpBC,MAAAA;AAJoB,KAAT,CAAb;AAOA,UAAME,IAAI,CAACE,IAAL,EAAN;AAEAC,IAAAA,gBAAgB,CAACH,IAAI,CAACI,IAAN,CAAhB,CAA4BC,IAA5B,CAAiC,MAAM;AACrC,YAAMC,OAAO,GAAG;AAAEF,QAAAA,IAAI,EAAEJ,IAAI,CAACI,IAAb;AAAmBT,QAAAA,QAAnB;AAA6BC,QAAAA;AAA7B,OAAhB;;AACA,YAAMW,KAAK,GAAGC,sBAAIC,IAAJ,CAASH,OAAT,+CAAd;;AAEA,YAAMI,OAAO,GAAI;cACTV,IAAI,CAACL,QAAS;;;OADtB;AAMAgB,MAAAA,IAAI,CAACC,IAAL,CAAUZ,IAAI,CAACJ,KAAf,EAAsB,SAAtB,EAAiCc,OAAjC,EAA2C,SAAQA,OAAQ,SAA3D;AACAhB,MAAAA,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,uBAAQ;AAAEd,QAAAA;AAAF,OAAR,EAAkB;AAAEO,QAAAA;AAAF,OAAlB,CAArB;AACD,KAZD;AAaD,GAvBD,CAuBE,OAAOQ,GAAP,EAAY;AACZrB,IAAAA,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,qBAAME,gBAAN,EAAmBD,GAAG,CAACL,OAAvB,CAArB;AACD;AACF,CAhCD;AAkCA;;;AAEAnB,GAAG,CAACC,IAAJ,CAAS,QAAT,EAAmB,CAACC,GAAD,EAAMC,GAAN,EAAWuB,IAAX,KAAoB;AACrCC,oBAASC,YAAT,CAAsB,OAAtB,EAA+B;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAA/B,EAAmD,CAACL,GAAD,EAAMf,IAAN,KAAe;AAChE,QAAIe,GAAJ,EAAS;AACP,aAAOrB,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,qBAAME,gBAAN,EAAmBD,GAAnB,CAArB,CAAP;AACD;;AAED,UAAM;AAAEX,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,QAA4BI,IAAI,CAACqB,MAAL,EAAlC,CALgE,CAOhE;;AACA,UAAMd,KAAK,GAAGC,sBAAIC,IAAJ,CAAS;AAAEL,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,KAAT,+CAAd;;AAEA,WAAOF,GAAG,CAACoB,IAAJ,CAAS,uBAAQ;AAAEd,MAAAA;AAAF,KAAR,EAAkB;AAAEO,MAAAA;AAAF,KAAlB,CAAT,CAAP;AACD,GAXD,EAWGd,GAXH,EAWQC,GAXR,EAWauB,IAXb;AAYD,CAbD;eAee1B,G",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
      "sourcesContent": [
        "import { JWT_ENCRYPTION } from '@env'\nimport { Router } from 'express'\nimport jwt from 'jsonwebtoken'\nimport passport from 'passport'\n\n// import { addUserWorkspace } from 'services/storage'\nimport { success, error } from 'helpers/response'\nimport { BAD_REQUEST } from 'constants/api'\n\n\n\nconst api = Router()\n\n/** About Sign-up\n */\napi.post('/register', async (req, res) => {\n  const {\n    nickname, email, password, password_confirmation,\n  } = req.body\n\n\n  try {\n    const user = new User({\n      nickname,\n      email,\n      password,\n      password_confirmation,\n    })\n\n    await user.save()\n\n    addUserWorkspace(user.uuid).then(() => {\n      const payload = { uuid: user.uuid, nickname, email }\n      const token = jwt.sign(payload, JWT_ENCRYPTION)\n\n      const message = `\n        Hey ${user.nickname}!\n\n        Welcome to myS3 services \n      `\n\n      Mail.send(user.email, 'Welcome', message, `<span>${message}</span>`)\n      res.status(201).json(success({ user }, { token }))\n    })\n  } catch (err) {\n    res.status(400).json(error(BAD_REQUEST, err.message))\n  }\n})\n\n/** About Login\n */\napi.post('/login', (req, res, next) => {\n  passport.authenticate('local', { session: false }, (err, user) => {\n    if (err) {\n      return res.status(400).json(error(BAD_REQUEST, err))\n    }\n\n    const { uuid, nickname, email } = user.toJSON()\n\n    // generate a signed json web token with the contents of user object and\n    const token = jwt.sign({ uuid, nickname, email }, JWT_ENCRYPTION)\n\n    return res.json(success({ user }, { token }))\n  })(req, res, next)\n})\n\nexport default api\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554464996807
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/server.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/server.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/server.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/server.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
        "sourceFileName": "server.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _os = _interopRequireDefault(require(\"os\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _mArg = _interopRequireDefault(require(\"./utils/mArg\"));\n\nvar _mLog = _interopRequireDefault(require(\"./utils/mLog\"));\n\nvar _api = _interopRequireDefault(require(\"./routes/api\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import './middleware/passport'\n// import { initialize } from './libs/services/storage'\n// Entry point function\nconst start = async () => {\n  try {\n    const args = (0, _mArg.default)({\n      '--port': Number,\n      // aliases\n      '-p': '--port'\n    }); // Setting the application port depending to environment\n\n    const networkInterfaces = _os.default.networkInterfaces();\n\n    const host = networkInterfaces.lo0[0].address || HOST;\n    const port = args.port || \"3000\"; // database synchronization ...\n    // await database.authenticate()\n\n    (0, _mLog.default)('Connected to SQL database!', 'green');\n\n    if (\"development\" === 'development') {\n      (0, _mLog.default)('Synchronizing database!'); // creates tables from models\n      // database.sync({\n      //   force: false,\n      //   logging(str) {\n      //     mLog(str, 'magenta')\n      //   },\n      // })\n    } // initialize filesystem stuff\n    // await initialize()\n    // instantiate express application\n\n\n    const app = (0, _express.default)(); // authentication middleware\n    // app.use(passport.initialize())\n    // body data en+decoding\n\n    app.use(_bodyParser.default.urlencoded());\n    app.use(_bodyParser.default.json());\n    app.use((0, _cors.default)());\n    app.use((req, res, next) => {\n      // version the media type and extend the language for api versionning\n      res.setHeader('Accept', 'application/vnd.upload.island.v1+json'); // website we wish to allow to connect\n\n      res.setHeader('Access-Control-Allow-Origin', '*'); // request methods we wish to allow\n\n      res.setHeader('Access-Control-Allow-Methods', 'GET, POST, OPTIONS, PUT, PATCH, DELETE'); // request headers we wish to allow\n\n      res.setHeader('Access-Control-Allow-Headers', 'X-Requested-With, Accept, Authorization, Content-Type'); // set to true if we need the website to include cookies in the requests sent\n      // to the API (e.g. in case we use sessions)\n\n      res.setHeader('Access-Control-Allow-Credentials', true); // pass to next layer of middleware\n\n      next();\n    });\n    app.get('/', (req, res) => {\n      res.send(`Please feel free to use our api in ${host}:${port}/api`);\n    }); // About routes definition\n\n    app.use('/api', _api.default); // Catching 404 error and forwarding to error handler\n\n    app.use((req, res, next) => {\n      const err = new Error('Routes not found');\n      err.status = 404;\n      next(err);\n    }); // error handler\n\n    app.use((err, req, res) => {\n      res.status(err.status || 500).json({\n        err: err.message\n      });\n    }); // ... and finally server listening\n\n    app.listen(port, err => {\n      if (err) throw err;\n      (0, _mLog.default)(`Server is running on port ${port}`);\n    });\n  } catch (err) {\n    (0, _mLog.default)(err, 'red');\n    process.exit(42);\n  }\n}; // Let's Rock!\n\n\nstart();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJzdGFydCIsImFyZ3MiLCJOdW1iZXIiLCJuZXR3b3JrSW50ZXJmYWNlcyIsIm9zIiwiaG9zdCIsImxvMCIsImFkZHJlc3MiLCJIT1NUIiwicG9ydCIsImFwcCIsInVzZSIsImJvZHlQYXJzZXIiLCJ1cmxlbmNvZGVkIiwianNvbiIsInJlcSIsInJlcyIsIm5leHQiLCJzZXRIZWFkZXIiLCJnZXQiLCJzZW5kIiwiYXBpIiwiZXJyIiwiRXJyb3IiLCJzdGF0dXMiLCJtZXNzYWdlIiwibGlzdGVuIiwicHJvY2VzcyIsImV4aXQiXSwibWFwcGluZ3MiOiI7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBRUE7Ozs7QUFFQTtBQUNBO0FBRUE7QUFDQSxNQUFNQSxLQUFLLEdBQUcsWUFBWTtBQUN4QixNQUFJO0FBQ0YsVUFBTUMsSUFBSSxHQUFHLG1CQUFLO0FBQ2hCLGdCQUFVQyxNQURNO0FBR2hCO0FBQ0EsWUFBTTtBQUpVLEtBQUwsQ0FBYixDQURFLENBUUY7O0FBQ0EsVUFBTUMsaUJBQWlCLEdBQUdDLFlBQUdELGlCQUFILEVBQTFCOztBQUVBLFVBQU1FLElBQUksR0FBR0YsaUJBQWlCLENBQUNHLEdBQWxCLENBQXNCLENBQXRCLEVBQXlCQyxPQUF6QixJQUFvQ0MsSUFBakQ7QUFDQSxVQUFNQyxJQUFJLEdBQUdSLElBQUksQ0FBQ1EsSUFBTCxVQUFiLENBWkUsQ0FhRjtBQUNBOztBQUVBLHVCQUFLLDRCQUFMLEVBQW1DLE9BQW5DOztBQUVBLFFBQUksa0JBQWEsYUFBakIsRUFBZ0M7QUFDOUIseUJBQUsseUJBQUwsRUFEOEIsQ0FFOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRCxLQTNCQyxDQTZCRjtBQUNBO0FBRUE7OztBQUNBLFVBQU1DLEdBQUcsR0FBRyx1QkFBWixDQWpDRSxDQW1DRjtBQUNBO0FBRUE7O0FBQ0FBLElBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRQyxvQkFBV0MsVUFBWCxFQUFSO0FBQ0FILElBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRQyxvQkFBV0UsSUFBWCxFQUFSO0FBQ0FKLElBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLG9CQUFSO0FBRUFELElBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLENBQUNJLEdBQUQsRUFBTUMsR0FBTixFQUFXQyxJQUFYLEtBQW9CO0FBQzFCO0FBQ0FELE1BQUFBLEdBQUcsQ0FBQ0UsU0FBSixDQUFjLFFBQWQsRUFBd0IsdUNBQXhCLEVBRjBCLENBSTFCOztBQUNBRixNQUFBQSxHQUFHLENBQUNFLFNBQUosQ0FBYyw2QkFBZCxFQUE2QyxHQUE3QyxFQUwwQixDQU8xQjs7QUFDQUYsTUFBQUEsR0FBRyxDQUFDRSxTQUFKLENBQWMsOEJBQWQsRUFBOEMsd0NBQTlDLEVBUjBCLENBVTFCOztBQUNBRixNQUFBQSxHQUFHLENBQUNFLFNBQUosQ0FDRSw4QkFERixFQUVFLHVEQUZGLEVBWDBCLENBZ0IxQjtBQUNBOztBQUNBRixNQUFBQSxHQUFHLENBQUNFLFNBQUosQ0FBYyxrQ0FBZCxFQUFrRCxJQUFsRCxFQWxCMEIsQ0FvQjFCOztBQUNBRCxNQUFBQSxJQUFJO0FBQ0wsS0F0QkQ7QUF3QkFQLElBQUFBLEdBQUcsQ0FBQ1MsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDSixHQUFELEVBQU1DLEdBQU4sS0FBYztBQUN6QkEsTUFBQUEsR0FBRyxDQUFDSSxJQUFKLENBQVUsc0NBQXFDZixJQUFLLElBQUdJLElBQUssTUFBNUQ7QUFDRCxLQUZELEVBbkVFLENBdUVGOztBQUNBQyxJQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBUSxNQUFSLEVBQWdCVSxZQUFoQixFQXhFRSxDQTBFRjs7QUFDQVgsSUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsQ0FBQ0ksR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsS0FBb0I7QUFDMUIsWUFBTUssR0FBRyxHQUFHLElBQUlDLEtBQUosQ0FBVSxrQkFBVixDQUFaO0FBQ0FELE1BQUFBLEdBQUcsQ0FBQ0UsTUFBSixHQUFhLEdBQWI7QUFDQVAsTUFBQUEsSUFBSSxDQUFDSyxHQUFELENBQUo7QUFDRCxLQUpELEVBM0VFLENBaUZGOztBQUNBWixJQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBUSxDQUFDVyxHQUFELEVBQU1QLEdBQU4sRUFBV0MsR0FBWCxLQUFtQjtBQUN6QkEsTUFBQUEsR0FBRyxDQUFDUSxNQUFKLENBQVdGLEdBQUcsQ0FBQ0UsTUFBSixJQUFjLEdBQXpCLEVBQThCVixJQUE5QixDQUFtQztBQUFFUSxRQUFBQSxHQUFHLEVBQUVBLEdBQUcsQ0FBQ0c7QUFBWCxPQUFuQztBQUNELEtBRkQsRUFsRkUsQ0FzRkY7O0FBQ0FmLElBQUFBLEdBQUcsQ0FBQ2dCLE1BQUosQ0FBV2pCLElBQVgsRUFBa0JhLEdBQUQsSUFBUztBQUN4QixVQUFJQSxHQUFKLEVBQVMsTUFBTUEsR0FBTjtBQUVULHlCQUFNLDZCQUE0QmIsSUFBSyxFQUF2QztBQUNELEtBSkQ7QUFLRCxHQTVGRCxDQTRGRSxPQUFPYSxHQUFQLEVBQVk7QUFDWix1QkFBS0EsR0FBTCxFQUFVLEtBQVY7QUFDQUssSUFBQUEsT0FBTyxDQUFDQyxJQUFSLENBQWEsRUFBYjtBQUNEO0FBQ0YsQ0FqR0QsQyxDQW1HQTs7O0FBQ0E1QixLQUFLIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9lZnJlaS1wYXJpcy9Eb2N1bWVudHMvUHJvamV0cy1wZXJzby94ZXUvc2VydmVyIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTk9ERV9FTlYsIFBPUlQgfSBmcm9tICdAZW52J1xuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcydcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJ1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gJ3Bhc3Nwb3J0J1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycydcblxuaW1wb3J0IG9zIGZyb20gJ29zJ1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcblxuaW1wb3J0IG1BcmcgZnJvbSAnLi91dGlscy9tQXJnJ1xuaW1wb3J0IG1Mb2cgZnJvbSAnLi91dGlscy9tTG9nJ1xuXG5pbXBvcnQgYXBpIGZyb20gJy4vcm91dGVzL2FwaSdcblxuLy8gaW1wb3J0ICcuL21pZGRsZXdhcmUvcGFzc3BvcnQnXG4vLyBpbXBvcnQgeyBpbml0aWFsaXplIH0gZnJvbSAnLi9saWJzL3NlcnZpY2VzL3N0b3JhZ2UnXG5cbi8vIEVudHJ5IHBvaW50IGZ1bmN0aW9uXG5jb25zdCBzdGFydCA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhcmdzID0gbUFyZyh7XG4gICAgICAnLS1wb3J0JzogTnVtYmVyLFxuXG4gICAgICAvLyBhbGlhc2VzXG4gICAgICAnLXAnOiAnLS1wb3J0JyxcbiAgICB9KVxuXG4gICAgLy8gU2V0dGluZyB0aGUgYXBwbGljYXRpb24gcG9ydCBkZXBlbmRpbmcgdG8gZW52aXJvbm1lbnRcbiAgICBjb25zdCBuZXR3b3JrSW50ZXJmYWNlcyA9IG9zLm5ldHdvcmtJbnRlcmZhY2VzKClcblxuICAgIGNvbnN0IGhvc3QgPSBuZXR3b3JrSW50ZXJmYWNlcy5sbzBbMF0uYWRkcmVzcyB8fCBIT1NUXG4gICAgY29uc3QgcG9ydCA9IGFyZ3MucG9ydCB8fCBQT1JUXG4gICAgLy8gZGF0YWJhc2Ugc3luY2hyb25pemF0aW9uIC4uLlxuICAgIC8vIGF3YWl0IGRhdGFiYXNlLmF1dGhlbnRpY2F0ZSgpXG5cbiAgICBtTG9nKCdDb25uZWN0ZWQgdG8gU1FMIGRhdGFiYXNlIScsICdncmVlbicpXG5cbiAgICBpZiAoTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgIG1Mb2coJ1N5bmNocm9uaXppbmcgZGF0YWJhc2UhJylcbiAgICAgIC8vIGNyZWF0ZXMgdGFibGVzIGZyb20gbW9kZWxzXG4gICAgICAvLyBkYXRhYmFzZS5zeW5jKHtcbiAgICAgIC8vICAgZm9yY2U6IGZhbHNlLFxuICAgICAgLy8gICBsb2dnaW5nKHN0cikge1xuICAgICAgLy8gICAgIG1Mb2coc3RyLCAnbWFnZW50YScpXG4gICAgICAvLyAgIH0sXG4gICAgICAvLyB9KVxuICAgIH1cblxuICAgIC8vIGluaXRpYWxpemUgZmlsZXN5c3RlbSBzdHVmZlxuICAgIC8vIGF3YWl0IGluaXRpYWxpemUoKVxuXG4gICAgLy8gaW5zdGFudGlhdGUgZXhwcmVzcyBhcHBsaWNhdGlvblxuICAgIGNvbnN0IGFwcCA9IGV4cHJlc3MoKVxuXG4gICAgLy8gYXV0aGVudGljYXRpb24gbWlkZGxld2FyZVxuICAgIC8vIGFwcC51c2UocGFzc3BvcnQuaW5pdGlhbGl6ZSgpKVxuXG4gICAgLy8gYm9keSBkYXRhIGVuK2RlY29kaW5nXG4gICAgYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoKSlcbiAgICBhcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKVxuICAgIGFwcC51c2UoY29ycygpKVxuXG4gICAgYXBwLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgIC8vIHZlcnNpb24gdGhlIG1lZGlhIHR5cGUgYW5kIGV4dGVuZCB0aGUgbGFuZ3VhZ2UgZm9yIGFwaSB2ZXJzaW9ubmluZ1xuICAgICAgcmVzLnNldEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL3ZuZC51cGxvYWQuaXNsYW5kLnYxK2pzb24nKVxuXG4gICAgICAvLyB3ZWJzaXRlIHdlIHdpc2ggdG8gYWxsb3cgdG8gY29ubmVjdFxuICAgICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJyonKVxuXG4gICAgICAvLyByZXF1ZXN0IG1ldGhvZHMgd2Ugd2lzaCB0byBhbGxvd1xuICAgICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsIFBPU1QsIE9QVElPTlMsIFBVVCwgUEFUQ0gsIERFTEVURScpXG5cbiAgICAgIC8vIHJlcXVlc3QgaGVhZGVycyB3ZSB3aXNoIHRvIGFsbG93XG4gICAgICByZXMuc2V0SGVhZGVyKFxuICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsXG4gICAgICAgICdYLVJlcXVlc3RlZC1XaXRoLCBBY2NlcHQsIEF1dGhvcml6YXRpb24sIENvbnRlbnQtVHlwZScsXG4gICAgICApXG5cbiAgICAgIC8vIHNldCB0byB0cnVlIGlmIHdlIG5lZWQgdGhlIHdlYnNpdGUgdG8gaW5jbHVkZSBjb29raWVzIGluIHRoZSByZXF1ZXN0cyBzZW50XG4gICAgICAvLyB0byB0aGUgQVBJIChlLmcuIGluIGNhc2Ugd2UgdXNlIHNlc3Npb25zKVxuICAgICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCB0cnVlKVxuXG4gICAgICAvLyBwYXNzIHRvIG5leHQgbGF5ZXIgb2YgbWlkZGxld2FyZVxuICAgICAgbmV4dCgpXG4gICAgfSlcblxuICAgIGFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcbiAgICAgIHJlcy5zZW5kKGBQbGVhc2UgZmVlbCBmcmVlIHRvIHVzZSBvdXIgYXBpIGluICR7aG9zdH06JHtwb3J0fS9hcGlgKVxuICAgIH0pXG5cbiAgICAvLyBBYm91dCByb3V0ZXMgZGVmaW5pdGlvblxuICAgIGFwcC51c2UoJy9hcGknLCBhcGkpXG5cbiAgICAvLyBDYXRjaGluZyA0MDQgZXJyb3IgYW5kIGZvcndhcmRpbmcgdG8gZXJyb3IgaGFuZGxlclxuICAgIGFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoJ1JvdXRlcyBub3QgZm91bmQnKVxuICAgICAgZXJyLnN0YXR1cyA9IDQwNFxuICAgICAgbmV4dChlcnIpXG4gICAgfSlcblxuICAgIC8vIGVycm9yIGhhbmRsZXJcbiAgICBhcHAudXNlKChlcnIsIHJlcSwgcmVzKSA9PiB7XG4gICAgICByZXMuc3RhdHVzKGVyci5zdGF0dXMgfHwgNTAwKS5qc29uKHsgZXJyOiBlcnIubWVzc2FnZSB9KVxuICAgIH0pXG5cbiAgICAvLyAuLi4gYW5kIGZpbmFsbHkgc2VydmVyIGxpc3RlbmluZ1xuICAgIGFwcC5saXN0ZW4ocG9ydCwgKGVycikgPT4ge1xuICAgICAgaWYgKGVycikgdGhyb3cgZXJyXG5cbiAgICAgIG1Mb2coYFNlcnZlciBpcyBydW5uaW5nIG9uIHBvcnQgJHtwb3J0fWApXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbUxvZyhlcnIsICdyZWQnKVxuICAgIHByb2Nlc3MuZXhpdCg0MilcbiAgfVxufVxuXG4vLyBMZXQncyBSb2NrIVxuc3RhcnQoKVxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "server.js"
      ],
      "names": [
        "start",
        "args",
        "Number",
        "networkInterfaces",
        "os",
        "host",
        "lo0",
        "address",
        "HOST",
        "port",
        "app",
        "use",
        "bodyParser",
        "urlencoded",
        "json",
        "req",
        "res",
        "next",
        "setHeader",
        "get",
        "send",
        "api",
        "err",
        "Error",
        "status",
        "message",
        "listen",
        "process",
        "exit"
      ],
      "mappings": ";;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AAEA;;AACA;;AAEA;;;;AAEA;AACA;AAEA;AACA,MAAMA,KAAK,GAAG,YAAY;AACxB,MAAI;AACF,UAAMC,IAAI,GAAG,mBAAK;AAChB,gBAAUC,MADM;AAGhB;AACA,YAAM;AAJU,KAAL,CAAb,CADE,CAQF;;AACA,UAAMC,iBAAiB,GAAGC,YAAGD,iBAAH,EAA1B;;AAEA,UAAME,IAAI,GAAGF,iBAAiB,CAACG,GAAlB,CAAsB,CAAtB,EAAyBC,OAAzB,IAAoCC,IAAjD;AACA,UAAMC,IAAI,GAAGR,IAAI,CAACQ,IAAL,UAAb,CAZE,CAaF;AACA;;AAEA,uBAAK,4BAAL,EAAmC,OAAnC;;AAEA,QAAI,kBAAa,aAAjB,EAAgC;AAC9B,yBAAK,yBAAL,EAD8B,CAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACD,KA3BC,CA6BF;AACA;AAEA;;;AACA,UAAMC,GAAG,GAAG,uBAAZ,CAjCE,CAmCF;AACA;AAEA;;AACAA,IAAAA,GAAG,CAACC,GAAJ,CAAQC,oBAAWC,UAAX,EAAR;AACAH,IAAAA,GAAG,CAACC,GAAJ,CAAQC,oBAAWE,IAAX,EAAR;AACAJ,IAAAA,GAAG,CAACC,GAAJ,CAAQ,oBAAR;AAEAD,IAAAA,GAAG,CAACC,GAAJ,CAAQ,CAACI,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC1B;AACAD,MAAAA,GAAG,CAACE,SAAJ,CAAc,QAAd,EAAwB,uCAAxB,EAF0B,CAI1B;;AACAF,MAAAA,GAAG,CAACE,SAAJ,CAAc,6BAAd,EAA6C,GAA7C,EAL0B,CAO1B;;AACAF,MAAAA,GAAG,CAACE,SAAJ,CAAc,8BAAd,EAA8C,wCAA9C,EAR0B,CAU1B;;AACAF,MAAAA,GAAG,CAACE,SAAJ,CACE,8BADF,EAEE,uDAFF,EAX0B,CAgB1B;AACA;;AACAF,MAAAA,GAAG,CAACE,SAAJ,CAAc,kCAAd,EAAkD,IAAlD,EAlB0B,CAoB1B;;AACAD,MAAAA,IAAI;AACL,KAtBD;AAwBAP,IAAAA,GAAG,CAACS,GAAJ,CAAQ,GAAR,EAAa,CAACJ,GAAD,EAAMC,GAAN,KAAc;AACzBA,MAAAA,GAAG,CAACI,IAAJ,CAAU,sCAAqCf,IAAK,IAAGI,IAAK,MAA5D;AACD,KAFD,EAnEE,CAuEF;;AACAC,IAAAA,GAAG,CAACC,GAAJ,CAAQ,MAAR,EAAgBU,YAAhB,EAxEE,CA0EF;;AACAX,IAAAA,GAAG,CAACC,GAAJ,CAAQ,CAACI,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC1B,YAAMK,GAAG,GAAG,IAAIC,KAAJ,CAAU,kBAAV,CAAZ;AACAD,MAAAA,GAAG,CAACE,MAAJ,GAAa,GAAb;AACAP,MAAAA,IAAI,CAACK,GAAD,CAAJ;AACD,KAJD,EA3EE,CAiFF;;AACAZ,IAAAA,GAAG,CAACC,GAAJ,CAAQ,CAACW,GAAD,EAAMP,GAAN,EAAWC,GAAX,KAAmB;AACzBA,MAAAA,GAAG,CAACQ,MAAJ,CAAWF,GAAG,CAACE,MAAJ,IAAc,GAAzB,EAA8BV,IAA9B,CAAmC;AAAEQ,QAAAA,GAAG,EAAEA,GAAG,CAACG;AAAX,OAAnC;AACD,KAFD,EAlFE,CAsFF;;AACAf,IAAAA,GAAG,CAACgB,MAAJ,CAAWjB,IAAX,EAAkBa,GAAD,IAAS;AACxB,UAAIA,GAAJ,EAAS,MAAMA,GAAN;AAET,yBAAM,6BAA4Bb,IAAK,EAAvC;AACD,KAJD;AAKD,GA5FD,CA4FE,OAAOa,GAAP,EAAY;AACZ,uBAAKA,GAAL,EAAU,KAAV;AACAK,IAAAA,OAAO,CAACC,IAAR,CAAa,EAAb;AACD;AACF,CAjGD,C,CAmGA;;;AACA5B,KAAK",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourcesContent": [
        "import { NODE_ENV, PORT } from '@env'\nimport express from 'express'\nimport bodyParser from 'body-parser'\nimport passport from 'passport'\nimport cors from 'cors'\n\nimport os from 'os'\nimport path from 'path'\n\nimport mArg from './utils/mArg'\nimport mLog from './utils/mLog'\n\nimport api from './routes/api'\n\n// import './middleware/passport'\n// import { initialize } from './libs/services/storage'\n\n// Entry point function\nconst start = async () => {\n  try {\n    const args = mArg({\n      '--port': Number,\n\n      // aliases\n      '-p': '--port',\n    })\n\n    // Setting the application port depending to environment\n    const networkInterfaces = os.networkInterfaces()\n\n    const host = networkInterfaces.lo0[0].address || HOST\n    const port = args.port || PORT\n    // database synchronization ...\n    // await database.authenticate()\n\n    mLog('Connected to SQL database!', 'green')\n\n    if (NODE_ENV === 'development') {\n      mLog('Synchronizing database!')\n      // creates tables from models\n      // database.sync({\n      //   force: false,\n      //   logging(str) {\n      //     mLog(str, 'magenta')\n      //   },\n      // })\n    }\n\n    // initialize filesystem stuff\n    // await initialize()\n\n    // instantiate express application\n    const app = express()\n\n    // authentication middleware\n    // app.use(passport.initialize())\n\n    // body data en+decoding\n    app.use(bodyParser.urlencoded())\n    app.use(bodyParser.json())\n    app.use(cors())\n\n    app.use((req, res, next) => {\n      // version the media type and extend the language for api versionning\n      res.setHeader('Accept', 'application/vnd.upload.island.v1+json')\n\n      // website we wish to allow to connect\n      res.setHeader('Access-Control-Allow-Origin', '*')\n\n      // request methods we wish to allow\n      res.setHeader('Access-Control-Allow-Methods', 'GET, POST, OPTIONS, PUT, PATCH, DELETE')\n\n      // request headers we wish to allow\n      res.setHeader(\n        'Access-Control-Allow-Headers',\n        'X-Requested-With, Accept, Authorization, Content-Type',\n      )\n\n      // set to true if we need the website to include cookies in the requests sent\n      // to the API (e.g. in case we use sessions)\n      res.setHeader('Access-Control-Allow-Credentials', true)\n\n      // pass to next layer of middleware\n      next()\n    })\n\n    app.get('/', (req, res) => {\n      res.send(`Please feel free to use our api in ${host}:${port}/api`)\n    })\n\n    // About routes definition\n    app.use('/api', api)\n\n    // Catching 404 error and forwarding to error handler\n    app.use((req, res, next) => {\n      const err = new Error('Routes not found')\n      err.status = 404\n      next(err)\n    })\n\n    // error handler\n    app.use((err, req, res) => {\n      res.status(err.status || 500).json({ err: err.message })\n    })\n\n    // ... and finally server listening\n    app.listen(port, (err) => {\n      if (err) throw err\n\n      mLog(`Server is running on port ${port}`)\n    })\n  } catch (err) {\n    mLog(err, 'red')\n    process.exit(42)\n  }\n}\n\n// Let's Rock!\nstart()\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554460099130
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mArg.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mArg.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mArg.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mArg.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
        "sourceFileName": "mArg.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _arg = _interopRequireDefault(require(\"arg\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _default(options) {\n  const args = (0, _arg.default)(options);\n  delete args._;\n\n  for (const key in args) {\n    args[key.substr(2)] = args[key];\n    delete args[key];\n  }\n\n  return args;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1BcmcuanMiXSwibmFtZXMiOlsib3B0aW9ucyIsImFyZ3MiLCJfIiwia2V5Iiwic3Vic3RyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFZSxrQkFBVUEsT0FBVixFQUFtQjtBQUNoQyxRQUFNQyxJQUFJLEdBQUcsa0JBQUlELE9BQUosQ0FBYjtBQUVBLFNBQU9DLElBQUksQ0FBQ0MsQ0FBWjs7QUFFQSxPQUFLLE1BQU1DLEdBQVgsSUFBa0JGLElBQWxCLEVBQXdCO0FBQ3RCQSxJQUFBQSxJQUFJLENBQUNFLEdBQUcsQ0FBQ0MsTUFBSixDQUFXLENBQVgsQ0FBRCxDQUFKLEdBQXNCSCxJQUFJLENBQUNFLEdBQUQsQ0FBMUI7QUFDQSxXQUFPRixJQUFJLENBQUNFLEdBQUQsQ0FBWDtBQUNEOztBQUVELFNBQU9GLElBQVA7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvZWZyZWktcGFyaXMvRG9jdW1lbnRzL1Byb2pldHMtcGVyc28veGV1L3NlcnZlci91dGlscyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhcmcgZnJvbSAnYXJnJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAob3B0aW9ucykge1xuICBjb25zdCBhcmdzID0gYXJnKG9wdGlvbnMpXG5cbiAgZGVsZXRlIGFyZ3MuX1xuXG4gIGZvciAoY29uc3Qga2V5IGluIGFyZ3MpIHtcbiAgICBhcmdzW2tleS5zdWJzdHIoMildID0gYXJnc1trZXldXG4gICAgZGVsZXRlIGFyZ3Nba2V5XVxuICB9XG5cbiAgcmV0dXJuIGFyZ3Ncbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "mArg.js"
      ],
      "names": [
        "options",
        "args",
        "_",
        "key",
        "substr"
      ],
      "mappings": ";;;;;;;AAAA;;;;AAEe,kBAAUA,OAAV,EAAmB;AAChC,QAAMC,IAAI,GAAG,kBAAID,OAAJ,CAAb;AAEA,SAAOC,IAAI,CAACC,CAAZ;;AAEA,OAAK,MAAMC,GAAX,IAAkBF,IAAlB,EAAwB;AACtBA,IAAAA,IAAI,CAACE,GAAG,CAACC,MAAJ,CAAW,CAAX,CAAD,CAAJ,GAAsBH,IAAI,CAACE,GAAD,CAA1B;AACA,WAAOF,IAAI,CAACE,GAAD,CAAX;AACD;;AAED,SAAOF,IAAP;AACD",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
      "sourcesContent": [
        "import arg from 'arg'\n\nexport default function (options) {\n  const args = arg(options)\n\n  delete args._\n\n  for (const key in args) {\n    args[key.substr(2)] = args[key]\n    delete args[key]\n  }\n\n  return args\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554459582623
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mLog.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mLog.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mLog.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mLog.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
        "sourceFileName": "mLog.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mDump = mDump;\nexports.default = _default;\n\nvar _kleur = _interopRequireDefault(require(\"kleur\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _dumper = require(\"dumper.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction mDump(obj, andDie = false) {\n  if (typeof obj === 'function') {\n    obj = {\n      type: 'function',\n      name: obj.name\n    };\n  }\n\n  andDie ? (0, _dumper.dd)(obj) : (0, _dumper.dump)(obj);\n}\n\nfunction _default(str, how = 'white', withNewLine = true, withTimestamps = true) {\n  const available_colors = ['black', 'red', 'green', 'yellow', 'blue', 'magenta', 'cyan', 'white', 'gray'];\n  how = available_colors.includes(how) ? how : 'white';\n  let display = '';\n\n  if (withTimestamps) {\n    display += `${(0, _moment.default)().format()} :: `;\n  }\n\n  display = _kleur.default[how](`${display}${str}`);\n\n  if (withNewLine) {\n    console.log(display);\n  } else {\n    process.stdout.write(display);\n  }\n} // adding mDump do global scope on development to avoid import/from\n\n\nif (\"development\" === 'development') {\n  global.mDump = mDump;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1Mb2cuanMiXSwibmFtZXMiOlsibUR1bXAiLCJvYmoiLCJhbmREaWUiLCJ0eXBlIiwibmFtZSIsInN0ciIsImhvdyIsIndpdGhOZXdMaW5lIiwid2l0aFRpbWVzdGFtcHMiLCJhdmFpbGFibGVfY29sb3JzIiwiaW5jbHVkZXMiLCJkaXNwbGF5IiwiZm9ybWF0Iiwia2xldXIiLCJjb25zb2xlIiwibG9nIiwicHJvY2VzcyIsInN0ZG91dCIsIndyaXRlIiwiZ2xvYmFsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUNBOztBQUNBOztBQUVBOzs7O0FBRU8sU0FBU0EsS0FBVCxDQUFlQyxHQUFmLEVBQW9CQyxNQUFNLEdBQUcsS0FBN0IsRUFBb0M7QUFDekMsTUFBSSxPQUFPRCxHQUFQLEtBQWUsVUFBbkIsRUFBK0I7QUFDN0JBLElBQUFBLEdBQUcsR0FBRztBQUNKRSxNQUFBQSxJQUFJLEVBQUUsVUFERjtBQUVKQyxNQUFBQSxJQUFJLEVBQUVILEdBQUcsQ0FBQ0c7QUFGTixLQUFOO0FBSUQ7O0FBRURGLEVBQUFBLE1BQU0sR0FBRyxnQkFBR0QsR0FBSCxDQUFILEdBQWEsa0JBQUtBLEdBQUwsQ0FBbkI7QUFDRDs7QUFFYyxrQkFBVUksR0FBVixFQUFlQyxHQUFHLEdBQUcsT0FBckIsRUFBOEJDLFdBQVcsR0FBRyxJQUE1QyxFQUFrREMsY0FBYyxHQUFHLElBQW5FLEVBQXlFO0FBQ3RGLFFBQU1DLGdCQUFnQixHQUFHLENBQ3ZCLE9BRHVCLEVBRXZCLEtBRnVCLEVBR3ZCLE9BSHVCLEVBSXZCLFFBSnVCLEVBS3ZCLE1BTHVCLEVBTXZCLFNBTnVCLEVBT3ZCLE1BUHVCLEVBUXZCLE9BUnVCLEVBU3ZCLE1BVHVCLENBQXpCO0FBWUFILEVBQUFBLEdBQUcsR0FBR0csZ0JBQWdCLENBQUNDLFFBQWpCLENBQTBCSixHQUExQixJQUFpQ0EsR0FBakMsR0FBdUMsT0FBN0M7QUFFQSxNQUFJSyxPQUFPLEdBQUcsRUFBZDs7QUFDQSxNQUFJSCxjQUFKLEVBQW9CO0FBQ2xCRyxJQUFBQSxPQUFPLElBQUssR0FBRSx1QkFBU0MsTUFBVCxFQUFrQixNQUFoQztBQUNEOztBQUVERCxFQUFBQSxPQUFPLEdBQUdFLGVBQU1QLEdBQU4sRUFBWSxHQUFFSyxPQUFRLEdBQUVOLEdBQUksRUFBNUIsQ0FBVjs7QUFFQSxNQUFJRSxXQUFKLEVBQWlCO0FBQ2ZPLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSixPQUFaO0FBQ0QsR0FGRCxNQUVPO0FBQ0xLLElBQUFBLE9BQU8sQ0FBQ0MsTUFBUixDQUFlQyxLQUFmLENBQXFCUCxPQUFyQjtBQUNEO0FBQ0YsQyxDQUVEOzs7QUFDQSxJQUFJLGtCQUFhLGFBQWpCLEVBQWdDO0FBQzlCUSxFQUFBQSxNQUFNLENBQUNuQixLQUFQLEdBQWVBLEtBQWY7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvZWZyZWktcGFyaXMvRG9jdW1lbnRzL1Byb2pldHMtcGVyc28veGV1L3NlcnZlci91dGlscyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5PREVfRU5WIH0gZnJvbSAnQGVudidcbmltcG9ydCBrbGV1ciBmcm9tICdrbGV1cidcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50J1xuXG5pbXBvcnQgeyBkdW1wLCBkZCB9IGZyb20gJ2R1bXBlci5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIG1EdW1wKG9iaiwgYW5kRGllID0gZmFsc2UpIHtcbiAgaWYgKHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicpIHtcbiAgICBvYmogPSB7XG4gICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgbmFtZTogb2JqLm5hbWUsXG4gICAgfVxuICB9XG5cbiAgYW5kRGllID8gZGQob2JqKSA6IGR1bXAob2JqKVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoc3RyLCBob3cgPSAnd2hpdGUnLCB3aXRoTmV3TGluZSA9IHRydWUsIHdpdGhUaW1lc3RhbXBzID0gdHJ1ZSkge1xuICBjb25zdCBhdmFpbGFibGVfY29sb3JzID0gW1xuICAgICdibGFjaycsXG4gICAgJ3JlZCcsXG4gICAgJ2dyZWVuJyxcbiAgICAneWVsbG93JyxcbiAgICAnYmx1ZScsXG4gICAgJ21hZ2VudGEnLFxuICAgICdjeWFuJyxcbiAgICAnd2hpdGUnLFxuICAgICdncmF5JyxcbiAgXVxuXG4gIGhvdyA9IGF2YWlsYWJsZV9jb2xvcnMuaW5jbHVkZXMoaG93KSA/IGhvdyA6ICd3aGl0ZSdcblxuICBsZXQgZGlzcGxheSA9ICcnXG4gIGlmICh3aXRoVGltZXN0YW1wcykge1xuICAgIGRpc3BsYXkgKz0gYCR7bW9tZW50KCkuZm9ybWF0KCl9IDo6IGBcbiAgfVxuXG4gIGRpc3BsYXkgPSBrbGV1cltob3ddKGAke2Rpc3BsYXl9JHtzdHJ9YClcblxuICBpZiAod2l0aE5ld0xpbmUpIHtcbiAgICBjb25zb2xlLmxvZyhkaXNwbGF5KVxuICB9IGVsc2Uge1xuICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKGRpc3BsYXkpXG4gIH1cbn1cblxuLy8gYWRkaW5nIG1EdW1wIGRvIGdsb2JhbCBzY29wZSBvbiBkZXZlbG9wbWVudCB0byBhdm9pZCBpbXBvcnQvZnJvbVxuaWYgKE5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gIGdsb2JhbC5tRHVtcCA9IG1EdW1wXG59XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "mLog.js"
      ],
      "names": [
        "mDump",
        "obj",
        "andDie",
        "type",
        "name",
        "str",
        "how",
        "withNewLine",
        "withTimestamps",
        "available_colors",
        "includes",
        "display",
        "format",
        "kleur",
        "console",
        "log",
        "process",
        "stdout",
        "write",
        "global"
      ],
      "mappings": ";;;;;;;;AACA;;AACA;;AAEA;;;;AAEO,SAASA,KAAT,CAAeC,GAAf,EAAoBC,MAAM,GAAG,KAA7B,EAAoC;AACzC,MAAI,OAAOD,GAAP,KAAe,UAAnB,EAA+B;AAC7BA,IAAAA,GAAG,GAAG;AACJE,MAAAA,IAAI,EAAE,UADF;AAEJC,MAAAA,IAAI,EAAEH,GAAG,CAACG;AAFN,KAAN;AAID;;AAEDF,EAAAA,MAAM,GAAG,gBAAGD,GAAH,CAAH,GAAa,kBAAKA,GAAL,CAAnB;AACD;;AAEc,kBAAUI,GAAV,EAAeC,GAAG,GAAG,OAArB,EAA8BC,WAAW,GAAG,IAA5C,EAAkDC,cAAc,GAAG,IAAnE,EAAyE;AACtF,QAAMC,gBAAgB,GAAG,CACvB,OADuB,EAEvB,KAFuB,EAGvB,OAHuB,EAIvB,QAJuB,EAKvB,MALuB,EAMvB,SANuB,EAOvB,MAPuB,EAQvB,OARuB,EASvB,MATuB,CAAzB;AAYAH,EAAAA,GAAG,GAAGG,gBAAgB,CAACC,QAAjB,CAA0BJ,GAA1B,IAAiCA,GAAjC,GAAuC,OAA7C;AAEA,MAAIK,OAAO,GAAG,EAAd;;AACA,MAAIH,cAAJ,EAAoB;AAClBG,IAAAA,OAAO,IAAK,GAAE,uBAASC,MAAT,EAAkB,MAAhC;AACD;;AAEDD,EAAAA,OAAO,GAAGE,eAAMP,GAAN,EAAY,GAAEK,OAAQ,GAAEN,GAAI,EAA5B,CAAV;;AAEA,MAAIE,WAAJ,EAAiB;AACfO,IAAAA,OAAO,CAACC,GAAR,CAAYJ,OAAZ;AACD,GAFD,MAEO;AACLK,IAAAA,OAAO,CAACC,MAAR,CAAeC,KAAf,CAAqBP,OAArB;AACD;AACF,C,CAED;;;AACA,IAAI,kBAAa,aAAjB,EAAgC;AAC9BQ,EAAAA,MAAM,CAACnB,KAAP,GAAeA,KAAf;AACD",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
      "sourcesContent": [
        "import { NODE_ENV } from '@env'\nimport kleur from 'kleur'\nimport moment from 'moment'\n\nimport { dump, dd } from 'dumper.js'\n\nexport function mDump(obj, andDie = false) {\n  if (typeof obj === 'function') {\n    obj = {\n      type: 'function',\n      name: obj.name,\n    }\n  }\n\n  andDie ? dd(obj) : dump(obj)\n}\n\nexport default function (str, how = 'white', withNewLine = true, withTimestamps = true) {\n  const available_colors = [\n    'black',\n    'red',\n    'green',\n    'yellow',\n    'blue',\n    'magenta',\n    'cyan',\n    'white',\n    'gray',\n  ]\n\n  how = available_colors.includes(how) ? how : 'white'\n\n  let display = ''\n  if (withTimestamps) {\n    display += `${moment().format()} :: `\n  }\n\n  display = kleur[how](`${display}${str}`)\n\n  if (withNewLine) {\n    console.log(display)\n  } else {\n    process.stdout.write(display)\n  }\n}\n\n// adding mDump do global scope on development to avoid import/from\nif (NODE_ENV === 'development') {\n  global.mDump = mDump\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554459582625
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _auth = _interopRequireDefault(require(\"./auth\"));\n\nvar _secured = _interopRequireDefault(require(\"./secured\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)(); // a\\ health-check endpoint\n\napi.get('/', (req, res) => {\n  res.json({\n    api: 'myS3.Api',\n    meta: {\n      status: 'running',\n      version: 'v1.0'\n    }\n  });\n}); // a\\ authentication\n\napi.use('/auth', _auth.default);\napi.use('/', _passport.default.authenticate('jwt', {\n  session: false\n}), _secured.default);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwaSIsImdldCIsInJlcSIsInJlcyIsImpzb24iLCJtZXRhIiwic3RhdHVzIiwidmVyc2lvbiIsInVzZSIsImF1dGgiLCJwYXNzcG9ydCIsImF1dGhlbnRpY2F0ZSIsInNlc3Npb24iLCJzZWN1cmVkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxHQUFHLEdBQUcsc0JBQVosQyxDQUVBOztBQUNBQSxHQUFHLENBQUNDLEdBQUosQ0FBUSxHQUFSLEVBQWEsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDekJBLEVBQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTO0FBQ1BKLElBQUFBLEdBQUcsRUFBRSxVQURFO0FBRVBLLElBQUFBLElBQUksRUFBRTtBQUNKQyxNQUFBQSxNQUFNLEVBQUUsU0FESjtBQUVKQyxNQUFBQSxPQUFPLEVBQUU7QUFGTDtBQUZDLEdBQVQ7QUFPRCxDQVJELEUsQ0FVQTs7QUFDQVAsR0FBRyxDQUFDUSxHQUFKLENBQVEsT0FBUixFQUFpQkMsYUFBakI7QUFDQVQsR0FBRyxDQUFDUSxHQUFKLENBQVEsR0FBUixFQUFhRSxrQkFBU0MsWUFBVCxDQUFzQixLQUF0QixFQUE2QjtBQUFFQyxFQUFBQSxPQUFPLEVBQUU7QUFBWCxDQUE3QixDQUFiLEVBQStEQyxnQkFBL0Q7ZUFFZWIsRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvZWZyZWktcGFyaXMvRG9jdW1lbnRzL1Byb2pldHMtcGVyc28veGV1L3NlcnZlci9yb3V0ZXMvYXBpIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcydcbmltcG9ydCBwYXNzcG9ydCBmcm9tICdwYXNzcG9ydCdcbmltcG9ydCBhdXRoIGZyb20gJy4vYXV0aCdcbmltcG9ydCBzZWN1cmVkIGZyb20gJy4vc2VjdXJlZCdcblxuY29uc3QgYXBpID0gUm91dGVyKClcblxuLy8gYVxcIGhlYWx0aC1jaGVjayBlbmRwb2ludFxuYXBpLmdldCgnLycsIChyZXEsIHJlcykgPT4ge1xuICByZXMuanNvbih7XG4gICAgYXBpOiAnbXlTMy5BcGknLFxuICAgIG1ldGE6IHtcbiAgICAgIHN0YXR1czogJ3J1bm5pbmcnLFxuICAgICAgdmVyc2lvbjogJ3YxLjAnLFxuICAgIH0sXG4gIH0pXG59KVxuXG4vLyBhXFwgYXV0aGVudGljYXRpb25cbmFwaS51c2UoJy9hdXRoJywgYXV0aClcbmFwaS51c2UoJy8nLCBwYXNzcG9ydC5hdXRoZW50aWNhdGUoJ2p3dCcsIHsgc2Vzc2lvbjogZmFsc2UgfSksIHNlY3VyZWQpXG5cbmV4cG9ydCBkZWZhdWx0IGFwaVxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "api",
        "get",
        "req",
        "res",
        "json",
        "meta",
        "status",
        "version",
        "use",
        "auth",
        "passport",
        "authenticate",
        "session",
        "secured"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ,C,CAEA;;AACAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,EAAAA,GAAG,CAACC,IAAJ,CAAS;AACPJ,IAAAA,GAAG,EAAE,UADE;AAEPK,IAAAA,IAAI,EAAE;AACJC,MAAAA,MAAM,EAAE,SADJ;AAEJC,MAAAA,OAAO,EAAE;AAFL;AAFC,GAAT;AAOD,CARD,E,CAUA;;AACAP,GAAG,CAACQ,GAAJ,CAAQ,OAAR,EAAiBC,aAAjB;AACAT,GAAG,CAACQ,GAAJ,CAAQ,GAAR,EAAaE,kBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAAEC,EAAAA,OAAO,EAAE;AAAX,CAA7B,CAAb,EAA+DC,gBAA/D;eAEeb,G",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
      "sourcesContent": [
        "import { Router } from 'express'\nimport passport from 'passport'\nimport auth from './auth'\nimport secured from './secured'\n\nconst api = Router()\n\n// a\\ health-check endpoint\napi.get('/', (req, res) => {\n  res.json({\n    api: 'myS3.Api',\n    meta: {\n      status: 'running',\n      version: 'v1.0',\n    },\n  })\n})\n\n// a\\ authentication\napi.use('/auth', auth)\napi.use('/', passport.authenticate('jwt', { session: false }), secured)\n\nexport default api\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554459635720
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/auth.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/auth.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/auth.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
        "sourceFileName": "auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _storage = require(\"services/storage\");\n\nvar _response = require(\"../../helpers/response\");\n\nvar _api = require(\"../../constants/api\");\n\nvar _user = _interopRequireDefault(require(\"models/user\"));\n\nvar _mail = _interopRequireDefault(require(\"services/mail\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\n/** About Sign-up\n */\n\napi.post('/register', async (req, res) => {\n  const {\n    nickname,\n    email,\n    password,\n    password_confirmation\n  } = req.body;\n\n  try {\n    const user = new _user.default({\n      nickname,\n      email,\n      password,\n      password_confirmation\n    });\n    await user.save();\n    (0, _storage.addUserWorkspace)(user.uuid).then(() => {\n      const payload = {\n        uuid: user.uuid,\n        nickname,\n        email\n      };\n\n      const token = _jsonwebtoken.default.sign(payload, \"*z)KP2L6IMdJ&geoZ,HfEn-zymAg84T1qrR;tXx9MH\");\n\n      const message = `\n        Hey ${user.nickname}!\n\n        Welcome to myS3 services \n      `;\n\n      _mail.default.send(user.email, 'Welcome', message, `<span>${message}</span>`);\n\n      res.status(201).json((0, _response.success)({\n        user\n      }, {\n        token\n      }));\n    });\n  } catch (err) {\n    res.status(400).json((0, _response.error)(_api.BAD_REQUEST, err.message));\n  }\n});\n/** About Login\n */\n\napi.post('/login', (req, res, next) => {\n  _passport.default.authenticate('local', {\n    session: false\n  }, (err, user) => {\n    if (err) {\n      return res.status(400).json((0, _response.error)(_api.BAD_REQUEST, err));\n    }\n\n    const {\n      uuid,\n      nickname,\n      email\n    } = user.toJSON(); // generate a signed json web token with the contents of user object and\n\n    const token = _jsonwebtoken.default.sign({\n      uuid,\n      nickname,\n      email\n    }, \"*z)KP2L6IMdJ&geoZ,HfEn-zymAg84T1qrR;tXx9MH\");\n\n    return res.json((0, _response.success)({\n      user\n    }, {\n      token\n    }));\n  })(req, res, next);\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiYXBpIiwicG9zdCIsInJlcSIsInJlcyIsIm5pY2tuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInBhc3N3b3JkX2NvbmZpcm1hdGlvbiIsImJvZHkiLCJ1c2VyIiwiVXNlciIsInNhdmUiLCJ1dWlkIiwidGhlbiIsInBheWxvYWQiLCJ0b2tlbiIsImp3dCIsInNpZ24iLCJtZXNzYWdlIiwiTWFpbCIsInNlbmQiLCJzdGF0dXMiLCJqc29uIiwiZXJyIiwiQkFEX1JFUVVFU1QiLCJuZXh0IiwicGFzc3BvcnQiLCJhdXRoZW50aWNhdGUiLCJzZXNzaW9uIiwidG9KU09OIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7Ozs7QUFFQSxNQUFNQSxHQUFHLEdBQUcsc0JBQVo7QUFFQTs7O0FBRUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTLFdBQVQsRUFBc0IsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQ3hDLFFBQU07QUFDSkMsSUFBQUEsUUFESTtBQUNNQyxJQUFBQSxLQUROO0FBQ2FDLElBQUFBLFFBRGI7QUFDdUJDLElBQUFBO0FBRHZCLE1BRUZMLEdBQUcsQ0FBQ00sSUFGUjs7QUFLQSxNQUFJO0FBQ0YsVUFBTUMsSUFBSSxHQUFHLElBQUlDLGFBQUosQ0FBUztBQUNwQk4sTUFBQUEsUUFEb0I7QUFFcEJDLE1BQUFBLEtBRm9CO0FBR3BCQyxNQUFBQSxRQUhvQjtBQUlwQkMsTUFBQUE7QUFKb0IsS0FBVCxDQUFiO0FBT0EsVUFBTUUsSUFBSSxDQUFDRSxJQUFMLEVBQU47QUFFQSxtQ0FBaUJGLElBQUksQ0FBQ0csSUFBdEIsRUFBNEJDLElBQTVCLENBQWlDLE1BQU07QUFDckMsWUFBTUMsT0FBTyxHQUFHO0FBQUVGLFFBQUFBLElBQUksRUFBRUgsSUFBSSxDQUFDRyxJQUFiO0FBQW1CUixRQUFBQSxRQUFuQjtBQUE2QkMsUUFBQUE7QUFBN0IsT0FBaEI7O0FBQ0EsWUFBTVUsS0FBSyxHQUFHQyxzQkFBSUMsSUFBSixDQUFTSCxPQUFULCtDQUFkOztBQUVBLFlBQU1JLE9BQU8sR0FBSTtjQUNUVCxJQUFJLENBQUNMLFFBQVM7OztPQUR0Qjs7QUFNQWUsb0JBQUtDLElBQUwsQ0FBVVgsSUFBSSxDQUFDSixLQUFmLEVBQXNCLFNBQXRCLEVBQWlDYSxPQUFqQyxFQUEyQyxTQUFRQSxPQUFRLFNBQTNEOztBQUNBZixNQUFBQSxHQUFHLENBQUNrQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsdUJBQVE7QUFBRWIsUUFBQUE7QUFBRixPQUFSLEVBQWtCO0FBQUVNLFFBQUFBO0FBQUYsT0FBbEIsQ0FBckI7QUFDRCxLQVpEO0FBYUQsR0F2QkQsQ0F1QkUsT0FBT1EsR0FBUCxFQUFZO0FBQ1pwQixJQUFBQSxHQUFHLENBQUNrQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIscUJBQU1FLGdCQUFOLEVBQW1CRCxHQUFHLENBQUNMLE9BQXZCLENBQXJCO0FBQ0Q7QUFDRixDQWhDRDtBQWtDQTs7O0FBRUFsQixHQUFHLENBQUNDLElBQUosQ0FBUyxRQUFULEVBQW1CLENBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFXc0IsSUFBWCxLQUFvQjtBQUNyQ0Msb0JBQVNDLFlBQVQsQ0FBc0IsT0FBdEIsRUFBK0I7QUFBRUMsSUFBQUEsT0FBTyxFQUFFO0FBQVgsR0FBL0IsRUFBbUQsQ0FBQ0wsR0FBRCxFQUFNZCxJQUFOLEtBQWU7QUFDaEUsUUFBSWMsR0FBSixFQUFTO0FBQ1AsYUFBT3BCLEdBQUcsQ0FBQ2tCLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixxQkFBTUUsZ0JBQU4sRUFBbUJELEdBQW5CLENBQXJCLENBQVA7QUFDRDs7QUFFRCxVQUFNO0FBQUVYLE1BQUFBLElBQUY7QUFBUVIsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsUUFBNEJJLElBQUksQ0FBQ29CLE1BQUwsRUFBbEMsQ0FMZ0UsQ0FPaEU7O0FBQ0EsVUFBTWQsS0FBSyxHQUFHQyxzQkFBSUMsSUFBSixDQUFTO0FBQUVMLE1BQUFBLElBQUY7QUFBUVIsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsS0FBVCwrQ0FBZDs7QUFFQSxXQUFPRixHQUFHLENBQUNtQixJQUFKLENBQVMsdUJBQVE7QUFBRWIsTUFBQUE7QUFBRixLQUFSLEVBQWtCO0FBQUVNLE1BQUFBO0FBQUYsS0FBbEIsQ0FBVCxDQUFQO0FBQ0QsR0FYRCxFQVdHYixHQVhILEVBV1FDLEdBWFIsRUFXYXNCLElBWGI7QUFZRCxDQWJEO2VBZWV6QixHIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9lZnJlaS1wYXJpcy9Eb2N1bWVudHMvUHJvamV0cy1wZXJzby94ZXUvc2VydmVyL3JvdXRlcy9hcGkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBKV1RfRU5DUllQVElPTiB9IGZyb20gJ0BlbnYnXG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJ1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nXG5pbXBvcnQgcGFzc3BvcnQgZnJvbSAncGFzc3BvcnQnXG5cbmltcG9ydCB7IGFkZFVzZXJXb3Jrc3BhY2UgfSBmcm9tICdzZXJ2aWNlcy9zdG9yYWdlJ1xuaW1wb3J0IHsgc3VjY2VzcywgZXJyb3IgfSBmcm9tICdoZWxwZXJzL3Jlc3BvbnNlJ1xuaW1wb3J0IHsgQkFEX1JFUVVFU1QgfSBmcm9tICdjb25zdGFudHMvYXBpJ1xuaW1wb3J0IFVzZXIgZnJvbSAnbW9kZWxzL3VzZXInXG5cbmltcG9ydCBNYWlsIGZyb20gJ3NlcnZpY2VzL21haWwnXG5cbmNvbnN0IGFwaSA9IFJvdXRlcigpXG5cbi8qKiBBYm91dCBTaWduLXVwXG4gKi9cbmFwaS5wb3N0KCcvcmVnaXN0ZXInLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3Qge1xuICAgIG5pY2tuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIHBhc3N3b3JkX2NvbmZpcm1hdGlvbixcbiAgfSA9IHJlcS5ib2R5XG5cblxuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih7XG4gICAgICBuaWNrbmFtZSxcbiAgICAgIGVtYWlsLFxuICAgICAgcGFzc3dvcmQsXG4gICAgICBwYXNzd29yZF9jb25maXJtYXRpb24sXG4gICAgfSlcblxuICAgIGF3YWl0IHVzZXIuc2F2ZSgpXG5cbiAgICBhZGRVc2VyV29ya3NwYWNlKHVzZXIudXVpZCkudGhlbigoKSA9PiB7XG4gICAgICBjb25zdCBwYXlsb2FkID0geyB1dWlkOiB1c2VyLnV1aWQsIG5pY2tuYW1lLCBlbWFpbCB9XG4gICAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHBheWxvYWQsIEpXVF9FTkNSWVBUSU9OKVxuXG4gICAgICBjb25zdCBtZXNzYWdlID0gYFxuICAgICAgICBIZXkgJHt1c2VyLm5pY2tuYW1lfSFcblxuICAgICAgICBXZWxjb21lIHRvIG15UzMgc2VydmljZXMg8J+YjlxuICAgICAgYFxuXG4gICAgICBNYWlsLnNlbmQodXNlci5lbWFpbCwgJ1dlbGNvbWUnLCBtZXNzYWdlLCBgPHNwYW4+JHttZXNzYWdlfTwvc3Bhbj5gKVxuICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oc3VjY2Vzcyh7IHVzZXIgfSwgeyB0b2tlbiB9KSlcbiAgICB9KVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXMuc3RhdHVzKDQwMCkuanNvbihlcnJvcihCQURfUkVRVUVTVCwgZXJyLm1lc3NhZ2UpKVxuICB9XG59KVxuXG4vKiogQWJvdXQgTG9naW5cbiAqL1xuYXBpLnBvc3QoJy9sb2dpbicsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBwYXNzcG9ydC5hdXRoZW50aWNhdGUoJ2xvY2FsJywgeyBzZXNzaW9uOiBmYWxzZSB9LCAoZXJyLCB1c2VyKSA9PiB7XG4gICAgaWYgKGVycikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKGVycm9yKEJBRF9SRVFVRVNULCBlcnIpKVxuICAgIH1cblxuICAgIGNvbnN0IHsgdXVpZCwgbmlja25hbWUsIGVtYWlsIH0gPSB1c2VyLnRvSlNPTigpXG5cbiAgICAvLyBnZW5lcmF0ZSBhIHNpZ25lZCBqc29uIHdlYiB0b2tlbiB3aXRoIHRoZSBjb250ZW50cyBvZiB1c2VyIG9iamVjdCBhbmRcbiAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHsgdXVpZCwgbmlja25hbWUsIGVtYWlsIH0sIEpXVF9FTkNSWVBUSU9OKVxuXG4gICAgcmV0dXJuIHJlcy5qc29uKHN1Y2Nlc3MoeyB1c2VyIH0sIHsgdG9rZW4gfSkpXG4gIH0pKHJlcSwgcmVzLCBuZXh0KVxufSlcblxuZXhwb3J0IGRlZmF1bHQgYXBpXG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "api",
        "post",
        "req",
        "res",
        "nickname",
        "email",
        "password",
        "password_confirmation",
        "body",
        "user",
        "User",
        "save",
        "uuid",
        "then",
        "payload",
        "token",
        "jwt",
        "sign",
        "message",
        "Mail",
        "send",
        "status",
        "json",
        "err",
        "BAD_REQUEST",
        "next",
        "passport",
        "authenticate",
        "session",
        "toJSON"
      ],
      "mappings": ";;;;;;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AAEA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEA;;;AAEAA,GAAG,CAACC,IAAJ,CAAS,WAAT,EAAsB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACxC,QAAM;AACJC,IAAAA,QADI;AACMC,IAAAA,KADN;AACaC,IAAAA,QADb;AACuBC,IAAAA;AADvB,MAEFL,GAAG,CAACM,IAFR;;AAKA,MAAI;AACF,UAAMC,IAAI,GAAG,IAAIC,aAAJ,CAAS;AACpBN,MAAAA,QADoB;AAEpBC,MAAAA,KAFoB;AAGpBC,MAAAA,QAHoB;AAIpBC,MAAAA;AAJoB,KAAT,CAAb;AAOA,UAAME,IAAI,CAACE,IAAL,EAAN;AAEA,mCAAiBF,IAAI,CAACG,IAAtB,EAA4BC,IAA5B,CAAiC,MAAM;AACrC,YAAMC,OAAO,GAAG;AAAEF,QAAAA,IAAI,EAAEH,IAAI,CAACG,IAAb;AAAmBR,QAAAA,QAAnB;AAA6BC,QAAAA;AAA7B,OAAhB;;AACA,YAAMU,KAAK,GAAGC,sBAAIC,IAAJ,CAASH,OAAT,+CAAd;;AAEA,YAAMI,OAAO,GAAI;cACTT,IAAI,CAACL,QAAS;;;OADtB;;AAMAe,oBAAKC,IAAL,CAAUX,IAAI,CAACJ,KAAf,EAAsB,SAAtB,EAAiCa,OAAjC,EAA2C,SAAQA,OAAQ,SAA3D;;AACAf,MAAAA,GAAG,CAACkB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,uBAAQ;AAAEb,QAAAA;AAAF,OAAR,EAAkB;AAAEM,QAAAA;AAAF,OAAlB,CAArB;AACD,KAZD;AAaD,GAvBD,CAuBE,OAAOQ,GAAP,EAAY;AACZpB,IAAAA,GAAG,CAACkB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,qBAAME,gBAAN,EAAmBD,GAAG,CAACL,OAAvB,CAArB;AACD;AACF,CAhCD;AAkCA;;;AAEAlB,GAAG,CAACC,IAAJ,CAAS,QAAT,EAAmB,CAACC,GAAD,EAAMC,GAAN,EAAWsB,IAAX,KAAoB;AACrCC,oBAASC,YAAT,CAAsB,OAAtB,EAA+B;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAA/B,EAAmD,CAACL,GAAD,EAAMd,IAAN,KAAe;AAChE,QAAIc,GAAJ,EAAS;AACP,aAAOpB,GAAG,CAACkB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,qBAAME,gBAAN,EAAmBD,GAAnB,CAArB,CAAP;AACD;;AAED,UAAM;AAAEX,MAAAA,IAAF;AAAQR,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,QAA4BI,IAAI,CAACoB,MAAL,EAAlC,CALgE,CAOhE;;AACA,UAAMd,KAAK,GAAGC,sBAAIC,IAAJ,CAAS;AAAEL,MAAAA,IAAF;AAAQR,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,KAAT,+CAAd;;AAEA,WAAOF,GAAG,CAACmB,IAAJ,CAAS,uBAAQ;AAAEb,MAAAA;AAAF,KAAR,EAAkB;AAAEM,MAAAA;AAAF,KAAlB,CAAT,CAAP;AACD,GAXD,EAWGb,GAXH,EAWQC,GAXR,EAWasB,IAXb;AAYD,CAbD;eAeezB,G",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
      "sourcesContent": [
        "import { JWT_ENCRYPTION } from '@env'\nimport { Router } from 'express'\nimport jwt from 'jsonwebtoken'\nimport passport from 'passport'\n\nimport { addUserWorkspace } from 'services/storage'\nimport { success, error } from 'helpers/response'\nimport { BAD_REQUEST } from 'constants/api'\nimport User from 'models/user'\n\nimport Mail from 'services/mail'\n\nconst api = Router()\n\n/** About Sign-up\n */\napi.post('/register', async (req, res) => {\n  const {\n    nickname, email, password, password_confirmation,\n  } = req.body\n\n\n  try {\n    const user = new User({\n      nickname,\n      email,\n      password,\n      password_confirmation,\n    })\n\n    await user.save()\n\n    addUserWorkspace(user.uuid).then(() => {\n      const payload = { uuid: user.uuid, nickname, email }\n      const token = jwt.sign(payload, JWT_ENCRYPTION)\n\n      const message = `\n        Hey ${user.nickname}!\n\n        Welcome to myS3 services \n      `\n\n      Mail.send(user.email, 'Welcome', message, `<span>${message}</span>`)\n      res.status(201).json(success({ user }, { token }))\n    })\n  } catch (err) {\n    res.status(400).json(error(BAD_REQUEST, err.message))\n  }\n})\n\n/** About Login\n */\napi.post('/login', (req, res, next) => {\n  passport.authenticate('local', { session: false }, (err, user) => {\n    if (err) {\n      return res.status(400).json(error(BAD_REQUEST, err))\n    }\n\n    const { uuid, nickname, email } = user.toJSON()\n\n    // generate a signed json web token with the contents of user object and\n    const token = jwt.sign({ uuid, nickname, email }, JWT_ENCRYPTION)\n\n    return res.json(success({ user }, { token }))\n  })(req, res, next)\n})\n\nexport default api\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554459635719
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mArg.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mArg.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mArg.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mArg.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
        "sourceFileName": "mArg.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _arg = _interopRequireDefault(require(\"arg\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _default(options) {\n  const args = (0, _arg.default)(options);\n  delete args._;\n\n  for (const key in args) {\n    args[key.substr(2)] = args[key];\n    delete args[key];\n  }\n\n  return args;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1BcmcuanMiXSwibmFtZXMiOlsib3B0aW9ucyIsImFyZ3MiLCJfIiwia2V5Iiwic3Vic3RyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFZSxrQkFBVUEsT0FBVixFQUFtQjtBQUNoQyxRQUFNQyxJQUFJLEdBQUcsa0JBQUlELE9BQUosQ0FBYjtBQUVBLFNBQU9DLElBQUksQ0FBQ0MsQ0FBWjs7QUFFQSxPQUFLLE1BQU1DLEdBQVgsSUFBa0JGLElBQWxCLEVBQXdCO0FBQ3RCQSxJQUFBQSxJQUFJLENBQUNFLEdBQUcsQ0FBQ0MsTUFBSixDQUFXLENBQVgsQ0FBRCxDQUFKLEdBQXNCSCxJQUFJLENBQUNFLEdBQUQsQ0FBMUI7QUFDQSxXQUFPRixJQUFJLENBQUNFLEdBQUQsQ0FBWDtBQUNEOztBQUVELFNBQU9GLElBQVA7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvZWZyZWktcGFyaXMvRG9jdW1lbnRzL1Byb2pldHMtcGVyc28veGV1L3NlcnZlci91dGlscyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhcmcgZnJvbSAnYXJnJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAob3B0aW9ucykge1xuICBjb25zdCBhcmdzID0gYXJnKG9wdGlvbnMpXG5cbiAgZGVsZXRlIGFyZ3MuX1xuXG4gIGZvciAoY29uc3Qga2V5IGluIGFyZ3MpIHtcbiAgICBhcmdzW2tleS5zdWJzdHIoMildID0gYXJnc1trZXldXG4gICAgZGVsZXRlIGFyZ3Nba2V5XVxuICB9XG5cbiAgcmV0dXJuIGFyZ3Ncbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "mArg.js"
      ],
      "names": [
        "options",
        "args",
        "_",
        "key",
        "substr"
      ],
      "mappings": ";;;;;;;AAAA;;;;AAEe,kBAAUA,OAAV,EAAmB;AAChC,QAAMC,IAAI,GAAG,kBAAID,OAAJ,CAAb;AAEA,SAAOC,IAAI,CAACC,CAAZ;;AAEA,OAAK,MAAMC,GAAX,IAAkBF,IAAlB,EAAwB;AACtBA,IAAAA,IAAI,CAACE,GAAG,CAACC,MAAJ,CAAW,CAAX,CAAD,CAAJ,GAAsBH,IAAI,CAACE,GAAD,CAA1B;AACA,WAAOF,IAAI,CAACE,GAAD,CAAX;AACD;;AAED,SAAOF,IAAP;AACD",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
      "sourcesContent": [
        "import arg from 'arg'\n\nexport default function (options) {\n  const args = arg(options)\n\n  delete args._\n\n  for (const key in args) {\n    args[key.substr(2)] = args[key]\n    delete args[key]\n  }\n\n  return args\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554459582623
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mLog.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mLog.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mLog.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils/mLog.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
        "sourceFileName": "mLog.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mDump = mDump;\nexports.default = _default;\n\nvar _kleur = _interopRequireDefault(require(\"kleur\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _dumper = require(\"dumper.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction mDump(obj, andDie = false) {\n  if (typeof obj === 'function') {\n    obj = {\n      type: 'function',\n      name: obj.name\n    };\n  }\n\n  andDie ? (0, _dumper.dd)(obj) : (0, _dumper.dump)(obj);\n}\n\nfunction _default(str, how = 'white', withNewLine = true, withTimestamps = true) {\n  const available_colors = ['black', 'red', 'green', 'yellow', 'blue', 'magenta', 'cyan', 'white', 'gray'];\n  how = available_colors.includes(how) ? how : 'white';\n  let display = '';\n\n  if (withTimestamps) {\n    display += `${(0, _moment.default)().format()} :: `;\n  }\n\n  display = _kleur.default[how](`${display}${str}`);\n\n  if (withNewLine) {\n    console.log(display);\n  } else {\n    process.stdout.write(display);\n  }\n} // adding mDump do global scope on development to avoid import/from\n\n\nif (\"development\" === 'development') {\n  global.mDump = mDump;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1Mb2cuanMiXSwibmFtZXMiOlsibUR1bXAiLCJvYmoiLCJhbmREaWUiLCJ0eXBlIiwibmFtZSIsInN0ciIsImhvdyIsIndpdGhOZXdMaW5lIiwid2l0aFRpbWVzdGFtcHMiLCJhdmFpbGFibGVfY29sb3JzIiwiaW5jbHVkZXMiLCJkaXNwbGF5IiwiZm9ybWF0Iiwia2xldXIiLCJjb25zb2xlIiwibG9nIiwicHJvY2VzcyIsInN0ZG91dCIsIndyaXRlIiwiZ2xvYmFsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUNBOztBQUNBOztBQUVBOzs7O0FBRU8sU0FBU0EsS0FBVCxDQUFlQyxHQUFmLEVBQW9CQyxNQUFNLEdBQUcsS0FBN0IsRUFBb0M7QUFDekMsTUFBSSxPQUFPRCxHQUFQLEtBQWUsVUFBbkIsRUFBK0I7QUFDN0JBLElBQUFBLEdBQUcsR0FBRztBQUNKRSxNQUFBQSxJQUFJLEVBQUUsVUFERjtBQUVKQyxNQUFBQSxJQUFJLEVBQUVILEdBQUcsQ0FBQ0c7QUFGTixLQUFOO0FBSUQ7O0FBRURGLEVBQUFBLE1BQU0sR0FBRyxnQkFBR0QsR0FBSCxDQUFILEdBQWEsa0JBQUtBLEdBQUwsQ0FBbkI7QUFDRDs7QUFFYyxrQkFBVUksR0FBVixFQUFlQyxHQUFHLEdBQUcsT0FBckIsRUFBOEJDLFdBQVcsR0FBRyxJQUE1QyxFQUFrREMsY0FBYyxHQUFHLElBQW5FLEVBQXlFO0FBQ3RGLFFBQU1DLGdCQUFnQixHQUFHLENBQ3ZCLE9BRHVCLEVBRXZCLEtBRnVCLEVBR3ZCLE9BSHVCLEVBSXZCLFFBSnVCLEVBS3ZCLE1BTHVCLEVBTXZCLFNBTnVCLEVBT3ZCLE1BUHVCLEVBUXZCLE9BUnVCLEVBU3ZCLE1BVHVCLENBQXpCO0FBWUFILEVBQUFBLEdBQUcsR0FBR0csZ0JBQWdCLENBQUNDLFFBQWpCLENBQTBCSixHQUExQixJQUFpQ0EsR0FBakMsR0FBdUMsT0FBN0M7QUFFQSxNQUFJSyxPQUFPLEdBQUcsRUFBZDs7QUFDQSxNQUFJSCxjQUFKLEVBQW9CO0FBQ2xCRyxJQUFBQSxPQUFPLElBQUssR0FBRSx1QkFBU0MsTUFBVCxFQUFrQixNQUFoQztBQUNEOztBQUVERCxFQUFBQSxPQUFPLEdBQUdFLGVBQU1QLEdBQU4sRUFBWSxHQUFFSyxPQUFRLEdBQUVOLEdBQUksRUFBNUIsQ0FBVjs7QUFFQSxNQUFJRSxXQUFKLEVBQWlCO0FBQ2ZPLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSixPQUFaO0FBQ0QsR0FGRCxNQUVPO0FBQ0xLLElBQUFBLE9BQU8sQ0FBQ0MsTUFBUixDQUFlQyxLQUFmLENBQXFCUCxPQUFyQjtBQUNEO0FBQ0YsQyxDQUVEOzs7QUFDQSxJQUFJLGtCQUFhLGFBQWpCLEVBQWdDO0FBQzlCUSxFQUFBQSxNQUFNLENBQUNuQixLQUFQLEdBQWVBLEtBQWY7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvZWZyZWktcGFyaXMvRG9jdW1lbnRzL1Byb2pldHMtcGVyc28veGV1L3NlcnZlci91dGlscyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5PREVfRU5WIH0gZnJvbSAnQGVudidcbmltcG9ydCBrbGV1ciBmcm9tICdrbGV1cidcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50J1xuXG5pbXBvcnQgeyBkdW1wLCBkZCB9IGZyb20gJ2R1bXBlci5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIG1EdW1wKG9iaiwgYW5kRGllID0gZmFsc2UpIHtcbiAgaWYgKHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicpIHtcbiAgICBvYmogPSB7XG4gICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgbmFtZTogb2JqLm5hbWUsXG4gICAgfVxuICB9XG5cbiAgYW5kRGllID8gZGQob2JqKSA6IGR1bXAob2JqKVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoc3RyLCBob3cgPSAnd2hpdGUnLCB3aXRoTmV3TGluZSA9IHRydWUsIHdpdGhUaW1lc3RhbXBzID0gdHJ1ZSkge1xuICBjb25zdCBhdmFpbGFibGVfY29sb3JzID0gW1xuICAgICdibGFjaycsXG4gICAgJ3JlZCcsXG4gICAgJ2dyZWVuJyxcbiAgICAneWVsbG93JyxcbiAgICAnYmx1ZScsXG4gICAgJ21hZ2VudGEnLFxuICAgICdjeWFuJyxcbiAgICAnd2hpdGUnLFxuICAgICdncmF5JyxcbiAgXVxuXG4gIGhvdyA9IGF2YWlsYWJsZV9jb2xvcnMuaW5jbHVkZXMoaG93KSA/IGhvdyA6ICd3aGl0ZSdcblxuICBsZXQgZGlzcGxheSA9ICcnXG4gIGlmICh3aXRoVGltZXN0YW1wcykge1xuICAgIGRpc3BsYXkgKz0gYCR7bW9tZW50KCkuZm9ybWF0KCl9IDo6IGBcbiAgfVxuXG4gIGRpc3BsYXkgPSBrbGV1cltob3ddKGAke2Rpc3BsYXl9JHtzdHJ9YClcblxuICBpZiAod2l0aE5ld0xpbmUpIHtcbiAgICBjb25zb2xlLmxvZyhkaXNwbGF5KVxuICB9IGVsc2Uge1xuICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKGRpc3BsYXkpXG4gIH1cbn1cblxuLy8gYWRkaW5nIG1EdW1wIGRvIGdsb2JhbCBzY29wZSBvbiBkZXZlbG9wbWVudCB0byBhdm9pZCBpbXBvcnQvZnJvbVxuaWYgKE5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gIGdsb2JhbC5tRHVtcCA9IG1EdW1wXG59XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "mLog.js"
      ],
      "names": [
        "mDump",
        "obj",
        "andDie",
        "type",
        "name",
        "str",
        "how",
        "withNewLine",
        "withTimestamps",
        "available_colors",
        "includes",
        "display",
        "format",
        "kleur",
        "console",
        "log",
        "process",
        "stdout",
        "write",
        "global"
      ],
      "mappings": ";;;;;;;;AACA;;AACA;;AAEA;;;;AAEO,SAASA,KAAT,CAAeC,GAAf,EAAoBC,MAAM,GAAG,KAA7B,EAAoC;AACzC,MAAI,OAAOD,GAAP,KAAe,UAAnB,EAA+B;AAC7BA,IAAAA,GAAG,GAAG;AACJE,MAAAA,IAAI,EAAE,UADF;AAEJC,MAAAA,IAAI,EAAEH,GAAG,CAACG;AAFN,KAAN;AAID;;AAEDF,EAAAA,MAAM,GAAG,gBAAGD,GAAH,CAAH,GAAa,kBAAKA,GAAL,CAAnB;AACD;;AAEc,kBAAUI,GAAV,EAAeC,GAAG,GAAG,OAArB,EAA8BC,WAAW,GAAG,IAA5C,EAAkDC,cAAc,GAAG,IAAnE,EAAyE;AACtF,QAAMC,gBAAgB,GAAG,CACvB,OADuB,EAEvB,KAFuB,EAGvB,OAHuB,EAIvB,QAJuB,EAKvB,MALuB,EAMvB,SANuB,EAOvB,MAPuB,EAQvB,OARuB,EASvB,MATuB,CAAzB;AAYAH,EAAAA,GAAG,GAAGG,gBAAgB,CAACC,QAAjB,CAA0BJ,GAA1B,IAAiCA,GAAjC,GAAuC,OAA7C;AAEA,MAAIK,OAAO,GAAG,EAAd;;AACA,MAAIH,cAAJ,EAAoB;AAClBG,IAAAA,OAAO,IAAK,GAAE,uBAASC,MAAT,EAAkB,MAAhC;AACD;;AAEDD,EAAAA,OAAO,GAAGE,eAAMP,GAAN,EAAY,GAAEK,OAAQ,GAAEN,GAAI,EAA5B,CAAV;;AAEA,MAAIE,WAAJ,EAAiB;AACfO,IAAAA,OAAO,CAACC,GAAR,CAAYJ,OAAZ;AACD,GAFD,MAEO;AACLK,IAAAA,OAAO,CAACC,MAAR,CAAeC,KAAf,CAAqBP,OAArB;AACD;AACF,C,CAED;;;AACA,IAAI,kBAAa,aAAjB,EAAgC;AAC9BQ,EAAAA,MAAM,CAACnB,KAAP,GAAeA,KAAf;AACD",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/utils",
      "sourcesContent": [
        "import { NODE_ENV } from '@env'\nimport kleur from 'kleur'\nimport moment from 'moment'\n\nimport { dump, dd } from 'dumper.js'\n\nexport function mDump(obj, andDie = false) {\n  if (typeof obj === 'function') {\n    obj = {\n      type: 'function',\n      name: obj.name,\n    }\n  }\n\n  andDie ? dd(obj) : dump(obj)\n}\n\nexport default function (str, how = 'white', withNewLine = true, withTimestamps = true) {\n  const available_colors = [\n    'black',\n    'red',\n    'green',\n    'yellow',\n    'blue',\n    'magenta',\n    'cyan',\n    'white',\n    'gray',\n  ]\n\n  how = available_colors.includes(how) ? how : 'white'\n\n  let display = ''\n  if (withTimestamps) {\n    display += `${moment().format()} :: `\n  }\n\n  display = kleur[how](`${display}${str}`)\n\n  if (withNewLine) {\n    console.log(display)\n  } else {\n    process.stdout.write(display)\n  }\n}\n\n// adding mDump do global scope on development to avoid import/from\nif (NODE_ENV === 'development') {\n  global.mDump = mDump\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554459582625
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _auth = _interopRequireDefault(require(\"./auth\"));\n\nvar _secured = _interopRequireDefault(require(\"./secured\"));\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst API_BASE = 'http://data.fixer.io/api/latest?access_key=';\nconst DEFAULT_VALUE = 'EUR';\nconst API_FIXER = `${API_BASE}${\"1ebc87f464422af0b44036ffb35a4c24\"}`;\nconst api = (0, _express.Router)(); // a\\ health-check endpoint\n\napi.get('/', (req, res) => {\n  res.json({\n    api: 'xeu.Api',\n    meta: {\n      status: 'running',\n      version: 'v1.0'\n    }\n  });\n});\napi.get('/xeu', async (req, res) => {\n  const response = await _axios.default.get(`${API_FIXER}&base=${DEFAULT_VALUE}&symbols=USD,TND,GBP,JPY,BOB`);\n  res.json(response.data);\n}); // a\\ authentication\n\napi.use('/auth', _auth.default);\napi.use('/', _passport.default.authenticate('jwt', {\n  session: false\n}), _secured.default);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkFQSV9CQVNFIiwiREVGQVVMVF9WQUxVRSIsIkFQSV9GSVhFUiIsImFwaSIsImdldCIsInJlcSIsInJlcyIsImpzb24iLCJtZXRhIiwic3RhdHVzIiwidmVyc2lvbiIsInJlc3BvbnNlIiwiYXhpb3MiLCJkYXRhIiwidXNlIiwiYXV0aCIsInBhc3Nwb3J0IiwiYXV0aGVudGljYXRlIiwic2Vzc2lvbiIsInNlY3VyZWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUdBLE1BQU1BLFFBQVEsR0FBRyw2Q0FBakI7QUFDQSxNQUFNQyxhQUFhLEdBQUcsS0FBdEI7QUFDQSxNQUFNQyxTQUFTLEdBQUksR0FBRUYsUUFBUyxHQUFaLGtDQUFvQixFQUF0QztBQUVBLE1BQU1HLEdBQUcsR0FBRyxzQkFBWixDLENBRUE7O0FBQ0FBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUN6QkEsRUFBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVM7QUFDUEosSUFBQUEsR0FBRyxFQUFFLFNBREU7QUFFUEssSUFBQUEsSUFBSSxFQUFFO0FBQ0pDLE1BQUFBLE1BQU0sRUFBRSxTQURKO0FBRUpDLE1BQUFBLE9BQU8sRUFBRTtBQUZMO0FBRkMsR0FBVDtBQU9ELENBUkQ7QUFXQVAsR0FBRyxDQUFDQyxHQUFKLENBQVEsTUFBUixFQUFnQixPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDbEMsUUFBTUssUUFBUSxHQUFHLE1BQU1DLGVBQU1SLEdBQU4sQ0FBVyxHQUFFRixTQUFVLFNBQVFELGFBQWMsOEJBQTdDLENBQXZCO0FBQ0FLLEVBQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTSSxRQUFRLENBQUNFLElBQWxCO0FBQ0QsQ0FIRCxFLENBSUE7O0FBQ0FWLEdBQUcsQ0FBQ1csR0FBSixDQUFRLE9BQVIsRUFBaUJDLGFBQWpCO0FBQ0FaLEdBQUcsQ0FBQ1csR0FBSixDQUFRLEdBQVIsRUFBYUUsa0JBQVNDLFlBQVQsQ0FBc0IsS0FBdEIsRUFBNkI7QUFBRUMsRUFBQUEsT0FBTyxFQUFFO0FBQVgsQ0FBN0IsQ0FBYixFQUErREMsZ0JBQS9EO2VBS2VoQixHIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9lZnJlaS1wYXJpcy9Eb2N1bWVudHMvUHJvamV0cy1wZXJzby94ZXUvc2VydmVyL3JvdXRlcy9hcGkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJ1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gJ3Bhc3Nwb3J0J1xuaW1wb3J0IGF1dGggZnJvbSAnLi9hdXRoJ1xuaW1wb3J0IHNlY3VyZWQgZnJvbSAnLi9zZWN1cmVkJ1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJ1xuaW1wb3J0IHsgVE9LRU4gfSBmcm9tICdAZW52J1xuXG5jb25zdCBBUElfQkFTRSA9ICdodHRwOi8vZGF0YS5maXhlci5pby9hcGkvbGF0ZXN0P2FjY2Vzc19rZXk9JztcbmNvbnN0IERFRkFVTFRfVkFMVUUgPSAnRVVSJ1xuY29uc3QgQVBJX0ZJWEVSID0gYCR7QVBJX0JBU0V9JHtUT0tFTn1gO1xuXG5jb25zdCBhcGkgPSBSb3V0ZXIoKVxuXG4vLyBhXFwgaGVhbHRoLWNoZWNrIGVuZHBvaW50XG5hcGkuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5qc29uKHtcbiAgICBhcGk6ICd4ZXUuQXBpJyxcbiAgICBtZXRhOiB7XG4gICAgICBzdGF0dXM6ICdydW5uaW5nJyxcbiAgICAgIHZlcnNpb246ICd2MS4wJyxcbiAgICB9LFxuICB9KVxufSlcblxuXG5hcGkuZ2V0KCcveGV1JywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGAke0FQSV9GSVhFUn0mYmFzZT0ke0RFRkFVTFRfVkFMVUV9JnN5bWJvbHM9VVNELFRORCxHQlAsSlBZLEJPQmApXG4gIHJlcy5qc29uKHJlc3BvbnNlLmRhdGEpXG59KVxuLy8gYVxcIGF1dGhlbnRpY2F0aW9uXG5hcGkudXNlKCcvYXV0aCcsIGF1dGgpXG5hcGkudXNlKCcvJywgcGFzc3BvcnQuYXV0aGVudGljYXRlKCdqd3QnLCB7IHNlc3Npb246IGZhbHNlIH0pLCBzZWN1cmVkKVxuXG5cblxuXG5leHBvcnQgZGVmYXVsdCBhcGlcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "API_BASE",
        "DEFAULT_VALUE",
        "API_FIXER",
        "api",
        "get",
        "req",
        "res",
        "json",
        "meta",
        "status",
        "version",
        "response",
        "axios",
        "data",
        "use",
        "auth",
        "passport",
        "authenticate",
        "session",
        "secured"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AAGA,MAAMA,QAAQ,GAAG,6CAAjB;AACA,MAAMC,aAAa,GAAG,KAAtB;AACA,MAAMC,SAAS,GAAI,GAAEF,QAAS,GAAZ,kCAAoB,EAAtC;AAEA,MAAMG,GAAG,GAAG,sBAAZ,C,CAEA;;AACAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,EAAAA,GAAG,CAACC,IAAJ,CAAS;AACPJ,IAAAA,GAAG,EAAE,SADE;AAEPK,IAAAA,IAAI,EAAE;AACJC,MAAAA,MAAM,EAAE,SADJ;AAEJC,MAAAA,OAAO,EAAE;AAFL;AAFC,GAAT;AAOD,CARD;AAWAP,GAAG,CAACC,GAAJ,CAAQ,MAAR,EAAgB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAClC,QAAMK,QAAQ,GAAG,MAAMC,eAAMR,GAAN,CAAW,GAAEF,SAAU,SAAQD,aAAc,8BAA7C,CAAvB;AACAK,EAAAA,GAAG,CAACC,IAAJ,CAASI,QAAQ,CAACE,IAAlB;AACD,CAHD,E,CAIA;;AACAV,GAAG,CAACW,GAAJ,CAAQ,OAAR,EAAiBC,aAAjB;AACAZ,GAAG,CAACW,GAAJ,CAAQ,GAAR,EAAaE,kBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAAEC,EAAAA,OAAO,EAAE;AAAX,CAA7B,CAAb,EAA+DC,gBAA/D;eAKehB,G",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
      "sourcesContent": [
        "import { Router } from 'express'\nimport passport from 'passport'\nimport auth from './auth'\nimport secured from './secured'\nimport axios from 'axios'\nimport { TOKEN } from '@env'\n\nconst API_BASE = 'http://data.fixer.io/api/latest?access_key=';\nconst DEFAULT_VALUE = 'EUR'\nconst API_FIXER = `${API_BASE}${TOKEN}`;\n\nconst api = Router()\n\n// a\\ health-check endpoint\napi.get('/', (req, res) => {\n  res.json({\n    api: 'xeu.Api',\n    meta: {\n      status: 'running',\n      version: 'v1.0',\n    },\n  })\n})\n\n\napi.get('/xeu', async (req, res) => {\n  const response = await axios.get(`${API_FIXER}&base=${DEFAULT_VALUE}&symbols=USD,TND,GBP,JPY,BOB`)\n  res.json(response.data)\n})\n// a\\ authentication\napi.use('/auth', auth)\napi.use('/', passport.authenticate('jwt', { session: false }), secured)\n\n\n\n\nexport default api\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554463350811
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/auth.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/auth.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/auth.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
        "sourceFileName": "auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _response = require(\"../../helpers/response\");\n\nvar _api = require(\"../../constants/api\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import { addUserWorkspace } from 'services/storage'\nconst api = (0, _express.Router)();\n/** About Sign-up\n */\n\napi.post('/register', async (req, res) => {\n  const {\n    nickname,\n    email,\n    password,\n    password_confirmation\n  } = req.body;\n\n  try {\n    const user = new User({\n      nickname,\n      email,\n      password,\n      password_confirmation\n    });\n    await user.save();\n    addUserWorkspace(user.uuid).then(() => {\n      const payload = {\n        uuid: user.uuid,\n        nickname,\n        email\n      };\n\n      const token = _jsonwebtoken.default.sign(payload, \"*z)KP2L6IMdJ&geoZ,HfEn-zymAg84T1qrR;tXx9MH\");\n\n      const message = `\n        Hey ${user.nickname}!\n\n        Welcome to myS3 services \n      `;\n      Mail.send(user.email, 'Welcome', message, `<span>${message}</span>`);\n      res.status(201).json((0, _response.success)({\n        user\n      }, {\n        token\n      }));\n    });\n  } catch (err) {\n    res.status(400).json((0, _response.error)(_api.BAD_REQUEST, err.message));\n  }\n});\n/** About Login\n */\n\napi.post('/login', (req, res, next) => {\n  _passport.default.authenticate('local', {\n    session: false\n  }, (err, user) => {\n    if (err) {\n      return res.status(400).json((0, _response.error)(_api.BAD_REQUEST, err));\n    }\n\n    const {\n      uuid,\n      nickname,\n      email\n    } = user.toJSON(); // generate a signed json web token with the contents of user object and\n\n    const token = _jsonwebtoken.default.sign({\n      uuid,\n      nickname,\n      email\n    }, \"*z)KP2L6IMdJ&geoZ,HfEn-zymAg84T1qrR;tXx9MH\");\n\n    return res.json((0, _response.success)({\n      user\n    }, {\n      token\n    }));\n  })(req, res, next);\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiYXBpIiwicG9zdCIsInJlcSIsInJlcyIsIm5pY2tuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInBhc3N3b3JkX2NvbmZpcm1hdGlvbiIsImJvZHkiLCJ1c2VyIiwiVXNlciIsInNhdmUiLCJhZGRVc2VyV29ya3NwYWNlIiwidXVpZCIsInRoZW4iLCJwYXlsb2FkIiwidG9rZW4iLCJqd3QiLCJzaWduIiwibWVzc2FnZSIsIk1haWwiLCJzZW5kIiwic3RhdHVzIiwianNvbiIsImVyciIsIkJBRF9SRVFVRVNUIiwibmV4dCIsInBhc3Nwb3J0IiwiYXV0aGVudGljYXRlIiwic2Vzc2lvbiIsInRvSlNPTiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBOztBQUNBOztBQUNBOztBQUdBOztBQUNBOzs7O0FBRkE7QUFNQSxNQUFNQSxHQUFHLEdBQUcsc0JBQVo7QUFFQTs7O0FBRUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTLFdBQVQsRUFBc0IsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQ3hDLFFBQU07QUFDSkMsSUFBQUEsUUFESTtBQUNNQyxJQUFBQSxLQUROO0FBQ2FDLElBQUFBLFFBRGI7QUFDdUJDLElBQUFBO0FBRHZCLE1BRUZMLEdBQUcsQ0FBQ00sSUFGUjs7QUFLQSxNQUFJO0FBQ0YsVUFBTUMsSUFBSSxHQUFHLElBQUlDLElBQUosQ0FBUztBQUNwQk4sTUFBQUEsUUFEb0I7QUFFcEJDLE1BQUFBLEtBRm9CO0FBR3BCQyxNQUFBQSxRQUhvQjtBQUlwQkMsTUFBQUE7QUFKb0IsS0FBVCxDQUFiO0FBT0EsVUFBTUUsSUFBSSxDQUFDRSxJQUFMLEVBQU47QUFFQUMsSUFBQUEsZ0JBQWdCLENBQUNILElBQUksQ0FBQ0ksSUFBTixDQUFoQixDQUE0QkMsSUFBNUIsQ0FBaUMsTUFBTTtBQUNyQyxZQUFNQyxPQUFPLEdBQUc7QUFBRUYsUUFBQUEsSUFBSSxFQUFFSixJQUFJLENBQUNJLElBQWI7QUFBbUJULFFBQUFBLFFBQW5CO0FBQTZCQyxRQUFBQTtBQUE3QixPQUFoQjs7QUFDQSxZQUFNVyxLQUFLLEdBQUdDLHNCQUFJQyxJQUFKLENBQVNILE9BQVQsK0NBQWQ7O0FBRUEsWUFBTUksT0FBTyxHQUFJO2NBQ1RWLElBQUksQ0FBQ0wsUUFBUzs7O09BRHRCO0FBTUFnQixNQUFBQSxJQUFJLENBQUNDLElBQUwsQ0FBVVosSUFBSSxDQUFDSixLQUFmLEVBQXNCLFNBQXRCLEVBQWlDYyxPQUFqQyxFQUEyQyxTQUFRQSxPQUFRLFNBQTNEO0FBQ0FoQixNQUFBQSxHQUFHLENBQUNtQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsdUJBQVE7QUFBRWQsUUFBQUE7QUFBRixPQUFSLEVBQWtCO0FBQUVPLFFBQUFBO0FBQUYsT0FBbEIsQ0FBckI7QUFDRCxLQVpEO0FBYUQsR0F2QkQsQ0F1QkUsT0FBT1EsR0FBUCxFQUFZO0FBQ1pyQixJQUFBQSxHQUFHLENBQUNtQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIscUJBQU1FLGdCQUFOLEVBQW1CRCxHQUFHLENBQUNMLE9BQXZCLENBQXJCO0FBQ0Q7QUFDRixDQWhDRDtBQWtDQTs7O0FBRUFuQixHQUFHLENBQUNDLElBQUosQ0FBUyxRQUFULEVBQW1CLENBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFXdUIsSUFBWCxLQUFvQjtBQUNyQ0Msb0JBQVNDLFlBQVQsQ0FBc0IsT0FBdEIsRUFBK0I7QUFBRUMsSUFBQUEsT0FBTyxFQUFFO0FBQVgsR0FBL0IsRUFBbUQsQ0FBQ0wsR0FBRCxFQUFNZixJQUFOLEtBQWU7QUFDaEUsUUFBSWUsR0FBSixFQUFTO0FBQ1AsYUFBT3JCLEdBQUcsQ0FBQ21CLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixxQkFBTUUsZ0JBQU4sRUFBbUJELEdBQW5CLENBQXJCLENBQVA7QUFDRDs7QUFFRCxVQUFNO0FBQUVYLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsUUFBNEJJLElBQUksQ0FBQ3FCLE1BQUwsRUFBbEMsQ0FMZ0UsQ0FPaEU7O0FBQ0EsVUFBTWQsS0FBSyxHQUFHQyxzQkFBSUMsSUFBSixDQUFTO0FBQUVMLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsS0FBVCwrQ0FBZDs7QUFFQSxXQUFPRixHQUFHLENBQUNvQixJQUFKLENBQVMsdUJBQVE7QUFBRWQsTUFBQUE7QUFBRixLQUFSLEVBQWtCO0FBQUVPLE1BQUFBO0FBQUYsS0FBbEIsQ0FBVCxDQUFQO0FBQ0QsR0FYRCxFQVdHZCxHQVhILEVBV1FDLEdBWFIsRUFXYXVCLElBWGI7QUFZRCxDQWJEO2VBZWUxQixHIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9lZnJlaS1wYXJpcy9Eb2N1bWVudHMvUHJvamV0cy1wZXJzby94ZXUvc2VydmVyL3JvdXRlcy9hcGkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBKV1RfRU5DUllQVElPTiB9IGZyb20gJ0BlbnYnXG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJ1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nXG5pbXBvcnQgcGFzc3BvcnQgZnJvbSAncGFzc3BvcnQnXG5cbi8vIGltcG9ydCB7IGFkZFVzZXJXb3Jrc3BhY2UgfSBmcm9tICdzZXJ2aWNlcy9zdG9yYWdlJ1xuaW1wb3J0IHsgc3VjY2VzcywgZXJyb3IgfSBmcm9tICdoZWxwZXJzL3Jlc3BvbnNlJ1xuaW1wb3J0IHsgQkFEX1JFUVVFU1QgfSBmcm9tICdjb25zdGFudHMvYXBpJ1xuXG5cblxuY29uc3QgYXBpID0gUm91dGVyKClcblxuLyoqIEFib3V0IFNpZ24tdXBcbiAqL1xuYXBpLnBvc3QoJy9yZWdpc3RlcicsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7XG4gICAgbmlja25hbWUsIGVtYWlsLCBwYXNzd29yZCwgcGFzc3dvcmRfY29uZmlybWF0aW9uLFxuICB9ID0gcmVxLmJvZHlcblxuXG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHtcbiAgICAgIG5pY2tuYW1lLFxuICAgICAgZW1haWwsXG4gICAgICBwYXNzd29yZCxcbiAgICAgIHBhc3N3b3JkX2NvbmZpcm1hdGlvbixcbiAgICB9KVxuXG4gICAgYXdhaXQgdXNlci5zYXZlKClcblxuICAgIGFkZFVzZXJXb3Jrc3BhY2UodXNlci51dWlkKS50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IHBheWxvYWQgPSB7IHV1aWQ6IHVzZXIudXVpZCwgbmlja25hbWUsIGVtYWlsIH1cbiAgICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24ocGF5bG9hZCwgSldUX0VOQ1JZUFRJT04pXG5cbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgXG4gICAgICAgIEhleSAke3VzZXIubmlja25hbWV9IVxuXG4gICAgICAgIFdlbGNvbWUgdG8gbXlTMyBzZXJ2aWNlcyDwn5iOXG4gICAgICBgXG5cbiAgICAgIE1haWwuc2VuZCh1c2VyLmVtYWlsLCAnV2VsY29tZScsIG1lc3NhZ2UsIGA8c3Bhbj4ke21lc3NhZ2V9PC9zcGFuPmApXG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbihzdWNjZXNzKHsgdXNlciB9LCB7IHRva2VuIH0pKVxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKGVycm9yKEJBRF9SRVFVRVNULCBlcnIubWVzc2FnZSkpXG4gIH1cbn0pXG5cbi8qKiBBYm91dCBMb2dpblxuICovXG5hcGkucG9zdCgnL2xvZ2luJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZSgnbG9jYWwnLCB7IHNlc3Npb246IGZhbHNlIH0sIChlcnIsIHVzZXIpID0+IHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oZXJyb3IoQkFEX1JFUVVFU1QsIGVycikpXG4gICAgfVxuXG4gICAgY29uc3QgeyB1dWlkLCBuaWNrbmFtZSwgZW1haWwgfSA9IHVzZXIudG9KU09OKClcblxuICAgIC8vIGdlbmVyYXRlIGEgc2lnbmVkIGpzb24gd2ViIHRva2VuIHdpdGggdGhlIGNvbnRlbnRzIG9mIHVzZXIgb2JqZWN0IGFuZFxuICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyB1dWlkLCBuaWNrbmFtZSwgZW1haWwgfSwgSldUX0VOQ1JZUFRJT04pXG5cbiAgICByZXR1cm4gcmVzLmpzb24oc3VjY2Vzcyh7IHVzZXIgfSwgeyB0b2tlbiB9KSlcbiAgfSkocmVxLCByZXMsIG5leHQpXG59KVxuXG5leHBvcnQgZGVmYXVsdCBhcGlcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "api",
        "post",
        "req",
        "res",
        "nickname",
        "email",
        "password",
        "password_confirmation",
        "body",
        "user",
        "User",
        "save",
        "addUserWorkspace",
        "uuid",
        "then",
        "payload",
        "token",
        "jwt",
        "sign",
        "message",
        "Mail",
        "send",
        "status",
        "json",
        "err",
        "BAD_REQUEST",
        "next",
        "passport",
        "authenticate",
        "session",
        "toJSON"
      ],
      "mappings": ";;;;;;;AACA;;AACA;;AACA;;AAGA;;AACA;;;;AAFA;AAMA,MAAMA,GAAG,GAAG,sBAAZ;AAEA;;;AAEAA,GAAG,CAACC,IAAJ,CAAS,WAAT,EAAsB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACxC,QAAM;AACJC,IAAAA,QADI;AACMC,IAAAA,KADN;AACaC,IAAAA,QADb;AACuBC,IAAAA;AADvB,MAEFL,GAAG,CAACM,IAFR;;AAKA,MAAI;AACF,UAAMC,IAAI,GAAG,IAAIC,IAAJ,CAAS;AACpBN,MAAAA,QADoB;AAEpBC,MAAAA,KAFoB;AAGpBC,MAAAA,QAHoB;AAIpBC,MAAAA;AAJoB,KAAT,CAAb;AAOA,UAAME,IAAI,CAACE,IAAL,EAAN;AAEAC,IAAAA,gBAAgB,CAACH,IAAI,CAACI,IAAN,CAAhB,CAA4BC,IAA5B,CAAiC,MAAM;AACrC,YAAMC,OAAO,GAAG;AAAEF,QAAAA,IAAI,EAAEJ,IAAI,CAACI,IAAb;AAAmBT,QAAAA,QAAnB;AAA6BC,QAAAA;AAA7B,OAAhB;;AACA,YAAMW,KAAK,GAAGC,sBAAIC,IAAJ,CAASH,OAAT,+CAAd;;AAEA,YAAMI,OAAO,GAAI;cACTV,IAAI,CAACL,QAAS;;;OADtB;AAMAgB,MAAAA,IAAI,CAACC,IAAL,CAAUZ,IAAI,CAACJ,KAAf,EAAsB,SAAtB,EAAiCc,OAAjC,EAA2C,SAAQA,OAAQ,SAA3D;AACAhB,MAAAA,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,uBAAQ;AAAEd,QAAAA;AAAF,OAAR,EAAkB;AAAEO,QAAAA;AAAF,OAAlB,CAArB;AACD,KAZD;AAaD,GAvBD,CAuBE,OAAOQ,GAAP,EAAY;AACZrB,IAAAA,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,qBAAME,gBAAN,EAAmBD,GAAG,CAACL,OAAvB,CAArB;AACD;AACF,CAhCD;AAkCA;;;AAEAnB,GAAG,CAACC,IAAJ,CAAS,QAAT,EAAmB,CAACC,GAAD,EAAMC,GAAN,EAAWuB,IAAX,KAAoB;AACrCC,oBAASC,YAAT,CAAsB,OAAtB,EAA+B;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAA/B,EAAmD,CAACL,GAAD,EAAMf,IAAN,KAAe;AAChE,QAAIe,GAAJ,EAAS;AACP,aAAOrB,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,qBAAME,gBAAN,EAAmBD,GAAnB,CAArB,CAAP;AACD;;AAED,UAAM;AAAEX,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,QAA4BI,IAAI,CAACqB,MAAL,EAAlC,CALgE,CAOhE;;AACA,UAAMd,KAAK,GAAGC,sBAAIC,IAAJ,CAAS;AAAEL,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,KAAT,+CAAd;;AAEA,WAAOF,GAAG,CAACoB,IAAJ,CAAS,uBAAQ;AAAEd,MAAAA;AAAF,KAAR,EAAkB;AAAEO,MAAAA;AAAF,KAAlB,CAAT,CAAP;AACD,GAXD,EAWGd,GAXH,EAWQC,GAXR,EAWauB,IAXb;AAYD,CAbD;eAee1B,G",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api",
      "sourcesContent": [
        "import { JWT_ENCRYPTION } from '@env'\nimport { Router } from 'express'\nimport jwt from 'jsonwebtoken'\nimport passport from 'passport'\n\n// import { addUserWorkspace } from 'services/storage'\nimport { success, error } from 'helpers/response'\nimport { BAD_REQUEST } from 'constants/api'\n\n\n\nconst api = Router()\n\n/** About Sign-up\n */\napi.post('/register', async (req, res) => {\n  const {\n    nickname, email, password, password_confirmation,\n  } = req.body\n\n\n  try {\n    const user = new User({\n      nickname,\n      email,\n      password,\n      password_confirmation,\n    })\n\n    await user.save()\n\n    addUserWorkspace(user.uuid).then(() => {\n      const payload = { uuid: user.uuid, nickname, email }\n      const token = jwt.sign(payload, JWT_ENCRYPTION)\n\n      const message = `\n        Hey ${user.nickname}!\n\n        Welcome to myS3 services \n      `\n\n      Mail.send(user.email, 'Welcome', message, `<span>${message}</span>`)\n      res.status(201).json(success({ user }, { token }))\n    })\n  } catch (err) {\n    res.status(400).json(error(BAD_REQUEST, err.message))\n  }\n})\n\n/** About Login\n */\napi.post('/login', (req, res, next) => {\n  passport.authenticate('local', { session: false }, (err, user) => {\n    if (err) {\n      return res.status(400).json(error(BAD_REQUEST, err))\n    }\n\n    const { uuid, nickname, email } = user.toJSON()\n\n    // generate a signed json web token with the contents of user object and\n    const token = jwt.sign({ uuid, nickname, email }, JWT_ENCRYPTION)\n\n    return res.json(success({ user }, { token }))\n  })(req, res, next)\n})\n\nexport default api\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554460792694
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants/api.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants/api.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants/api.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants/api.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants",
        "sourceFileName": "api.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.INTERNAL_ERROR = exports.BAD_REQUEST = void 0;\nconst BAD_REQUEST = {\n  status: 400,\n  code: 'BAD_REQUEST'\n};\nexports.BAD_REQUEST = BAD_REQUEST;\nconst INTERNAL_ERROR = {\n  status: 500,\n  code: 'BAD_REQUEST'\n};\nexports.INTERNAL_ERROR = INTERNAL_ERROR;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwaS5qcyJdLCJuYW1lcyI6WyJCQURfUkVRVUVTVCIsInN0YXR1cyIsImNvZGUiLCJJTlRFUk5BTF9FUlJPUiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU8sTUFBTUEsV0FBVyxHQUFHO0FBQ3pCQyxFQUFBQSxNQUFNLEVBQUUsR0FEaUI7QUFFekJDLEVBQUFBLElBQUksRUFBRTtBQUZtQixDQUFwQjs7QUFLQSxNQUFNQyxjQUFjLEdBQUc7QUFDNUJGLEVBQUFBLE1BQU0sRUFBRSxHQURvQjtBQUU1QkMsRUFBQUEsSUFBSSxFQUFFO0FBRnNCLENBQXZCIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9lZnJlaS1wYXJpcy9Eb2N1bWVudHMvUHJvamV0cy1wZXJzby94ZXUvc2VydmVyL2NvbnN0YW50cyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBCQURfUkVRVUVTVCA9IHtcbiAgc3RhdHVzOiA0MDAsXG4gIGNvZGU6ICdCQURfUkVRVUVTVCcsXG59XG5cbmV4cG9ydCBjb25zdCBJTlRFUk5BTF9FUlJPUiA9IHtcbiAgc3RhdHVzOiA1MDAsXG4gIGNvZGU6ICdCQURfUkVRVUVTVCcsXG59XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "api.js"
      ],
      "names": [
        "BAD_REQUEST",
        "status",
        "code",
        "INTERNAL_ERROR"
      ],
      "mappings": ";;;;;;AAAO,MAAMA,WAAW,GAAG;AACzBC,EAAAA,MAAM,EAAE,GADiB;AAEzBC,EAAAA,IAAI,EAAE;AAFmB,CAApB;;AAKA,MAAMC,cAAc,GAAG;AAC5BF,EAAAA,MAAM,EAAE,GADoB;AAE5BC,EAAAA,IAAI,EAAE;AAFsB,CAAvB",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants",
      "sourcesContent": [
        "export const BAD_REQUEST = {\n  status: 400,\n  code: 'BAD_REQUEST',\n}\n\nexport const INTERNAL_ERROR = {\n  status: 500,\n  code: 'BAD_REQUEST',\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554464996797
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants/api.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants/api.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants/api.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants/api.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants",
        "sourceFileName": "api.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.INTERNAL_ERROR = exports.BAD_REQUEST = void 0;\nconst BAD_REQUEST = {\n  status: 400,\n  code: 'BAD_REQUEST'\n};\nexports.BAD_REQUEST = BAD_REQUEST;\nconst INTERNAL_ERROR = {\n  status: 500,\n  code: 'BAD_REQUEST'\n};\nexports.INTERNAL_ERROR = INTERNAL_ERROR;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwaS5qcyJdLCJuYW1lcyI6WyJCQURfUkVRVUVTVCIsInN0YXR1cyIsImNvZGUiLCJJTlRFUk5BTF9FUlJPUiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU8sTUFBTUEsV0FBVyxHQUFHO0FBQ3pCQyxFQUFBQSxNQUFNLEVBQUUsR0FEaUI7QUFFekJDLEVBQUFBLElBQUksRUFBRTtBQUZtQixDQUFwQjs7QUFLQSxNQUFNQyxjQUFjLEdBQUc7QUFDNUJGLEVBQUFBLE1BQU0sRUFBRSxHQURvQjtBQUU1QkMsRUFBQUEsSUFBSSxFQUFFO0FBRnNCLENBQXZCIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9lZnJlaS1wYXJpcy9Eb2N1bWVudHMvUHJvamV0cy1wZXJzby94ZXUvc2VydmVyL2NvbnN0YW50cyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBCQURfUkVRVUVTVCA9IHtcbiAgc3RhdHVzOiA0MDAsXG4gIGNvZGU6ICdCQURfUkVRVUVTVCcsXG59XG5cbmV4cG9ydCBjb25zdCBJTlRFUk5BTF9FUlJPUiA9IHtcbiAgc3RhdHVzOiA1MDAsXG4gIGNvZGU6ICdCQURfUkVRVUVTVCcsXG59XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "api.js"
      ],
      "names": [
        "BAD_REQUEST",
        "status",
        "code",
        "INTERNAL_ERROR"
      ],
      "mappings": ";;;;;;AAAO,MAAMA,WAAW,GAAG;AACzBC,EAAAA,MAAM,EAAE,GADiB;AAEzBC,EAAAA,IAAI,EAAE;AAFmB,CAApB;;AAKA,MAAMC,cAAc,GAAG;AAC5BF,EAAAA,MAAM,EAAE,GADoB;AAE5BC,EAAAA,IAAI,EAAE;AAFsB,CAAvB",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants",
      "sourcesContent": [
        "export const BAD_REQUEST = {\n  status: 400,\n  code: 'BAD_REQUEST',\n}\n\nexport const INTERNAL_ERROR = {\n  status: 500,\n  code: 'BAD_REQUEST',\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554460729469
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/helpers\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/helpers/response.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/helpers",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/helpers/response.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/helpers/response.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/helpers/response.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/helpers",
        "sourceFileName": "response.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.success = success;\nexports.error = error;\n\nfunction success(resources, meta) {\n  return {\n    data: resources,\n    meta\n  };\n}\n\nfunction error({\n  status,\n  code\n}, fields, description = 'missing') {\n  return {\n    err: {\n      status,\n      code,\n      description,\n      fields\n    }\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3BvbnNlLmpzIl0sIm5hbWVzIjpbInN1Y2Nlc3MiLCJyZXNvdXJjZXMiLCJtZXRhIiwiZGF0YSIsImVycm9yIiwic3RhdHVzIiwiY29kZSIsImZpZWxkcyIsImRlc2NyaXB0aW9uIiwiZXJyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFPLFNBQVNBLE9BQVQsQ0FBaUJDLFNBQWpCLEVBQTRCQyxJQUE1QixFQUFrQztBQUN2QyxTQUFPO0FBQUVDLElBQUFBLElBQUksRUFBRUYsU0FBUjtBQUFtQkMsSUFBQUE7QUFBbkIsR0FBUDtBQUNEOztBQUVNLFNBQVNFLEtBQVQsQ0FBZTtBQUFFQyxFQUFBQSxNQUFGO0FBQVVDLEVBQUFBO0FBQVYsQ0FBZixFQUFpQ0MsTUFBakMsRUFBeUNDLFdBQVcsR0FBRyxTQUF2RCxFQUFrRTtBQUN2RSxTQUFPO0FBQ0xDLElBQUFBLEdBQUcsRUFBRTtBQUNISixNQUFBQSxNQURHO0FBRUhDLE1BQUFBLElBRkc7QUFHSEUsTUFBQUEsV0FIRztBQUlIRCxNQUFBQTtBQUpHO0FBREEsR0FBUDtBQVFEIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9lZnJlaS1wYXJpcy9Eb2N1bWVudHMvUHJvamV0cy1wZXJzby94ZXUvc2VydmVyL2hlbHBlcnMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gc3VjY2VzcyhyZXNvdXJjZXMsIG1ldGEpIHtcbiAgcmV0dXJuIHsgZGF0YTogcmVzb3VyY2VzLCBtZXRhIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVycm9yKHsgc3RhdHVzLCBjb2RlIH0sIGZpZWxkcywgZGVzY3JpcHRpb24gPSAnbWlzc2luZycpIHtcbiAgcmV0dXJuIHtcbiAgICBlcnI6IHtcbiAgICAgIHN0YXR1cyxcbiAgICAgIGNvZGUsXG4gICAgICBkZXNjcmlwdGlvbixcbiAgICAgIGZpZWxkcyxcbiAgICB9LFxuICB9XG59XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "response.js"
      ],
      "names": [
        "success",
        "resources",
        "meta",
        "data",
        "error",
        "status",
        "code",
        "fields",
        "description",
        "err"
      ],
      "mappings": ";;;;;;;;AAAO,SAASA,OAAT,CAAiBC,SAAjB,EAA4BC,IAA5B,EAAkC;AACvC,SAAO;AAAEC,IAAAA,IAAI,EAAEF,SAAR;AAAmBC,IAAAA;AAAnB,GAAP;AACD;;AAEM,SAASE,KAAT,CAAe;AAAEC,EAAAA,MAAF;AAAUC,EAAAA;AAAV,CAAf,EAAiCC,MAAjC,EAAyCC,WAAW,GAAG,SAAvD,EAAkE;AACvE,SAAO;AACLC,IAAAA,GAAG,EAAE;AACHJ,MAAAA,MADG;AAEHC,MAAAA,IAFG;AAGHE,MAAAA,WAHG;AAIHD,MAAAA;AAJG;AADA,GAAP;AAQD",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/helpers",
      "sourcesContent": [
        "export function success(resources, meta) {\n  return { data: resources, meta }\n}\n\nexport function error({ status, code }, fields, description = 'missing') {\n  return {\n    err: {\n      status,\n      code,\n      description,\n      fields,\n    },\n  }\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554464996798
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _users = _interopRequireDefault(require(\"./users\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import buckets from './buckets'\n// import blobs from './blobs'\nconst token = process.env.TOKEN;\nconst API_BASE = 'http://data.fixer.io/api/latest?access_key=';\nconst DEFAULT_VALUE = 'EUR';\nconst API_FIXER = `${API_BASE}${token}`;\nconst api = (0, _express.Router)({\n  mergeParams: true\n}); // a\\ users\n// api.use('/users', users)\n\napi.get('/xeu', (0, _cors.default)(), async (req, res) => {\n  const response = _axios.default.get(`${API_FIXER}&base=${DEFAULT_VALUE}&symbols=USD,TND,GBP,JPY,BOB`);\n\n  res.json(response.data);\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInRva2VuIiwicHJvY2VzcyIsImVudiIsIlRPS0VOIiwiQVBJX0JBU0UiLCJERUZBVUxUX1ZBTFVFIiwiQVBJX0ZJWEVSIiwiYXBpIiwibWVyZ2VQYXJhbXMiLCJnZXQiLCJyZXEiLCJyZXMiLCJyZXNwb25zZSIsImF4aW9zIiwianNvbiIsImRhdGEiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFFQTs7OztBQUNBO0FBQ0E7QUFFQSxNQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxLQUExQjtBQUNBLE1BQU1DLFFBQVEsR0FBRyw2Q0FBakI7QUFDQSxNQUFNQyxhQUFhLEdBQUcsS0FBdEI7QUFDQSxNQUFNQyxTQUFTLEdBQUksR0FBRUYsUUFBUyxHQUFFSixLQUFNLEVBQXRDO0FBRUEsTUFBTU8sR0FBRyxHQUFHLHFCQUFPO0FBQUVDLEVBQUFBLFdBQVcsRUFBRTtBQUFmLENBQVAsQ0FBWixDLENBRUE7QUFDQTs7QUFFQUQsR0FBRyxDQUFDRSxHQUFKLENBQVEsTUFBUixFQUFnQixvQkFBaEIsRUFBd0IsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQzFDLFFBQU1DLFFBQVEsR0FBR0MsZUFBTUosR0FBTixDQUFXLEdBQUVILFNBQVUsU0FBUUQsYUFBYyw4QkFBN0MsQ0FBakI7O0FBQ0FNLEVBQUFBLEdBQUcsQ0FBQ0csSUFBSixDQUFTRixRQUFRLENBQUNHLElBQWxCO0FBQ0QsQ0FIRDtlQUtlUixHIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9lZnJlaS1wYXJpcy9Eb2N1bWVudHMvUHJvamV0cy1wZXJzby94ZXUvc2VydmVyL3JvdXRlcy9hcGkvc2VjdXJlZCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnXG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJ1xuXG5pbXBvcnQgdXNlcnMgZnJvbSAnLi91c2Vycydcbi8vIGltcG9ydCBidWNrZXRzIGZyb20gJy4vYnVja2V0cydcbi8vIGltcG9ydCBibG9icyBmcm9tICcuL2Jsb2JzJ1xuXG5jb25zdCB0b2tlbiA9IHByb2Nlc3MuZW52LlRPS0VOXG5jb25zdCBBUElfQkFTRSA9ICdodHRwOi8vZGF0YS5maXhlci5pby9hcGkvbGF0ZXN0P2FjY2Vzc19rZXk9JztcbmNvbnN0IERFRkFVTFRfVkFMVUUgPSAnRVVSJ1xuY29uc3QgQVBJX0ZJWEVSID0gYCR7QVBJX0JBU0V9JHt0b2tlbn1gO1xuXG5jb25zdCBhcGkgPSBSb3V0ZXIoeyBtZXJnZVBhcmFtczogdHJ1ZSB9KVxuXG4vLyBhXFwgdXNlcnNcbi8vIGFwaS51c2UoJy91c2VycycsIHVzZXJzKVxuXG5hcGkuZ2V0KCcveGV1JywgY29ycygpLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBheGlvcy5nZXQoYCR7QVBJX0ZJWEVSfSZiYXNlPSR7REVGQVVMVF9WQUxVRX0mc3ltYm9scz1VU0QsVE5ELEdCUCxKUFksQk9CYClcbiAgcmVzLmpzb24ocmVzcG9uc2UuZGF0YSlcbn0pXG5cbmV4cG9ydCBkZWZhdWx0IGFwaVxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "token",
        "process",
        "env",
        "TOKEN",
        "API_BASE",
        "DEFAULT_VALUE",
        "API_FIXER",
        "api",
        "mergeParams",
        "get",
        "req",
        "res",
        "response",
        "axios",
        "json",
        "data"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AAEA;;;;AACA;AACA;AAEA,MAAMA,KAAK,GAAGC,OAAO,CAACC,GAAR,CAAYC,KAA1B;AACA,MAAMC,QAAQ,GAAG,6CAAjB;AACA,MAAMC,aAAa,GAAG,KAAtB;AACA,MAAMC,SAAS,GAAI,GAAEF,QAAS,GAAEJ,KAAM,EAAtC;AAEA,MAAMO,GAAG,GAAG,qBAAO;AAAEC,EAAAA,WAAW,EAAE;AAAf,CAAP,CAAZ,C,CAEA;AACA;;AAEAD,GAAG,CAACE,GAAJ,CAAQ,MAAR,EAAgB,oBAAhB,EAAwB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC1C,QAAMC,QAAQ,GAAGC,eAAMJ,GAAN,CAAW,GAAEH,SAAU,SAAQD,aAAc,8BAA7C,CAAjB;;AACAM,EAAAA,GAAG,CAACG,IAAJ,CAASF,QAAQ,CAACG,IAAlB;AACD,CAHD;eAKeR,G",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured",
      "sourcesContent": [
        "import { Router } from 'express'\nimport axios from 'axios'\nimport cors from 'cors'\n\nimport users from './users'\n// import buckets from './buckets'\n// import blobs from './blobs'\n\nconst token = process.env.TOKEN\nconst API_BASE = 'http://data.fixer.io/api/latest?access_key=';\nconst DEFAULT_VALUE = 'EUR'\nconst API_FIXER = `${API_BASE}${token}`;\n\nconst api = Router({ mergeParams: true })\n\n// a\\ users\n// api.use('/users', users)\n\napi.get('/xeu', cors(), async (req, res) => {\n  const response = axios.get(`${API_FIXER}&base=${DEFAULT_VALUE}&symbols=USD,TND,GBP,JPY,BOB`)\n  res.json(response.data)\n})\n\nexport default api\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554464996809
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured/users.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured/users.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured/users.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured/users.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured",
        "sourceFileName": "users.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _lodash = require(\"lodash\");\n\nvar _response = require(\"../../../helpers/response\");\n\nvar _api = require(\"../../../constants/api\");\n\n// import User from 'models/user'\nconst api = (0, _express.Router)();\napi.get('/:uuid', async (req, res) => {\n  try {\n    const user = await User.findOne({\n      where: {\n        uuid: req.params.uuid\n      }\n    });\n\n    if (user) {\n      res.json((0, _response.success)(user));\n    } else {\n      res.json((0, _response.error)(_api.BAD_REQUEST, `Oops, user ${req.params.uuid} doesn't exist`));\n    }\n  } catch (err) {\n    res.status(400).json((0, _response.error)(_api.BAD_REQUEST, err.message));\n  }\n});\napi.put('/:uuid', async (req, res) => {\n  try {\n    const user = await User.findOne({\n      where: {\n        uuid: req.params.uuid\n      }\n    });\n\n    if (user) {\n      const fields = (0, _lodash.pick)(req.body, ['nickname', 'email', 'password', 'password_confirmation']);\n      await user.update(fields);\n      res.status(204).end();\n    }\n  } catch (err) {\n    res.status(400).json((0, _response.error)(_api.BAD_REQUEST, err.message));\n  }\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbImFwaSIsImdldCIsInJlcSIsInJlcyIsInVzZXIiLCJVc2VyIiwiZmluZE9uZSIsIndoZXJlIiwidXVpZCIsInBhcmFtcyIsImpzb24iLCJCQURfUkVRVUVTVCIsImVyciIsInN0YXR1cyIsIm1lc3NhZ2UiLCJwdXQiLCJmaWVsZHMiLCJib2R5IiwidXBkYXRlIiwiZW5kIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7QUFFQSxNQUFNQSxHQUFHLEdBQUcsc0JBQVo7QUFFQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsUUFBUixFQUFrQixPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDcEMsTUFBSTtBQUNGLFVBQU1DLElBQUksR0FBRyxNQUFNQyxJQUFJLENBQUNDLE9BQUwsQ0FBYTtBQUFFQyxNQUFBQSxLQUFLLEVBQUU7QUFBRUMsUUFBQUEsSUFBSSxFQUFFTixHQUFHLENBQUNPLE1BQUosQ0FBV0Q7QUFBbkI7QUFBVCxLQUFiLENBQW5COztBQUVBLFFBQUlKLElBQUosRUFBVTtBQUNSRCxNQUFBQSxHQUFHLENBQUNPLElBQUosQ0FBUyx1QkFBUU4sSUFBUixDQUFUO0FBQ0QsS0FGRCxNQUVPO0FBQ0xELE1BQUFBLEdBQUcsQ0FBQ08sSUFBSixDQUFTLHFCQUFNQyxnQkFBTixFQUFvQixjQUFhVCxHQUFHLENBQUNPLE1BQUosQ0FBV0QsSUFBSyxnQkFBakQsQ0FBVDtBQUNEO0FBQ0YsR0FSRCxDQVFFLE9BQU9JLEdBQVAsRUFBWTtBQUNaVCxJQUFBQSxHQUFHLENBQUNVLE1BQUosQ0FBVyxHQUFYLEVBQWdCSCxJQUFoQixDQUFxQixxQkFBTUMsZ0JBQU4sRUFBbUJDLEdBQUcsQ0FBQ0UsT0FBdkIsQ0FBckI7QUFDRDtBQUNGLENBWkQ7QUFjQWQsR0FBRyxDQUFDZSxHQUFKLENBQVEsUUFBUixFQUFrQixPQUFPYixHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDcEMsTUFBSTtBQUNGLFVBQU1DLElBQUksR0FBRyxNQUFNQyxJQUFJLENBQUNDLE9BQUwsQ0FBYTtBQUFFQyxNQUFBQSxLQUFLLEVBQUU7QUFBRUMsUUFBQUEsSUFBSSxFQUFFTixHQUFHLENBQUNPLE1BQUosQ0FBV0Q7QUFBbkI7QUFBVCxLQUFiLENBQW5COztBQUVBLFFBQUlKLElBQUosRUFBVTtBQUNSLFlBQU1ZLE1BQU0sR0FBRyxrQkFBS2QsR0FBRyxDQUFDZSxJQUFULEVBQWUsQ0FBQyxVQUFELEVBQWEsT0FBYixFQUFzQixVQUF0QixFQUFrQyx1QkFBbEMsQ0FBZixDQUFmO0FBRUEsWUFBTWIsSUFBSSxDQUFDYyxNQUFMLENBQVlGLE1BQVosQ0FBTjtBQUVBYixNQUFBQSxHQUFHLENBQUNVLE1BQUosQ0FBVyxHQUFYLEVBQWdCTSxHQUFoQjtBQUNEO0FBQ0YsR0FWRCxDQVVFLE9BQU9QLEdBQVAsRUFBWTtBQUNaVCxJQUFBQSxHQUFHLENBQUNVLE1BQUosQ0FBVyxHQUFYLEVBQWdCSCxJQUFoQixDQUFxQixxQkFBTUMsZ0JBQU4sRUFBbUJDLEdBQUcsQ0FBQ0UsT0FBdkIsQ0FBckI7QUFDRDtBQUNGLENBZEQ7ZUFnQmVkLEciLCJzb3VyY2VSb290IjoiL1VzZXJzL2VmcmVpLXBhcmlzL0RvY3VtZW50cy9Qcm9qZXRzLXBlcnNvL3hldS9zZXJ2ZXIvcm91dGVzL2FwaS9zZWN1cmVkIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcydcbmltcG9ydCB7IHBpY2sgfSBmcm9tICdsb2Rhc2gnXG5pbXBvcnQgeyBzdWNjZXNzLCBlcnJvciB9IGZyb20gJ2hlbHBlcnMvcmVzcG9uc2UnXG5pbXBvcnQgeyBCQURfUkVRVUVTVCB9IGZyb20gJ2NvbnN0YW50cy9hcGknXG4vLyBpbXBvcnQgVXNlciBmcm9tICdtb2RlbHMvdXNlcidcblxuY29uc3QgYXBpID0gUm91dGVyKClcblxuYXBpLmdldCgnLzp1dWlkJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHdoZXJlOiB7IHV1aWQ6IHJlcS5wYXJhbXMudXVpZCB9IH0pXG5cbiAgICBpZiAodXNlcikge1xuICAgICAgcmVzLmpzb24oc3VjY2Vzcyh1c2VyKSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLmpzb24oZXJyb3IoQkFEX1JFUVVFU1QsIGBPb3BzLCB1c2VyICR7cmVxLnBhcmFtcy51dWlkfSBkb2Vzbid0IGV4aXN0YCkpXG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXMuc3RhdHVzKDQwMCkuanNvbihlcnJvcihCQURfUkVRVUVTVCwgZXJyLm1lc3NhZ2UpKVxuICB9XG59KVxuXG5hcGkucHV0KCcvOnV1aWQnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgd2hlcmU6IHsgdXVpZDogcmVxLnBhcmFtcy51dWlkIH0gfSlcblxuICAgIGlmICh1c2VyKSB7XG4gICAgICBjb25zdCBmaWVsZHMgPSBwaWNrKHJlcS5ib2R5LCBbJ25pY2tuYW1lJywgJ2VtYWlsJywgJ3Bhc3N3b3JkJywgJ3Bhc3N3b3JkX2NvbmZpcm1hdGlvbiddKVxuXG4gICAgICBhd2FpdCB1c2VyLnVwZGF0ZShmaWVsZHMpXG5cbiAgICAgIHJlcy5zdGF0dXMoMjA0KS5lbmQoKVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmVzLnN0YXR1cyg0MDApLmpzb24oZXJyb3IoQkFEX1JFUVVFU1QsIGVyci5tZXNzYWdlKSlcbiAgfVxufSlcblxuZXhwb3J0IGRlZmF1bHQgYXBpXG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "users.js"
      ],
      "names": [
        "api",
        "get",
        "req",
        "res",
        "user",
        "User",
        "findOne",
        "where",
        "uuid",
        "params",
        "json",
        "BAD_REQUEST",
        "err",
        "status",
        "message",
        "put",
        "fields",
        "body",
        "update",
        "end"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,QAAR,EAAkB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACpC,MAAI;AACF,UAAMC,IAAI,GAAG,MAAMC,IAAI,CAACC,OAAL,CAAa;AAAEC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,IAAI,EAAEN,GAAG,CAACO,MAAJ,CAAWD;AAAnB;AAAT,KAAb,CAAnB;;AAEA,QAAIJ,IAAJ,EAAU;AACRD,MAAAA,GAAG,CAACO,IAAJ,CAAS,uBAAQN,IAAR,CAAT;AACD,KAFD,MAEO;AACLD,MAAAA,GAAG,CAACO,IAAJ,CAAS,qBAAMC,gBAAN,EAAoB,cAAaT,GAAG,CAACO,MAAJ,CAAWD,IAAK,gBAAjD,CAAT;AACD;AACF,GARD,CAQE,OAAOI,GAAP,EAAY;AACZT,IAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBH,IAAhB,CAAqB,qBAAMC,gBAAN,EAAmBC,GAAG,CAACE,OAAvB,CAArB;AACD;AACF,CAZD;AAcAd,GAAG,CAACe,GAAJ,CAAQ,QAAR,EAAkB,OAAOb,GAAP,EAAYC,GAAZ,KAAoB;AACpC,MAAI;AACF,UAAMC,IAAI,GAAG,MAAMC,IAAI,CAACC,OAAL,CAAa;AAAEC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,IAAI,EAAEN,GAAG,CAACO,MAAJ,CAAWD;AAAnB;AAAT,KAAb,CAAnB;;AAEA,QAAIJ,IAAJ,EAAU;AACR,YAAMY,MAAM,GAAG,kBAAKd,GAAG,CAACe,IAAT,EAAe,CAAC,UAAD,EAAa,OAAb,EAAsB,UAAtB,EAAkC,uBAAlC,CAAf,CAAf;AAEA,YAAMb,IAAI,CAACc,MAAL,CAAYF,MAAZ,CAAN;AAEAb,MAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBM,GAAhB;AACD;AACF,GAVD,CAUE,OAAOP,GAAP,EAAY;AACZT,IAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBH,IAAhB,CAAqB,qBAAMC,gBAAN,EAAmBC,GAAG,CAACE,OAAvB,CAArB;AACD;AACF,CAdD;eAgBed,G",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured",
      "sourcesContent": [
        "import { Router } from 'express'\nimport { pick } from 'lodash'\nimport { success, error } from 'helpers/response'\nimport { BAD_REQUEST } from 'constants/api'\n// import User from 'models/user'\n\nconst api = Router()\n\napi.get('/:uuid', async (req, res) => {\n  try {\n    const user = await User.findOne({ where: { uuid: req.params.uuid } })\n\n    if (user) {\n      res.json(success(user))\n    } else {\n      res.json(error(BAD_REQUEST, `Oops, user ${req.params.uuid} doesn't exist`))\n    }\n  } catch (err) {\n    res.status(400).json(error(BAD_REQUEST, err.message))\n  }\n})\n\napi.put('/:uuid', async (req, res) => {\n  try {\n    const user = await User.findOne({ where: { uuid: req.params.uuid } })\n\n    if (user) {\n      const fields = pick(req.body, ['nickname', 'email', 'password', 'password_confirmation'])\n\n      await user.update(fields)\n\n      res.status(204).end()\n    }\n  } catch (err) {\n    res.status(400).json(error(BAD_REQUEST, err.message))\n  }\n})\n\nexport default api\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554464996809
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/helpers\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/helpers/response.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/helpers",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/helpers/response.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/helpers/response.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/helpers/response.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/helpers",
        "sourceFileName": "response.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.success = success;\nexports.error = error;\n\nfunction success(resources, meta) {\n  return {\n    data: resources,\n    meta\n  };\n}\n\nfunction error({\n  status,\n  code\n}, fields, description = 'missing') {\n  return {\n    err: {\n      status,\n      code,\n      description,\n      fields\n    }\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3BvbnNlLmpzIl0sIm5hbWVzIjpbInN1Y2Nlc3MiLCJyZXNvdXJjZXMiLCJtZXRhIiwiZGF0YSIsImVycm9yIiwic3RhdHVzIiwiY29kZSIsImZpZWxkcyIsImRlc2NyaXB0aW9uIiwiZXJyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFPLFNBQVNBLE9BQVQsQ0FBaUJDLFNBQWpCLEVBQTRCQyxJQUE1QixFQUFrQztBQUN2QyxTQUFPO0FBQUVDLElBQUFBLElBQUksRUFBRUYsU0FBUjtBQUFtQkMsSUFBQUE7QUFBbkIsR0FBUDtBQUNEOztBQUVNLFNBQVNFLEtBQVQsQ0FBZTtBQUFFQyxFQUFBQSxNQUFGO0FBQVVDLEVBQUFBO0FBQVYsQ0FBZixFQUFpQ0MsTUFBakMsRUFBeUNDLFdBQVcsR0FBRyxTQUF2RCxFQUFrRTtBQUN2RSxTQUFPO0FBQ0xDLElBQUFBLEdBQUcsRUFBRTtBQUNISixNQUFBQSxNQURHO0FBRUhDLE1BQUFBLElBRkc7QUFHSEUsTUFBQUEsV0FIRztBQUlIRCxNQUFBQTtBQUpHO0FBREEsR0FBUDtBQVFEIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9lZnJlaS1wYXJpcy9Eb2N1bWVudHMvUHJvamV0cy1wZXJzby94ZXUvc2VydmVyL2hlbHBlcnMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gc3VjY2VzcyhyZXNvdXJjZXMsIG1ldGEpIHtcbiAgcmV0dXJuIHsgZGF0YTogcmVzb3VyY2VzLCBtZXRhIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVycm9yKHsgc3RhdHVzLCBjb2RlIH0sIGZpZWxkcywgZGVzY3JpcHRpb24gPSAnbWlzc2luZycpIHtcbiAgcmV0dXJuIHtcbiAgICBlcnI6IHtcbiAgICAgIHN0YXR1cyxcbiAgICAgIGNvZGUsXG4gICAgICBkZXNjcmlwdGlvbixcbiAgICAgIGZpZWxkcyxcbiAgICB9LFxuICB9XG59XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "response.js"
      ],
      "names": [
        "success",
        "resources",
        "meta",
        "data",
        "error",
        "status",
        "code",
        "fields",
        "description",
        "err"
      ],
      "mappings": ";;;;;;;;AAAO,SAASA,OAAT,CAAiBC,SAAjB,EAA4BC,IAA5B,EAAkC;AACvC,SAAO;AAAEC,IAAAA,IAAI,EAAEF,SAAR;AAAmBC,IAAAA;AAAnB,GAAP;AACD;;AAEM,SAASE,KAAT,CAAe;AAAEC,EAAAA,MAAF;AAAUC,EAAAA;AAAV,CAAf,EAAiCC,MAAjC,EAAyCC,WAAW,GAAG,SAAvD,EAAkE;AACvE,SAAO;AACLC,IAAAA,GAAG,EAAE;AACHJ,MAAAA,MADG;AAEHC,MAAAA,IAFG;AAGHE,MAAAA,WAHG;AAIHD,MAAAA;AAJG;AADA,GAAP;AAQD",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/helpers",
      "sourcesContent": [
        "export function success(resources, meta) {\n  return { data: resources, meta }\n}\n\nexport function error({ status, code }, fields, description = 'missing') {\n  return {\n    err: {\n      status,\n      code,\n      description,\n      fields,\n    },\n  }\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554460757479
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _users = _interopRequireDefault(require(\"./users\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import buckets from './buckets'\n// import blobs from './blobs'\nconst token = process.env.TOKEN;\nconst API_BASE = 'http://data.fixer.io/api/latest?access_key=';\nconst DEFAULT_VALUE = 'EUR';\nconst API_FIXER = `${API_BASE}${token}`;\nconst api = (0, _express.Router)({\n  mergeParams: true\n}); // a\\ users\n// api.use('/users', users)\n\napi.get('/xeu', (0, _cors.default)(), async (req, res) => {\n  const response = _axios.default.get(`${API_FIXER}&base=${DEFAULT_VALUE}&symbols=USD,TND,GBP,JPY,BOB`);\n\n  res.json(response.data);\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInRva2VuIiwicHJvY2VzcyIsImVudiIsIlRPS0VOIiwiQVBJX0JBU0UiLCJERUZBVUxUX1ZBTFVFIiwiQVBJX0ZJWEVSIiwiYXBpIiwibWVyZ2VQYXJhbXMiLCJnZXQiLCJyZXEiLCJyZXMiLCJyZXNwb25zZSIsImF4aW9zIiwianNvbiIsImRhdGEiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFFQTs7OztBQUNBO0FBQ0E7QUFFQSxNQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxLQUExQjtBQUNBLE1BQU1DLFFBQVEsR0FBRyw2Q0FBakI7QUFDQSxNQUFNQyxhQUFhLEdBQUcsS0FBdEI7QUFDQSxNQUFNQyxTQUFTLEdBQUksR0FBRUYsUUFBUyxHQUFFSixLQUFNLEVBQXRDO0FBRUEsTUFBTU8sR0FBRyxHQUFHLHFCQUFPO0FBQUVDLEVBQUFBLFdBQVcsRUFBRTtBQUFmLENBQVAsQ0FBWixDLENBRUE7QUFDQTs7QUFFQUQsR0FBRyxDQUFDRSxHQUFKLENBQVEsTUFBUixFQUFnQixvQkFBaEIsRUFBd0IsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQzFDLFFBQU1DLFFBQVEsR0FBR0MsZUFBTUosR0FBTixDQUFXLEdBQUVILFNBQVUsU0FBUUQsYUFBYyw4QkFBN0MsQ0FBakI7O0FBQ0FNLEVBQUFBLEdBQUcsQ0FBQ0csSUFBSixDQUFTRixRQUFRLENBQUNHLElBQWxCO0FBQ0QsQ0FIRDtlQUtlUixHIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9lZnJlaS1wYXJpcy9Eb2N1bWVudHMvUHJvamV0cy1wZXJzby94ZXUvc2VydmVyL3JvdXRlcy9hcGkvc2VjdXJlZCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnXG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJ1xuXG5pbXBvcnQgdXNlcnMgZnJvbSAnLi91c2Vycydcbi8vIGltcG9ydCBidWNrZXRzIGZyb20gJy4vYnVja2V0cydcbi8vIGltcG9ydCBibG9icyBmcm9tICcuL2Jsb2JzJ1xuXG5jb25zdCB0b2tlbiA9IHByb2Nlc3MuZW52LlRPS0VOXG5jb25zdCBBUElfQkFTRSA9ICdodHRwOi8vZGF0YS5maXhlci5pby9hcGkvbGF0ZXN0P2FjY2Vzc19rZXk9JztcbmNvbnN0IERFRkFVTFRfVkFMVUUgPSAnRVVSJ1xuY29uc3QgQVBJX0ZJWEVSID0gYCR7QVBJX0JBU0V9JHt0b2tlbn1gO1xuXG5jb25zdCBhcGkgPSBSb3V0ZXIoeyBtZXJnZVBhcmFtczogdHJ1ZSB9KVxuXG4vLyBhXFwgdXNlcnNcbi8vIGFwaS51c2UoJy91c2VycycsIHVzZXJzKVxuXG5hcGkuZ2V0KCcveGV1JywgY29ycygpLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBheGlvcy5nZXQoYCR7QVBJX0ZJWEVSfSZiYXNlPSR7REVGQVVMVF9WQUxVRX0mc3ltYm9scz1VU0QsVE5ELEdCUCxKUFksQk9CYClcbiAgcmVzLmpzb24ocmVzcG9uc2UuZGF0YSlcbn0pXG5cbmV4cG9ydCBkZWZhdWx0IGFwaVxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "token",
        "process",
        "env",
        "TOKEN",
        "API_BASE",
        "DEFAULT_VALUE",
        "API_FIXER",
        "api",
        "mergeParams",
        "get",
        "req",
        "res",
        "response",
        "axios",
        "json",
        "data"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AAEA;;;;AACA;AACA;AAEA,MAAMA,KAAK,GAAGC,OAAO,CAACC,GAAR,CAAYC,KAA1B;AACA,MAAMC,QAAQ,GAAG,6CAAjB;AACA,MAAMC,aAAa,GAAG,KAAtB;AACA,MAAMC,SAAS,GAAI,GAAEF,QAAS,GAAEJ,KAAM,EAAtC;AAEA,MAAMO,GAAG,GAAG,qBAAO;AAAEC,EAAAA,WAAW,EAAE;AAAf,CAAP,CAAZ,C,CAEA;AACA;;AAEAD,GAAG,CAACE,GAAJ,CAAQ,MAAR,EAAgB,oBAAhB,EAAwB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC1C,QAAMC,QAAQ,GAAGC,eAAMJ,GAAN,CAAW,GAAEH,SAAU,SAAQD,aAAc,8BAA7C,CAAjB;;AACAM,EAAAA,GAAG,CAACG,IAAJ,CAASF,QAAQ,CAACG,IAAlB;AACD,CAHD;eAKeR,G",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured",
      "sourcesContent": [
        "import { Router } from 'express'\nimport axios from 'axios'\nimport cors from 'cors'\n\nimport users from './users'\n// import buckets from './buckets'\n// import blobs from './blobs'\n\nconst token = process.env.TOKEN\nconst API_BASE = 'http://data.fixer.io/api/latest?access_key=';\nconst DEFAULT_VALUE = 'EUR'\nconst API_FIXER = `${API_BASE}${token}`;\n\nconst api = Router({ mergeParams: true })\n\n// a\\ users\n// api.use('/users', users)\n\napi.get('/xeu', cors(), async (req, res) => {\n  const response = axios.get(`${API_FIXER}&base=${DEFAULT_VALUE}&symbols=USD,TND,GBP,JPY,BOB`)\n  res.json(response.data)\n})\n\nexport default api\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554462501008
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured/users.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured/users.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured/users.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured/users.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured",
        "sourceFileName": "users.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _lodash = require(\"lodash\");\n\nvar _response = require(\"../../../helpers/response\");\n\nvar _api = require(\"../../../constants/api\");\n\n// import User from 'models/user'\nconst api = (0, _express.Router)();\napi.get('/:uuid', async (req, res) => {\n  try {\n    const user = await User.findOne({\n      where: {\n        uuid: req.params.uuid\n      }\n    });\n\n    if (user) {\n      res.json((0, _response.success)(user));\n    } else {\n      res.json((0, _response.error)(_api.BAD_REQUEST, `Oops, user ${req.params.uuid} doesn't exist`));\n    }\n  } catch (err) {\n    res.status(400).json((0, _response.error)(_api.BAD_REQUEST, err.message));\n  }\n});\napi.put('/:uuid', async (req, res) => {\n  try {\n    const user = await User.findOne({\n      where: {\n        uuid: req.params.uuid\n      }\n    });\n\n    if (user) {\n      const fields = (0, _lodash.pick)(req.body, ['nickname', 'email', 'password', 'password_confirmation']);\n      await user.update(fields);\n      res.status(204).end();\n    }\n  } catch (err) {\n    res.status(400).json((0, _response.error)(_api.BAD_REQUEST, err.message));\n  }\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbImFwaSIsImdldCIsInJlcSIsInJlcyIsInVzZXIiLCJVc2VyIiwiZmluZE9uZSIsIndoZXJlIiwidXVpZCIsInBhcmFtcyIsImpzb24iLCJCQURfUkVRVUVTVCIsImVyciIsInN0YXR1cyIsIm1lc3NhZ2UiLCJwdXQiLCJmaWVsZHMiLCJib2R5IiwidXBkYXRlIiwiZW5kIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7QUFFQSxNQUFNQSxHQUFHLEdBQUcsc0JBQVo7QUFFQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsUUFBUixFQUFrQixPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDcEMsTUFBSTtBQUNGLFVBQU1DLElBQUksR0FBRyxNQUFNQyxJQUFJLENBQUNDLE9BQUwsQ0FBYTtBQUFFQyxNQUFBQSxLQUFLLEVBQUU7QUFBRUMsUUFBQUEsSUFBSSxFQUFFTixHQUFHLENBQUNPLE1BQUosQ0FBV0Q7QUFBbkI7QUFBVCxLQUFiLENBQW5COztBQUVBLFFBQUlKLElBQUosRUFBVTtBQUNSRCxNQUFBQSxHQUFHLENBQUNPLElBQUosQ0FBUyx1QkFBUU4sSUFBUixDQUFUO0FBQ0QsS0FGRCxNQUVPO0FBQ0xELE1BQUFBLEdBQUcsQ0FBQ08sSUFBSixDQUFTLHFCQUFNQyxnQkFBTixFQUFvQixjQUFhVCxHQUFHLENBQUNPLE1BQUosQ0FBV0QsSUFBSyxnQkFBakQsQ0FBVDtBQUNEO0FBQ0YsR0FSRCxDQVFFLE9BQU9JLEdBQVAsRUFBWTtBQUNaVCxJQUFBQSxHQUFHLENBQUNVLE1BQUosQ0FBVyxHQUFYLEVBQWdCSCxJQUFoQixDQUFxQixxQkFBTUMsZ0JBQU4sRUFBbUJDLEdBQUcsQ0FBQ0UsT0FBdkIsQ0FBckI7QUFDRDtBQUNGLENBWkQ7QUFjQWQsR0FBRyxDQUFDZSxHQUFKLENBQVEsUUFBUixFQUFrQixPQUFPYixHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDcEMsTUFBSTtBQUNGLFVBQU1DLElBQUksR0FBRyxNQUFNQyxJQUFJLENBQUNDLE9BQUwsQ0FBYTtBQUFFQyxNQUFBQSxLQUFLLEVBQUU7QUFBRUMsUUFBQUEsSUFBSSxFQUFFTixHQUFHLENBQUNPLE1BQUosQ0FBV0Q7QUFBbkI7QUFBVCxLQUFiLENBQW5COztBQUVBLFFBQUlKLElBQUosRUFBVTtBQUNSLFlBQU1ZLE1BQU0sR0FBRyxrQkFBS2QsR0FBRyxDQUFDZSxJQUFULEVBQWUsQ0FBQyxVQUFELEVBQWEsT0FBYixFQUFzQixVQUF0QixFQUFrQyx1QkFBbEMsQ0FBZixDQUFmO0FBRUEsWUFBTWIsSUFBSSxDQUFDYyxNQUFMLENBQVlGLE1BQVosQ0FBTjtBQUVBYixNQUFBQSxHQUFHLENBQUNVLE1BQUosQ0FBVyxHQUFYLEVBQWdCTSxHQUFoQjtBQUNEO0FBQ0YsR0FWRCxDQVVFLE9BQU9QLEdBQVAsRUFBWTtBQUNaVCxJQUFBQSxHQUFHLENBQUNVLE1BQUosQ0FBVyxHQUFYLEVBQWdCSCxJQUFoQixDQUFxQixxQkFBTUMsZ0JBQU4sRUFBbUJDLEdBQUcsQ0FBQ0UsT0FBdkIsQ0FBckI7QUFDRDtBQUNGLENBZEQ7ZUFnQmVkLEciLCJzb3VyY2VSb290IjoiL1VzZXJzL2VmcmVpLXBhcmlzL0RvY3VtZW50cy9Qcm9qZXRzLXBlcnNvL3hldS9zZXJ2ZXIvcm91dGVzL2FwaS9zZWN1cmVkIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcydcbmltcG9ydCB7IHBpY2sgfSBmcm9tICdsb2Rhc2gnXG5pbXBvcnQgeyBzdWNjZXNzLCBlcnJvciB9IGZyb20gJ2hlbHBlcnMvcmVzcG9uc2UnXG5pbXBvcnQgeyBCQURfUkVRVUVTVCB9IGZyb20gJ2NvbnN0YW50cy9hcGknXG4vLyBpbXBvcnQgVXNlciBmcm9tICdtb2RlbHMvdXNlcidcblxuY29uc3QgYXBpID0gUm91dGVyKClcblxuYXBpLmdldCgnLzp1dWlkJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHdoZXJlOiB7IHV1aWQ6IHJlcS5wYXJhbXMudXVpZCB9IH0pXG5cbiAgICBpZiAodXNlcikge1xuICAgICAgcmVzLmpzb24oc3VjY2Vzcyh1c2VyKSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLmpzb24oZXJyb3IoQkFEX1JFUVVFU1QsIGBPb3BzLCB1c2VyICR7cmVxLnBhcmFtcy51dWlkfSBkb2Vzbid0IGV4aXN0YCkpXG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXMuc3RhdHVzKDQwMCkuanNvbihlcnJvcihCQURfUkVRVUVTVCwgZXJyLm1lc3NhZ2UpKVxuICB9XG59KVxuXG5hcGkucHV0KCcvOnV1aWQnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgd2hlcmU6IHsgdXVpZDogcmVxLnBhcmFtcy51dWlkIH0gfSlcblxuICAgIGlmICh1c2VyKSB7XG4gICAgICBjb25zdCBmaWVsZHMgPSBwaWNrKHJlcS5ib2R5LCBbJ25pY2tuYW1lJywgJ2VtYWlsJywgJ3Bhc3N3b3JkJywgJ3Bhc3N3b3JkX2NvbmZpcm1hdGlvbiddKVxuXG4gICAgICBhd2FpdCB1c2VyLnVwZGF0ZShmaWVsZHMpXG5cbiAgICAgIHJlcy5zdGF0dXMoMjA0KS5lbmQoKVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmVzLnN0YXR1cyg0MDApLmpzb24oZXJyb3IoQkFEX1JFUVVFU1QsIGVyci5tZXNzYWdlKSlcbiAgfVxufSlcblxuZXhwb3J0IGRlZmF1bHQgYXBpXG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "users.js"
      ],
      "names": [
        "api",
        "get",
        "req",
        "res",
        "user",
        "User",
        "findOne",
        "where",
        "uuid",
        "params",
        "json",
        "BAD_REQUEST",
        "err",
        "status",
        "message",
        "put",
        "fields",
        "body",
        "update",
        "end"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,QAAR,EAAkB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACpC,MAAI;AACF,UAAMC,IAAI,GAAG,MAAMC,IAAI,CAACC,OAAL,CAAa;AAAEC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,IAAI,EAAEN,GAAG,CAACO,MAAJ,CAAWD;AAAnB;AAAT,KAAb,CAAnB;;AAEA,QAAIJ,IAAJ,EAAU;AACRD,MAAAA,GAAG,CAACO,IAAJ,CAAS,uBAAQN,IAAR,CAAT;AACD,KAFD,MAEO;AACLD,MAAAA,GAAG,CAACO,IAAJ,CAAS,qBAAMC,gBAAN,EAAoB,cAAaT,GAAG,CAACO,MAAJ,CAAWD,IAAK,gBAAjD,CAAT;AACD;AACF,GARD,CAQE,OAAOI,GAAP,EAAY;AACZT,IAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBH,IAAhB,CAAqB,qBAAMC,gBAAN,EAAmBC,GAAG,CAACE,OAAvB,CAArB;AACD;AACF,CAZD;AAcAd,GAAG,CAACe,GAAJ,CAAQ,QAAR,EAAkB,OAAOb,GAAP,EAAYC,GAAZ,KAAoB;AACpC,MAAI;AACF,UAAMC,IAAI,GAAG,MAAMC,IAAI,CAACC,OAAL,CAAa;AAAEC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,IAAI,EAAEN,GAAG,CAACO,MAAJ,CAAWD;AAAnB;AAAT,KAAb,CAAnB;;AAEA,QAAIJ,IAAJ,EAAU;AACR,YAAMY,MAAM,GAAG,kBAAKd,GAAG,CAACe,IAAT,EAAe,CAAC,UAAD,EAAa,OAAb,EAAsB,UAAtB,EAAkC,uBAAlC,CAAf,CAAf;AAEA,YAAMb,IAAI,CAACc,MAAL,CAAYF,MAAZ,CAAN;AAEAb,MAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBM,GAAhB;AACD;AACF,GAVD,CAUE,OAAOP,GAAP,EAAY;AACZT,IAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBH,IAAhB,CAAqB,qBAAMC,gBAAN,EAAmBC,GAAG,CAACE,OAAvB,CAArB;AACD;AACF,CAdD;eAgBed,G",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/routes/api/secured",
      "sourcesContent": [
        "import { Router } from 'express'\nimport { pick } from 'lodash'\nimport { success, error } from 'helpers/response'\nimport { BAD_REQUEST } from 'constants/api'\n// import User from 'models/user'\n\nconst api = Router()\n\napi.get('/:uuid', async (req, res) => {\n  try {\n    const user = await User.findOne({ where: { uuid: req.params.uuid } })\n\n    if (user) {\n      res.json(success(user))\n    } else {\n      res.json(error(BAD_REQUEST, `Oops, user ${req.params.uuid} doesn't exist`))\n    }\n  } catch (err) {\n    res.status(400).json(error(BAD_REQUEST, err.message))\n  }\n})\n\napi.put('/:uuid', async (req, res) => {\n  try {\n    const user = await User.findOne({ where: { uuid: req.params.uuid } })\n\n    if (user) {\n      const fields = pick(req.body, ['nickname', 'email', 'password', 'password_confirmation'])\n\n      await user.update(fields)\n\n      res.status(204).end()\n    }\n  } catch (err) {\n    res.status(400).json(error(BAD_REQUEST, err.message))\n  }\n})\n\nexport default api\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554462362501
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/middleware\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/middleware/passport.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/middleware",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/middleware/passport.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/middleware/passport.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/middleware/passport.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/middleware",
        "sourceFileName": "passport.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _passportLocal = require(\"passport-local\");\n\nvar _passportJwt = require(\"passport-jwt\");\n\nvar _validation = require(\"../constants/validation\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import User from '../models/user'\n_passport.default.use(new _passportLocal.Strategy({\n  usernameField: 'nickname',\n  passwordField: 'password'\n}, async (nickname, password, done) => {\n  try {\n    const user = await User.findOne({\n      where: {\n        nickname\n      }\n    });\n\n    if (!user) {\n      return done(_validation.USER.NICKNAME.INCORRECT_MESSAGE);\n    }\n\n    if (!(await user.checkPassword(password))) {\n      return done(_validation.USER.PASSWORD.INCORRECT_MESSAGE);\n    } // the returned user object is pre-formatted and ready for storing in JWT\n\n\n    return done(false, user);\n  } catch (err) {\n    // set error true to let passport 'verified' function to call error\n    return done('Something is not right');\n  }\n})); // Middleware that handle protected requests\n// Allows only requests with valid tokens to access some special routes needing authentication\n\n\n_passport.default.use(new _passportJwt.Strategy({\n  jwtFromRequest: _passportJwt.ExtractJwt.fromAuthHeaderAsBearerToken(),\n  secretOrKey: \"*z)KP2L6IMdJ&geoZ,HfEn-zymAg84T1qrR;tXx9MH\"\n}, async (jwtPayload, done) => {\n  // find the user in db using uuid\n  try {\n    const user = await User.findOne({\n      where: {\n        uuid: jwtPayload.uuid\n      }\n    });\n\n    if (user) {\n      return done(null, user);\n    }\n\n    return done(_validation.USER.NOT_EXIST_MESSAGE);\n  } catch (err) {\n    return done(err);\n  }\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3Nwb3J0LmpzIl0sIm5hbWVzIjpbInBhc3Nwb3J0IiwidXNlIiwiTG9jYWxTdHJhdGVneSIsInVzZXJuYW1lRmllbGQiLCJwYXNzd29yZEZpZWxkIiwibmlja25hbWUiLCJwYXNzd29yZCIsImRvbmUiLCJ1c2VyIiwiVXNlciIsImZpbmRPbmUiLCJ3aGVyZSIsIlVTRVIiLCJOSUNLTkFNRSIsIklOQ09SUkVDVF9NRVNTQUdFIiwiY2hlY2tQYXNzd29yZCIsIlBBU1NXT1JEIiwiZXJyIiwiSnNvbldlYlRva2VuU3RyYXRlZ3kiLCJqd3RGcm9tUmVxdWVzdCIsIkV4dHJhY3RKd3QiLCJmcm9tQXV0aEhlYWRlckFzQmVhcmVyVG9rZW4iLCJzZWNyZXRPcktleSIsImp3dFBheWxvYWQiLCJ1dWlkIiwiTk9UX0VYSVNUX01FU1NBR0UiXSwibWFwcGluZ3MiOiI7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7Ozs7QUFDQTtBQUVBQSxrQkFBU0MsR0FBVCxDQUNFLElBQUlDLHVCQUFKLENBQ0U7QUFDRUMsRUFBQUEsYUFBYSxFQUFFLFVBRGpCO0FBRUVDLEVBQUFBLGFBQWEsRUFBRTtBQUZqQixDQURGLEVBS0UsT0FBT0MsUUFBUCxFQUFpQkMsUUFBakIsRUFBMkJDLElBQTNCLEtBQW9DO0FBQ2xDLE1BQUk7QUFDRixVQUFNQyxJQUFJLEdBQUcsTUFBTUMsSUFBSSxDQUFDQyxPQUFMLENBQWE7QUFBRUMsTUFBQUEsS0FBSyxFQUFFO0FBQUVOLFFBQUFBO0FBQUY7QUFBVCxLQUFiLENBQW5COztBQUVBLFFBQUksQ0FBQ0csSUFBTCxFQUFXO0FBQ1QsYUFBT0QsSUFBSSxDQUFDSyxpQkFBS0MsUUFBTCxDQUFjQyxpQkFBZixDQUFYO0FBQ0Q7O0FBRUQsUUFBSSxFQUFFLE1BQU1OLElBQUksQ0FBQ08sYUFBTCxDQUFtQlQsUUFBbkIsQ0FBUixDQUFKLEVBQTJDO0FBQ3pDLGFBQU9DLElBQUksQ0FBQ0ssaUJBQUtJLFFBQUwsQ0FBY0YsaUJBQWYsQ0FBWDtBQUNELEtBVEMsQ0FXRjs7O0FBQ0EsV0FBT1AsSUFBSSxDQUFDLEtBQUQsRUFBUUMsSUFBUixDQUFYO0FBQ0QsR0FiRCxDQWFFLE9BQU9TLEdBQVAsRUFBWTtBQUNaO0FBQ0EsV0FBT1YsSUFBSSxDQUFDLHdCQUFELENBQVg7QUFDRDtBQUNGLENBdkJILENBREYsRSxDQTRCQTtBQUNBOzs7QUFDQVAsa0JBQVNDLEdBQVQsQ0FDRSxJQUFJaUIscUJBQUosQ0FDRTtBQUNFQyxFQUFBQSxjQUFjLEVBQUVDLHdCQUFXQywyQkFBWCxFQURsQjtBQUVFQyxFQUFBQSxXQUFXO0FBRmIsQ0FERixFQUtFLE9BQU9DLFVBQVAsRUFBbUJoQixJQUFuQixLQUE0QjtBQUMxQjtBQUNBLE1BQUk7QUFDRixVQUFNQyxJQUFJLEdBQUcsTUFBTUMsSUFBSSxDQUFDQyxPQUFMLENBQWE7QUFBRUMsTUFBQUEsS0FBSyxFQUFFO0FBQUVhLFFBQUFBLElBQUksRUFBRUQsVUFBVSxDQUFDQztBQUFuQjtBQUFULEtBQWIsQ0FBbkI7O0FBRUEsUUFBSWhCLElBQUosRUFBVTtBQUNSLGFBQU9ELElBQUksQ0FBQyxJQUFELEVBQU9DLElBQVAsQ0FBWDtBQUNEOztBQUVELFdBQU9ELElBQUksQ0FBQ0ssaUJBQUthLGlCQUFOLENBQVg7QUFDRCxHQVJELENBUUUsT0FBT1IsR0FBUCxFQUFZO0FBQ1osV0FBT1YsSUFBSSxDQUFDVSxHQUFELENBQVg7QUFDRDtBQUNGLENBbEJILENBREYiLCJzb3VyY2VSb290IjoiL1VzZXJzL2VmcmVpLXBhcmlzL0RvY3VtZW50cy9Qcm9qZXRzLXBlcnNvL3hldS9zZXJ2ZXIvbWlkZGxld2FyZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEpXVF9FTkNSWVBUSU9OIH0gZnJvbSAnQGVudidcbmltcG9ydCBwYXNzcG9ydCBmcm9tICdwYXNzcG9ydCdcbmltcG9ydCB7IFN0cmF0ZWd5IGFzIExvY2FsU3RyYXRlZ3kgfSBmcm9tICdwYXNzcG9ydC1sb2NhbCdcbmltcG9ydCB7IFN0cmF0ZWd5IGFzIEpzb25XZWJUb2tlblN0cmF0ZWd5LCBFeHRyYWN0Snd0IH0gZnJvbSAncGFzc3BvcnQtand0J1xuXG5pbXBvcnQgeyBVU0VSIH0gZnJvbSAnY29uc3RhbnRzL3ZhbGlkYXRpb24nXG4vLyBpbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlcidcblxucGFzc3BvcnQudXNlKFxuICBuZXcgTG9jYWxTdHJhdGVneShcbiAgICB7XG4gICAgICB1c2VybmFtZUZpZWxkOiAnbmlja25hbWUnLFxuICAgICAgcGFzc3dvcmRGaWVsZDogJ3Bhc3N3b3JkJyxcbiAgICB9LFxuICAgIGFzeW5jIChuaWNrbmFtZSwgcGFzc3dvcmQsIGRvbmUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB3aGVyZTogeyBuaWNrbmFtZSB9IH0pXG5cbiAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgcmV0dXJuIGRvbmUoVVNFUi5OSUNLTkFNRS5JTkNPUlJFQ1RfTUVTU0FHRSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghKGF3YWl0IHVzZXIuY2hlY2tQYXNzd29yZChwYXNzd29yZCkpKSB7XG4gICAgICAgICAgcmV0dXJuIGRvbmUoVVNFUi5QQVNTV09SRC5JTkNPUlJFQ1RfTUVTU0FHRSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRoZSByZXR1cm5lZCB1c2VyIG9iamVjdCBpcyBwcmUtZm9ybWF0dGVkIGFuZCByZWFkeSBmb3Igc3RvcmluZyBpbiBKV1RcbiAgICAgICAgcmV0dXJuIGRvbmUoZmFsc2UsIHVzZXIpXG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gc2V0IGVycm9yIHRydWUgdG8gbGV0IHBhc3Nwb3J0ICd2ZXJpZmllZCcgZnVuY3Rpb24gdG8gY2FsbCBlcnJvclxuICAgICAgICByZXR1cm4gZG9uZSgnU29tZXRoaW5nIGlzIG5vdCByaWdodCcpXG4gICAgICB9XG4gICAgfSxcbiAgKSxcbilcblxuLy8gTWlkZGxld2FyZSB0aGF0IGhhbmRsZSBwcm90ZWN0ZWQgcmVxdWVzdHNcbi8vIEFsbG93cyBvbmx5IHJlcXVlc3RzIHdpdGggdmFsaWQgdG9rZW5zIHRvIGFjY2VzcyBzb21lIHNwZWNpYWwgcm91dGVzIG5lZWRpbmcgYXV0aGVudGljYXRpb25cbnBhc3Nwb3J0LnVzZShcbiAgbmV3IEpzb25XZWJUb2tlblN0cmF0ZWd5KFxuICAgIHtcbiAgICAgIGp3dEZyb21SZXF1ZXN0OiBFeHRyYWN0Snd0LmZyb21BdXRoSGVhZGVyQXNCZWFyZXJUb2tlbigpLFxuICAgICAgc2VjcmV0T3JLZXk6IEpXVF9FTkNSWVBUSU9OLFxuICAgIH0sXG4gICAgYXN5bmMgKGp3dFBheWxvYWQsIGRvbmUpID0+IHtcbiAgICAgIC8vIGZpbmQgdGhlIHVzZXIgaW4gZGIgdXNpbmcgdXVpZFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHdoZXJlOiB7IHV1aWQ6IGp3dFBheWxvYWQudXVpZCB9IH0pXG5cbiAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICByZXR1cm4gZG9uZShudWxsLCB1c2VyKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRvbmUoVVNFUi5OT1RfRVhJU1RfTUVTU0FHRSlcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gZG9uZShlcnIpXG4gICAgICB9XG4gICAgfSxcbiAgKSxcbilcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "passport.js"
      ],
      "names": [
        "passport",
        "use",
        "LocalStrategy",
        "usernameField",
        "passwordField",
        "nickname",
        "password",
        "done",
        "user",
        "User",
        "findOne",
        "where",
        "USER",
        "NICKNAME",
        "INCORRECT_MESSAGE",
        "checkPassword",
        "PASSWORD",
        "err",
        "JsonWebTokenStrategy",
        "jwtFromRequest",
        "ExtractJwt",
        "fromAuthHeaderAsBearerToken",
        "secretOrKey",
        "jwtPayload",
        "uuid",
        "NOT_EXIST_MESSAGE"
      ],
      "mappings": ";;AACA;;AACA;;AACA;;AAEA;;;;AACA;AAEAA,kBAASC,GAAT,CACE,IAAIC,uBAAJ,CACE;AACEC,EAAAA,aAAa,EAAE,UADjB;AAEEC,EAAAA,aAAa,EAAE;AAFjB,CADF,EAKE,OAAOC,QAAP,EAAiBC,QAAjB,EAA2BC,IAA3B,KAAoC;AAClC,MAAI;AACF,UAAMC,IAAI,GAAG,MAAMC,IAAI,CAACC,OAAL,CAAa;AAAEC,MAAAA,KAAK,EAAE;AAAEN,QAAAA;AAAF;AAAT,KAAb,CAAnB;;AAEA,QAAI,CAACG,IAAL,EAAW;AACT,aAAOD,IAAI,CAACK,iBAAKC,QAAL,CAAcC,iBAAf,CAAX;AACD;;AAED,QAAI,EAAE,MAAMN,IAAI,CAACO,aAAL,CAAmBT,QAAnB,CAAR,CAAJ,EAA2C;AACzC,aAAOC,IAAI,CAACK,iBAAKI,QAAL,CAAcF,iBAAf,CAAX;AACD,KATC,CAWF;;;AACA,WAAOP,IAAI,CAAC,KAAD,EAAQC,IAAR,CAAX;AACD,GAbD,CAaE,OAAOS,GAAP,EAAY;AACZ;AACA,WAAOV,IAAI,CAAC,wBAAD,CAAX;AACD;AACF,CAvBH,CADF,E,CA4BA;AACA;;;AACAP,kBAASC,GAAT,CACE,IAAIiB,qBAAJ,CACE;AACEC,EAAAA,cAAc,EAAEC,wBAAWC,2BAAX,EADlB;AAEEC,EAAAA,WAAW;AAFb,CADF,EAKE,OAAOC,UAAP,EAAmBhB,IAAnB,KAA4B;AAC1B;AACA,MAAI;AACF,UAAMC,IAAI,GAAG,MAAMC,IAAI,CAACC,OAAL,CAAa;AAAEC,MAAAA,KAAK,EAAE;AAAEa,QAAAA,IAAI,EAAED,UAAU,CAACC;AAAnB;AAAT,KAAb,CAAnB;;AAEA,QAAIhB,IAAJ,EAAU;AACR,aAAOD,IAAI,CAAC,IAAD,EAAOC,IAAP,CAAX;AACD;;AAED,WAAOD,IAAI,CAACK,iBAAKa,iBAAN,CAAX;AACD,GARD,CAQE,OAAOR,GAAP,EAAY;AACZ,WAAOV,IAAI,CAACU,GAAD,CAAX;AACD;AACF,CAlBH,CADF",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/middleware",
      "sourcesContent": [
        "import { JWT_ENCRYPTION } from '@env'\nimport passport from 'passport'\nimport { Strategy as LocalStrategy } from 'passport-local'\nimport { Strategy as JsonWebTokenStrategy, ExtractJwt } from 'passport-jwt'\n\nimport { USER } from 'constants/validation'\n// import User from '../models/user'\n\npassport.use(\n  new LocalStrategy(\n    {\n      usernameField: 'nickname',\n      passwordField: 'password',\n    },\n    async (nickname, password, done) => {\n      try {\n        const user = await User.findOne({ where: { nickname } })\n\n        if (!user) {\n          return done(USER.NICKNAME.INCORRECT_MESSAGE)\n        }\n\n        if (!(await user.checkPassword(password))) {\n          return done(USER.PASSWORD.INCORRECT_MESSAGE)\n        }\n\n        // the returned user object is pre-formatted and ready for storing in JWT\n        return done(false, user)\n      } catch (err) {\n        // set error true to let passport 'verified' function to call error\n        return done('Something is not right')\n      }\n    },\n  ),\n)\n\n// Middleware that handle protected requests\n// Allows only requests with valid tokens to access some special routes needing authentication\npassport.use(\n  new JsonWebTokenStrategy(\n    {\n      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n      secretOrKey: JWT_ENCRYPTION,\n    },\n    async (jwtPayload, done) => {\n      // find the user in db using uuid\n      try {\n        const user = await User.findOne({ where: { uuid: jwtPayload.uuid } })\n\n        if (user) {\n          return done(null, user)\n        }\n\n        return done(USER.NOT_EXIST_MESSAGE)\n      } catch (err) {\n        return done(err)\n      }\n    },\n  ),\n)\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554464996800
  },
  "{\"sourceRoot\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"filename\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants/validation.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/efrei-paris/Documents/Projets-perso/xeu/server\",\"plugins\":[{\"key\":\"dotenv-import\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\".\"],\"alias\":{\"utils\":\"./libs/utils\",\"services\":\"./libs/services\",\"constants\":\"./constants\",\"helpers\":\"./helpers\"}}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.3:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants/validation.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/efrei-paris/Documents/Projets-perso/xeu/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "dotenv-import",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "."
            ],
            "alias": {
              "utils": "./libs/utils",
              "services": "./libs/services",
              "constants": "./constants",
              "helpers": "./helpers"
            }
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants/validation.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants/validation.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants",
        "sourceFileName": "validation.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BLOB = exports.USER = void 0;\nconst USER = {\n  NICKNAME: {\n    MIN_LENGTH: 3,\n    MIN_LENGTH_MESSAGE: 'Please choose a longer nickname',\n    EXIST_MESSAGE: 'Nickname already in use!',\n    INCORRECT_MESSAGE: 'Incorrect nickname'\n  },\n  EMAIL: {\n    EXIST_MESSAGE: 'Email address already in use!'\n  },\n  PASSWORD: {\n    MIN_LENGTH: 7,\n    MIN_LENGTH_MESSAGE: 'Please choose a longer password',\n    CONFIRMATION_MESSAGE: 'Password confirmation doesn\\'t match Password',\n    HASH_MESSAGE: 'Can\\'t hash password',\n    INCORRECT_MESSAGE: 'Incorrect password'\n  },\n  NOT_EXIST: 'User doesn\\'t exist'\n};\nexports.USER = USER;\nconst BLOB = {\n  PATH: {\n    EXIST_MESSAGE: 'Pathname already create!'\n  },\n  PASSWORD: {\n    MIN_LENGTH: 7,\n    MIN_LENGTH_MESSAGE: 'Please choose a longer password',\n    CONFIRMATION_MESSAGE: 'Password confirmation doesn\\'t match Password',\n    HASH_MESSAGE: 'Can\\'t hash password'\n  }\n};\nexports.BLOB = BLOB;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZhbGlkYXRpb24uanMiXSwibmFtZXMiOlsiVVNFUiIsIk5JQ0tOQU1FIiwiTUlOX0xFTkdUSCIsIk1JTl9MRU5HVEhfTUVTU0FHRSIsIkVYSVNUX01FU1NBR0UiLCJJTkNPUlJFQ1RfTUVTU0FHRSIsIkVNQUlMIiwiUEFTU1dPUkQiLCJDT05GSVJNQVRJT05fTUVTU0FHRSIsIkhBU0hfTUVTU0FHRSIsIk5PVF9FWElTVCIsIkJMT0IiLCJQQVRIIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxNQUFNQSxJQUFJLEdBQUc7QUFDbEJDLEVBQUFBLFFBQVEsRUFBRTtBQUNSQyxJQUFBQSxVQUFVLEVBQUUsQ0FESjtBQUVSQyxJQUFBQSxrQkFBa0IsRUFBRSxpQ0FGWjtBQUlSQyxJQUFBQSxhQUFhLEVBQUUsMEJBSlA7QUFLUkMsSUFBQUEsaUJBQWlCLEVBQUU7QUFMWCxHQURRO0FBU2xCQyxFQUFBQSxLQUFLLEVBQUU7QUFDTEYsSUFBQUEsYUFBYSxFQUFFO0FBRFYsR0FUVztBQWFsQkcsRUFBQUEsUUFBUSxFQUFFO0FBQ1JMLElBQUFBLFVBQVUsRUFBRSxDQURKO0FBRVJDLElBQUFBLGtCQUFrQixFQUFFLGlDQUZaO0FBSVJLLElBQUFBLG9CQUFvQixFQUFFLCtDQUpkO0FBS1JDLElBQUFBLFlBQVksRUFBRSxzQkFMTjtBQU1SSixJQUFBQSxpQkFBaUIsRUFBRTtBQU5YLEdBYlE7QUFzQmxCSyxFQUFBQSxTQUFTLEVBQUU7QUF0Qk8sQ0FBYjs7QUF5QkEsTUFBTUMsSUFBSSxHQUFHO0FBQ2xCQyxFQUFBQSxJQUFJLEVBQUU7QUFDSlIsSUFBQUEsYUFBYSxFQUFFO0FBRFgsR0FEWTtBQUtsQkcsRUFBQUEsUUFBUSxFQUFFO0FBQ1JMLElBQUFBLFVBQVUsRUFBRSxDQURKO0FBRVJDLElBQUFBLGtCQUFrQixFQUFFLGlDQUZaO0FBR1JLLElBQUFBLG9CQUFvQixFQUFFLCtDQUhkO0FBSVJDLElBQUFBLFlBQVksRUFBRTtBQUpOO0FBTFEsQ0FBYiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvZWZyZWktcGFyaXMvRG9jdW1lbnRzL1Byb2pldHMtcGVyc28veGV1L3NlcnZlci9jb25zdGFudHMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgVVNFUiA9IHtcbiAgTklDS05BTUU6IHtcbiAgICBNSU5fTEVOR1RIOiAzLFxuICAgIE1JTl9MRU5HVEhfTUVTU0FHRTogJ1BsZWFzZSBjaG9vc2UgYSBsb25nZXIgbmlja25hbWUnLFxuXG4gICAgRVhJU1RfTUVTU0FHRTogJ05pY2tuYW1lIGFscmVhZHkgaW4gdXNlIScsXG4gICAgSU5DT1JSRUNUX01FU1NBR0U6ICdJbmNvcnJlY3Qgbmlja25hbWUnLFxuICB9LFxuXG4gIEVNQUlMOiB7XG4gICAgRVhJU1RfTUVTU0FHRTogJ0VtYWlsIGFkZHJlc3MgYWxyZWFkeSBpbiB1c2UhJyxcbiAgfSxcblxuICBQQVNTV09SRDoge1xuICAgIE1JTl9MRU5HVEg6IDcsXG4gICAgTUlOX0xFTkdUSF9NRVNTQUdFOiAnUGxlYXNlIGNob29zZSBhIGxvbmdlciBwYXNzd29yZCcsXG5cbiAgICBDT05GSVJNQVRJT05fTUVTU0FHRTogJ1Bhc3N3b3JkIGNvbmZpcm1hdGlvbiBkb2VzblxcJ3QgbWF0Y2ggUGFzc3dvcmQnLFxuICAgIEhBU0hfTUVTU0FHRTogJ0NhblxcJ3QgaGFzaCBwYXNzd29yZCcsXG4gICAgSU5DT1JSRUNUX01FU1NBR0U6ICdJbmNvcnJlY3QgcGFzc3dvcmQnLFxuICB9LFxuXG4gIE5PVF9FWElTVDogJ1VzZXIgZG9lc25cXCd0IGV4aXN0Jyxcbn1cblxuZXhwb3J0IGNvbnN0IEJMT0IgPSB7XG4gIFBBVEg6IHtcbiAgICBFWElTVF9NRVNTQUdFOiAnUGF0aG5hbWUgYWxyZWFkeSBjcmVhdGUhJyxcbiAgfSxcblxuICBQQVNTV09SRDoge1xuICAgIE1JTl9MRU5HVEg6IDcsXG4gICAgTUlOX0xFTkdUSF9NRVNTQUdFOiAnUGxlYXNlIGNob29zZSBhIGxvbmdlciBwYXNzd29yZCcsXG4gICAgQ09ORklSTUFUSU9OX01FU1NBR0U6ICdQYXNzd29yZCBjb25maXJtYXRpb24gZG9lc25cXCd0IG1hdGNoIFBhc3N3b3JkJyxcbiAgICBIQVNIX01FU1NBR0U6ICdDYW5cXCd0IGhhc2ggcGFzc3dvcmQnLFxuICB9LFxufVxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "validation.js"
      ],
      "names": [
        "USER",
        "NICKNAME",
        "MIN_LENGTH",
        "MIN_LENGTH_MESSAGE",
        "EXIST_MESSAGE",
        "INCORRECT_MESSAGE",
        "EMAIL",
        "PASSWORD",
        "CONFIRMATION_MESSAGE",
        "HASH_MESSAGE",
        "NOT_EXIST",
        "BLOB",
        "PATH"
      ],
      "mappings": ";;;;;;AAAO,MAAMA,IAAI,GAAG;AAClBC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,UAAU,EAAE,CADJ;AAERC,IAAAA,kBAAkB,EAAE,iCAFZ;AAIRC,IAAAA,aAAa,EAAE,0BAJP;AAKRC,IAAAA,iBAAiB,EAAE;AALX,GADQ;AASlBC,EAAAA,KAAK,EAAE;AACLF,IAAAA,aAAa,EAAE;AADV,GATW;AAalBG,EAAAA,QAAQ,EAAE;AACRL,IAAAA,UAAU,EAAE,CADJ;AAERC,IAAAA,kBAAkB,EAAE,iCAFZ;AAIRK,IAAAA,oBAAoB,EAAE,+CAJd;AAKRC,IAAAA,YAAY,EAAE,sBALN;AAMRJ,IAAAA,iBAAiB,EAAE;AANX,GAbQ;AAsBlBK,EAAAA,SAAS,EAAE;AAtBO,CAAb;;AAyBA,MAAMC,IAAI,GAAG;AAClBC,EAAAA,IAAI,EAAE;AACJR,IAAAA,aAAa,EAAE;AADX,GADY;AAKlBG,EAAAA,QAAQ,EAAE;AACRL,IAAAA,UAAU,EAAE,CADJ;AAERC,IAAAA,kBAAkB,EAAE,iCAFZ;AAGRK,IAAAA,oBAAoB,EAAE,+CAHd;AAIRC,IAAAA,YAAY,EAAE;AAJN;AALQ,CAAb",
      "sourceRoot": "/Users/efrei-paris/Documents/Projets-perso/xeu/server/constants",
      "sourcesContent": [
        "export const USER = {\n  NICKNAME: {\n    MIN_LENGTH: 3,\n    MIN_LENGTH_MESSAGE: 'Please choose a longer nickname',\n\n    EXIST_MESSAGE: 'Nickname already in use!',\n    INCORRECT_MESSAGE: 'Incorrect nickname',\n  },\n\n  EMAIL: {\n    EXIST_MESSAGE: 'Email address already in use!',\n  },\n\n  PASSWORD: {\n    MIN_LENGTH: 7,\n    MIN_LENGTH_MESSAGE: 'Please choose a longer password',\n\n    CONFIRMATION_MESSAGE: 'Password confirmation doesn\\'t match Password',\n    HASH_MESSAGE: 'Can\\'t hash password',\n    INCORRECT_MESSAGE: 'Incorrect password',\n  },\n\n  NOT_EXIST: 'User doesn\\'t exist',\n}\n\nexport const BLOB = {\n  PATH: {\n    EXIST_MESSAGE: 'Pathname already create!',\n  },\n\n  PASSWORD: {\n    MIN_LENGTH: 7,\n    MIN_LENGTH_MESSAGE: 'Please choose a longer password',\n    CONFIRMATION_MESSAGE: 'Password confirmation doesn\\'t match Password',\n    HASH_MESSAGE: 'Can\\'t hash password',\n  },\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1554464996798
  }
}